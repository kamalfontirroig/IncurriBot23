(self.webpackChunkppm=self.webpackChunkppm||[]).push([[286],{92178:function(e){e.exports=function(){var e={isString:function(e){return null!=e&&("string"==typeof e||e instanceof String)},isArray:function(e){return null!=e&&e instanceof Array},inArray:function(e,t){for(var s=0;s<t.length;++s)if(e===t[s])return s;return-1},setTimeout:function(e,t,s){return window.setTimeout(function(){try{e._debug("Invoking timed function",t),t()}catch(s){e._debug("Exception invoking timed function",t,s)}},s)},clearTimeout:function(e){window.clearTimeout(e)}},t=function(){var e=[],t={};this.getTransportTypes=function(){return e.slice(0)},this.findTransportTypes=function(s,n,i){for(var r=[],o=0;o<e.length;++o){var a=e[o];!0===t[a].accept(s,n,i)&&r.push(a)}return r},this.negotiateTransport=function(s,n,i,r){for(var o=0;o<e.length;++o)for(var a=e[o],l=0;l<s.length;++l)if(a===s[l]){var u=t[a];if(!0===u.accept(n,i,r))return u}return null},this.add=function(s,n,i){for(var r=!1,o=0;o<e.length;++o)if(e[o]===s){r=!0;break}return r||("number"!=typeof i?e.push(s):e.splice(i,0,s),t[s]=n),!r},this.find=function(s){for(var n=0;n<e.length;++n)if(e[n]===s)return t[s];return null},this.remove=function(s){for(var n=0;n<e.length;++n)if(e[n]===s){e.splice(n,1);var i=t[s];return delete t[s],i}return null},this.clear=function(){e=[],t={}},this.reset=function(s){for(var n=0;n<e.length;++n)t[e[n]].reset(s)}},s=function(){var t,s,n;this.registered=function(e,n){t=e,s=n},this.unregistered=function(){t=null,s=null},this._debug=function(){s._debug.apply(s,arguments)},this._mixin=function(){return s._mixin.apply(s,arguments)},this.getConfiguration=function(){return s.getConfiguration()},this.getAdvice=function(){return s.getAdvice()},this.setTimeout=function(t,n){return e.setTimeout(s,t,n)},this.clearTimeout=function(t){e.clearTimeout(t)},this.convertToMessages=function(t){if(e.isString(t))try{return JSON.parse(t)}catch(s){throw this._debug("Could not convert to JSON the following string",'"'+t+'"'),s}if(e.isArray(t))return t;if(null==t)return[];if(t instanceof Object)return[t];throw"Conversion Error "+t+", typeof "+typeof t},this.accept=function(e,t,s){throw"Abstract"},this.getType=function(){return t},this.getURL=function(){return n},this.setURL=function(e){n=e},this.send=function(e,t){throw"Abstract"},this.reset=function(e){this._debug("Transport",t,"reset",e?"initial":"retry")},this.abort=function(){this._debug("Transport",t,"aborted")},this.toString=function(){return this.getType()}};s.derive=function(e){function t(){}return t.prototype=e,new t};var n=function(){var t=new s,n=s.derive(t),i=0,r=null,o=[],a=[];function l(e){for(;a.length>0;){var t=a[0],s=t[0],n=t[1];if(s.url!==e.url||s.sync!==e.sync)break;a.shift(),e.messages=e.messages.concat(s.messages),this._debug("Coalesced",s.messages.length,"messages from request",n.id)}}function u(e,t){if(this.transportSend(e,t),t.expired=!1,!e.sync){var s=this.getConfiguration().maxNetworkDelay,n=s;!0===t.metaConnect&&(n+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",n,"ms for the response, maxNetworkDelay",s);var i=this;t.timeout=this.setTimeout(function(){t.expired=!0;var s="Request "+t.id+" of transport "+i.getType()+" exceeded "+n+" ms max network delay",r={reason:s},o=t.xhr;r.httpCode=i.xhrStatus(o),i.abortXHR(o),i._debug(s),i.complete(t,!1,t.metaConnect),e.onFailure(o,e.messages,r)},n)}}function c(e){var t=++i,s={id:t,metaConnect:!1,envelope:e};o.length<this.getConfiguration().maxConnections-1?(o.push(s),u.call(this,e,s)):(this._debug("Transport",this.getType(),"queueing request",t,"envelope",e),a.push([e,s]))}function h(e){var t=e.id;if(this._debug("Transport",this.getType(),"metaConnect complete, request",t),null!==r&&r.id!==t)throw"Longpoll request mismatch, completing request "+t;r=null}function d(t,s){var n=e.inArray(t,o);if(n>=0&&o.splice(n,1),a.length>0){var i=a.shift(),r=i[0],u=i[1];if(this._debug("Transport dequeued request",u.id),s)this.getConfiguration().autoBatch&&l.call(this,r),c.call(this,r),this._debug("Transport completed request",t.id,r);else{var h=this;this.setTimeout(function(){h.complete(u,!1,u.metaConnect);var e={reason:"Previous request failed"},t=u.xhr;e.httpCode=h.xhrStatus(t),r.onFailure(t,r.messages,e)},0)}}}function p(e){if(null!==r)throw"Concurrent metaConnect requests not allowed, request id="+r.id+" not yet completed";var t=++i;this._debug("Transport",this.getType(),"metaConnect send, request",t,"envelope",e);var s={id:t,metaConnect:!0,envelope:e};u.call(this,e,s),r=s}return n.complete=function(e,t,s){s?h.call(this,e):d.call(this,e,t)},n.transportSend=function(e,t){throw"Abstract"},n.transportSuccess=function(e,t,s){t.expired||(this.clearTimeout(t.timeout),this.complete(t,!0,t.metaConnect),s&&s.length>0?e.onSuccess(s):e.onFailure(t.xhr,e.messages,{httpCode:204}))},n.transportFailure=function(e,t,s){t.expired||(this.clearTimeout(t.timeout),this.complete(t,!1,t.metaConnect),e.onFailure(t.xhr,e.messages,s))},n.send=function(e,t){t?p.call(this,e):c.call(this,e)},n.abort=function(){t.abort();for(var e=0;e<o.length;++e){var s=o[e];s&&(this._debug("Aborting request",s),this.abortXHR(s.xhr)||this.transportFailure(s.envelope,s,{reason:"abort"}))}var n=r;n&&(this._debug("Aborting metaConnect request",n),this.abortXHR(n.xhr)||this.transportFailure(n.envelope,n,{reason:"abort"})),this.reset(!0)},n.reset=function(e){t.reset(e),r=null,o=[],a=[]},n.abortXHR=function(e){if(e)try{var t=e.readyState;return e.abort(),t!==window.XMLHttpRequest.UNSENT}catch(s){this._debug(s)}return!1},n.xhrStatus=function(e){if(e)try{return e.status}catch(t){this._debug(t)}return-1},n},i=function(){var e=new n,t=s.derive(e),i=!0;return t.accept=function(e,t,s){return i||!t},t.newXMLHttpRequest=function(){return new window.XMLHttpRequest},t.xhrSend=function(e){var s=t.newXMLHttpRequest();s.context=t.context,s.withCredentials=!0,s.open("POST",e.url,!0!==e.sync);var n=e.headers;if(n)for(var i in n)n.hasOwnProperty(i)&&s.setRequestHeader(i,n[i]);return s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.onload=function(){200===s.status?e.onSuccess(s.responseText):e.onError(s.statusText)},s.onerror=function(){e.onError(s.statusText)},s.send(e.body),s},t.transportSend=function(e,t){this._debug("Transport",this.getType(),"sending request",t.id,"envelope",e);var s=this;try{var n=!0;t.xhr=this.xhrSend({transport:this,url:e.url,sync:e.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(e.messages),onSuccess:function(n){s._debug("Transport",s.getType(),"received response",n);var r=!1;try{var o=s.convertToMessages(n);0===o.length?(i=!1,s.transportFailure(e,t,{httpCode:204})):(r=!0,s.transportSuccess(e,t,o))}catch(l){if(s._debug(l),!r){i=!1;var a={exception:l};a.httpCode=s.xhrStatus(t.xhr),s.transportFailure(e,t,a)}}},onError:function(r,o){s._debug("Transport",s.getType(),"received error",r,o),i=!1;var a={reason:r,exception:o};a.httpCode=s.xhrStatus(t.xhr),n?s.setTimeout(function(){s.transportFailure(e,t,a)},0):s.transportFailure(e,t,a)}}),n=!1}catch(r){i=!1,this.setTimeout(function(){s.transportFailure(e,t,{exception:r})},0)}},t.reset=function(t){e.reset(t),i=!0},t},r=function(){var e=new n,t=s.derive(e),i=0;function r(e,t,s){var n=this;return function(){n.transportFailure(e,t,"error",s)}}return t.accept=function(e,t,s){return!0},t.jsonpSend=function(e){var t=document.getElementsByTagName("head")[0],s=document.createElement("script"),n="_cometd_jsonp_"+i++;window[n]=function(i){t.removeChild(s),delete window[n],e.onSuccess(i)};var r=e.url;r+=r.indexOf("?")<0?"?":"&",r+="jsonp="+n,r+="&message="+encodeURIComponent(e.body),s.src=r,s.async=!0!==e.sync,s.type="application/javascript",s.onerror=function(t){e.onError("jsonp "+t.type)},t.appendChild(s)},t.transportSend=function(e,t){for(var s=this,n=0,i=e.messages.length,o=[];i>0;){var a=JSON.stringify(e.messages.slice(n,n+i)),l=e.url.length+encodeURI(a).length,u=this.getConfiguration().maxURILength;if(l>u){if(1===i){var c="Bayeux message too big ("+l+" bytes, max is "+u+") for transport "+this.getType();return void this.setTimeout(r.call(this,e,t,c),0)}--i}else o.push(i),i=e.messages.length-(n+=i)}var h=e;if(o.length>1){var d=0,p=o[0];this._debug("Transport",this.getType(),"split",e.messages.length,"messages into",o.join(" + ")),(h=this._mixin(!1,{},e)).messages=e.messages.slice(d,p),h.onSuccess=e.onSuccess,h.onFailure=e.onFailure;for(var m=1;m<o.length;++m){var g=this._mixin(!1,{},e);g.messages=e.messages.slice(d=p,p+=o[m]),g.onSuccess=e.onSuccess,g.onFailure=e.onFailure,this.send(g,t.metaConnect)}}this._debug("Transport",this.getType(),"sending request",t.id,"envelope",h);try{var f=!0;this.jsonpSend({transport:this,url:h.url,sync:h.sync,headers:this.getConfiguration().requestHeaders,body:JSON.stringify(h.messages),onSuccess:function(e){var n=!1;try{var i=s.convertToMessages(e);0===i.length?s.transportFailure(h,t,{httpCode:204}):(n=!0,s.transportSuccess(h,t,i))}catch(c){s._debug(c),n||s.transportFailure(h,t,{exception:c})}},onError:function(e,n){var i={reason:e,exception:n};f?s.setTimeout(function(){s.transportFailure(h,t,i)},0):s.transportFailure(h,t,i)}}),f=!1}catch(y){this.setTimeout(function(){s.transportFailure(h,t,{exception:y})},0)}},t},o=function(){var t,n=new s,i=s.derive(n),r=!0,o=!1,a=!0,l=null,u=null,c=!1,h=null;function d(e,t){e&&(this.webSocketClose(e,t.code,t.reason),this.onClose(e,t))}function p(e){return e===u||e===l}function m(e,t,s){for(var n=[],i=0;i<t.messages.length;++i){var r=t.messages[i];r.id&&n.push(r.id)}e.envelopes[n.join(",")]=[t,s],this._debug("Transport",this.getType(),"stored envelope, envelopes",e.envelopes)}function g(e){if(!u){var s=t.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",s);try{var n=t.getConfiguration().protocol;e.webSocket=n?new window.WebSocket(s,n):new window.WebSocket(s),u=e}catch(m){throw r=!1,this._debug("Exception while creating WebSocket object",m),m}a=!1!==t.getConfiguration().stickyReconnect;var i=this,c=t.getConfiguration().connectTimeout;c>0&&(e.connectTimer=this.setTimeout(function(){t._debug("Transport",i.getType(),"timed out while connecting to URL",s,":",c,"ms"),d.call(i,e,{code:1e3,reason:"Connect Timeout"})},c));var h=function(s){t._debug("WebSocket onclose",e,s=s||{code:1e3},"connecting",u,"current",l),e.connectTimer&&i.clearTimeout(e.connectTimer),i.onClose(e,s)};e.webSocket.onopen=function(){t._debug("WebSocket onopen",e),e.connectTimer&&i.clearTimeout(e.connectTimer),p(e)?(u=null,l=e,o=!0,i.onOpen(e)):(t._warn("Closing extra WebSocket connection",this,"active connection",l),d.call(i,e,{code:1e3,reason:"Extra Connection"}))},e.webSocket.onclose=h,e.webSocket.onerror=function(){h({code:1e3,reason:"Error"})},e.webSocket.onmessage=function(s){t._debug("WebSocket onmessage",s,e),i.onMessage(e,s)},this._debug("Transport",this.getType(),"configured callbacks on",e)}}function f(e,s,n){var i=JSON.stringify(s.messages);e.webSocket.send(i),this._debug("Transport",this.getType(),"sent",s,"metaConnect =",n);var r=this.getConfiguration().maxNetworkDelay,o=r;n&&(o+=this.getAdvice().timeout,c=!0);for(var a=this,l=[],u=0;u<s.messages.length;++u)!function(){var n=s.messages[u];n.id&&(l.push(n.id),e.timeouts[n.id]=a.setTimeout(function(){t._debug("Transport",a.getType(),"timing out message",n.id,"after",o,"on",e),d.call(a,e,{code:1e3,reason:"Message Timeout"})},o))}();this._debug("Transport",this.getType(),"waiting at most",o,"ms for messages",l,"maxNetworkDelay",r,", timeouts:",e.timeouts)}function y(e,t,s){try{null===e?(m.call(this,e=u||{envelopes:{},timeouts:{}},t,s),g.call(this,e)):(m.call(this,e,t,s),f.call(this,e,t,s))}catch(i){var n=this;this.setTimeout(function(){d.call(n,e,{code:1e3,reason:"Exception",exception:i})},0)}}return i.reset=function(e){n.reset(e),r=!0,e&&(o=!1),a=!0,l=null,u=null,c=!1},i._notifySuccess=function(e,t){e.call(this,t)},i._notifyFailure=function(e,t,s,n){e.call(this,t,s,n)},i.onOpen=function(e){var t=e.envelopes;for(var s in this._debug("Transport",this.getType(),"opened",e,"pending messages",t),t)if(t.hasOwnProperty(s)){var n=t[s],i=n[0];h=i.onSuccess,f.call(this,e,i,n[1])}},i.onMessage=function(t,s){this._debug("Transport",this.getType(),"received websocket message",s,t);for(var n=!1,i=this.convertToMessages(s.data),r=[],o=0;o<i.length;++o){var a=i[o];if((/^\/meta\//.test(a.channel)||void 0===a.data)&&a.id){r.push(a.id);var l=t.timeouts[a.id];l&&(this.clearTimeout(l),delete t.timeouts[a.id],this._debug("Transport",this.getType(),"removed timeout for message",a.id,", timeouts",t.timeouts))}"/meta/connect"===a.channel&&(c=!1),"/meta/disconnect"!==a.channel||c||(n=!0)}for(var u=!1,d=t.envelopes,p=0;p<r.length;++p){var m=r[p];for(var g in d)if(d.hasOwnProperty(g)){var f=g.split(","),y=e.inArray(m,f);if(y>=0){u=!0,f.splice(y,1);var v=d[g][0],_=d[g][1];delete d[g],f.length>0&&(d[f.join(",")]=[v,_]);break}}}u&&this._debug("Transport",this.getType(),"removed envelope, envelopes",d),this._notifySuccess(h,i),n&&this.webSocketClose(t,1e3,"Disconnect")},i.onClose=function(e,t){this._debug("Transport",this.getType(),"closed",e,t),p(e)&&(r=a&&o,u=null,l=null);var s=e.timeouts;for(var n in e.timeouts={},s)s.hasOwnProperty(n)&&this.clearTimeout(s[n]);var i=e.envelopes;for(var h in e.envelopes={},i)if(i.hasOwnProperty(h)){var d=i[h][0];i[h][1]&&(c=!1);var m={websocketCode:t.code,reason:t.reason};t.exception&&(m.exception=t.exception),this._notifyFailure(d.onFailure,e,d.messages,m)}},i.registered=function(e,s){n.registered(e,s),t=s},i.accept=function(e,s,n){return this._debug("Transport",this.getType(),"accept, supported:",r),r&&!!window.WebSocket&&!1!==t.websocketEnabled},i.send=function(e,t){this._debug("Transport",this.getType(),"sending",e,"metaConnect =",t),y.call(this,l,e,t)},i.webSocketClose=function(e,t,s){try{e.webSocket&&e.webSocket.close(t,s)}catch(n){this._debug(n)}},i.abort=function(){n.abort(),d.call(this,l,{code:1e3,reason:"Abort"}),this.reset(!0)},i},a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",".","-",":","+","=","^","!","/","*","?","&","<",">","(",")","[","]","{","}","@","%","$","#"],l=[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0];return{CometD:function(s){var n,a,l,u,c,h=this,d=s||"default",p=!1,m=new t,g="disconnected",f=0,y=null,v=0,_=[],b=!1,S=0,T={},w=0,C=null,E=[],x={},A={},k={},I=!1,R=!1,P=0,N=0,D={protocol:null,stickyReconnect:!0,connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,urls:{},maxURILength:2e3,advice:{timeout:6e4,interval:0,reconnect:void 0,maxInterval:0}};function O(e,t){try{return e[t]}catch(s){return}}function F(t){return e.isString(t)}function L(e){return null!=e&&"function"==typeof e}function j(e,t){for(var s="";--t>0&&!(e>=Math.pow(10,t));)s+="0";return s+e}function M(e,t){if(window.console){var s=window.console[e];if(L(s)){var n=new Date;[].splice.call(t,0,0,j(n.getHours(),2)+":"+j(n.getMinutes(),2)+":"+j(n.getSeconds(),2)+"."+j(n.getMilliseconds(),3)),s.apply(window.console,t)}}}function U(e){return/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(e)}function B(e){h._debug("Configuring cometd object with",e),F(e)&&(e={url:e}),e||(e={}),D=h._mixin(!1,D,e);var t=h.getURL();if(!t)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var s=U(t),n=s[8],i=s[9];if(p=h._isCrossDomain(s[2]),D.appendMessageTypeToURL)if(void 0!==i&&i.length>0)h._info("Appending message type to URI "+n+i+" is not supported, disabling 'appendMessageTypeToURL' configuration"),D.appendMessageTypeToURL=!1;else{var r=n.split("/"),o=r.length-1;n.match(/\/$/)&&(o-=1),r[o].indexOf(".")>=0&&(h._info("Appending message type to URI "+n+" is not supported, disabling 'appendMessageTypeToURL' configuration"),D.appendMessageTypeToURL=!1)}}function q(e){if(e){var t=T[e.channel];t&&t[e.id]&&(delete t[e.id],h._debug("Removed",e.listener?"listener":"subscription",e))}}function Q(e){e&&!e.listener&&q(e)}function H(){for(var e in T)if(T.hasOwnProperty(e)){var t=T[e];if(t)for(var s in t)t.hasOwnProperty(s)&&Q(t[s])}}function G(e){g!==e&&(h._debug("Status",g,"->",e),g=e)}function $(){return"disconnecting"===g||"disconnected"===g}function z(){return""+ ++f}function K(e,t,s,n,i){try{return t.call(e,n)}catch(o){var r=h.onExtensionException;if(L(r)){h._debug("Invoking extension exception handler",s,o);try{r.call(h,o,s,i,n)}catch(a){h._info("Exception during execution of extension exception handler",s,a)}}else h._info("Exception during execution of extension",s,o);return n}}function W(e){for(var t=E.length-1;t>=0&&null!=e;--t){var s=E[t],n=s.extension.outgoing;if(L(n)){var i=K(s.extension,n,s.name,e,!0);e=void 0===i?e:i}}return e}function J(e,t){var s=T[e];if(s)for(var n in s)if(s.hasOwnProperty(n)){var i=s[n];if(i)try{i.callback.call(i.scope,t)}catch(o){var r=h.onListenerException;if(L(r)){h._debug("Invoking listener exception handler",i,o);try{r.call(h,o,i,i.listener,t)}catch(a){h._info("Exception during execution of listener exception handler",i,a)}}else h._info("Exception during execution of listener",i,t,o)}}}function V(e,t){J(e,t);for(var s=e.split("/"),n=s.length-1,i=n;i>0;--i){var r=s.slice(0,i).join("/")+"/*";i===n&&J(r,t),J(r+="*",t)}}function Y(){null!==C&&e.clearTimeout(C),C=null}function Z(t,s){Y();var n=x.interval+s;h._debug("Function scheduled in",n,"ms, interval =",x.interval,"backoff =",w,t),C=e.setTimeout(h,t,n)}function X(e,t,s,i){for(var r=0;r<t.length;++r){var o=t[r],a=o.id;y&&(o.clientId=y),null!=(o=W(o))?(o.id=a,t[r]=o):(delete A[a],t.splice(r--,1))}if(0!==t.length){var l=h.getURL();D.appendMessageTypeToURL&&(l.match(/\/$/)||(l+="/"),i&&(l+=i));var d={url:l,sync:e,messages:t,onSuccess:function(e){try{u.call(h,e)}catch(t){h._info("Exception during handling of messages",t)}},onFailure:function(e,t,s){try{var n=h.getTransport();s.connectionType=n?n.getType():"unknown",c.call(h,e,t,s)}catch(i){h._info("Exception during handling of failure",i)}}};h._debug("Send",d),n.send(d,s)}}function ee(e){v>0||!0===b?_.push(e):X(!1,[e],!1)}function te(){w=0}function se(){var e=_;_=[],e.length>0&&X(!1,e,!1)}function ne(e){G("connecting"),Z(function(){!function(){if(!$()){var e={id:z(),channel:"/meta/connect",connectionType:n.getType()};R||(e.advice={timeout:0}),G("connecting"),h._debug("Connect sent",e),X(!1,[e],!0,"connect"),G("connected")}}()},e)}function ie(e){e&&(x=h._mixin(!1,{},D.advice,e),h._debug("New advice",x))}function re(e){if(Y(),e&&n&&n.abort(),y=null,G("disconnected"),v=0,te(),n=null,I=!1,R=!1,_.length>0){var t=_;_=[],c.call(h,void 0,t,{reason:"Disconnected"})}}function oe(e,t,s){var n=h.onTransportException;if(L(n)){h._debug("Invoking transport exception handler",e,t,s);try{n.call(h,s,e,t)}catch(i){h._info("Exception during execution of transport exception handler",i)}}}function ae(e,t){L(e)&&(t=e,e=void 0),y=null,H(),$()&&m.reset(!0),ie({}),v=0,b=!0,a=e,l=t;var s="1.0",i=h.getURL(),r=m.findTransportTypes(s,p,i),o={id:z(),version:s,minimumVersion:s,channel:"/meta/handshake",supportedConnectionTypes:r,advice:{timeout:x.timeout,interval:x.interval}},u=h._mixin(!1,{},a,o);if(h._putCallback(u.id,t),!n&&!(n=m.negotiateTransport(r,s,p,i))){var c="Could not find initial transport among: "+m.getTransportTypes();throw h._warn(c),c}h._debug("Initial transport is",n.getType()),G("handshaking"),h._debug("Handshake sent",u),X(!1,[u],!1,"handshake")}function le(e,t){try{e.call(h,t)}catch(n){var s=h.onCallbackException;if(L(s)){h._debug("Invoking callback exception handler",n);try{s.call(h,n,t)}catch(i){h._info("Exception during execution of callback exception handler",i)}}else h._info("Exception during execution of message callback",n)}}function ue(e){var t=h._getCallback([e.id]);L(t)&&(delete A[e.id],le(t,e))}function ce(t){var s=k[t.id];if(delete k[t.id],s){h._debug("Handling remote call response for",t,"with context",s);var n=s.timeout;n&&e.clearTimeout(n);var i=s.callback;if(L(i))return le(i,t),!0}return!1}function he(e){h._debug("Transport failure handling",e),e.transport&&(n=e.transport),e.url&&n.setURL(e.url);var t=e.action,s=e.delay||0;switch(t){case"handshake":!function(e){G("handshaking"),b=!0,Z(function(){ae(a,l)},e)}(s);break;case"retry":ne(s);break;case"none":re(!0);break;default:throw"Unknown action "+t}}function de(e,t){ue(e),V("/meta/handshake",e),V("/meta/unsuccessful",e),$()&&(t.action="none"),h.onTransportFailure.call(h,e,t,he)}function pe(e){de(e,{cause:"failure",action:"handshake",transport:null})}function me(e,t){V("/meta/connect",e),V("/meta/unsuccessful",e),$()&&(t.action="none"),h.onTransportFailure.call(h,e,t,he)}function ge(e){R=!1,me(e,{cause:"failure",action:"retry",transport:null})}function fe(e){re(!0),ue(e),V("/meta/disconnect",e),V("/meta/unsuccessful",e)}function ye(e){fe(e)}function ve(e){var t=T[e.subscription];if(t)for(var s in t)if(t.hasOwnProperty(s)){var n=t[s];n&&!n.listener&&(delete t[s],h._debug("Removed failed subscription",n))}ue(e),V("/meta/subscribe",e),V("/meta/unsuccessful",e)}function _e(e){ve(e)}function be(e){ue(e),V("/meta/unsubscribe",e),V("/meta/unsuccessful",e)}function Se(e){be(e)}function Te(e){ce(e)||(ue(e),V("/meta/publish",e),V("/meta/unsuccessful",e))}function we(e){Te(e)}function Ce(e){if(P=0,null!=(e=function(e){for(var t=0;t<E.length&&null!=e;++t){var s=E[t],n=s.extension.incoming;if(L(n)){var i=K(s.extension,n,s.name,e,!1);e=void 0===i?e:i}}return e}(e)))switch(ie(e.advice),e.channel){case"/meta/handshake":!function(e){var t=h.getURL();if(e.successful){var s=h._isCrossDomain(U(t)[2]),i=m.negotiateTransport(e.supportedConnectionTypes,e.version,s,t);if(null===i)return e.successful=!1,void de(e,{cause:"negotiation",action:"none",transport:null});n!==i&&(h._debug("Transport",n.getType(),"->",i.getType()),n=i),y=e.clientId,b=!1,se(),e.reestablish=I,I=!0,ue(e),V("/meta/handshake",e),N=e["x-messages"]||0;var r=$()?"none":x.reconnect||"retry";switch(r){case"retry":te(),0===N?ne(0):h._debug("Processing",N,"handshake-delivered messages");break;case"none":re(!0);break;default:throw"Unrecognized advice action "+r}}else de(e,{cause:"unsuccessful",action:x.reconnect||"handshake",transport:n})}(e);break;case"/meta/connect":!function(e){if(R=e.successful){V("/meta/connect",e);var t=$()?"none":x.reconnect||"retry";switch(t){case"retry":te(),ne(w);break;case"none":re(!1);break;default:throw"Unrecognized advice action "+t}}else me(e,{cause:"unsuccessful",action:x.reconnect||"retry",transport:n})}(e);break;case"/meta/disconnect":!function(e){e.successful?(re(!1),ue(e),V("/meta/disconnect",e)):fe(e)}(e);break;case"/meta/subscribe":!function(e){e.successful?(ue(e),V("/meta/subscribe",e)):ve(e)}(e);break;case"/meta/unsubscribe":!function(e){e.successful?(ue(e),V("/meta/unsubscribe",e)):be(e)}(e);break;default:!function(e){void 0!==e.data?ce(e)||(V(e.channel,e),N>0&&0==--N&&(h._debug("Processed last handshake-delivered message"),ne(0))):void 0===e.successful?h._warn("Unknown Bayeux Message",e):e.successful?(ue(e),V("/meta/publish",e)):Te(e)}(e)}}function Ee(e){var t=T[e];if(t)for(var s in t)if(t.hasOwnProperty(s)&&t[s])return!0;return!1}function xe(e,t){var s={scope:e,method:t};if(L(e))s.scope=void 0,s.method=e;else if(F(t)){if(!e)throw"Invalid scope "+e;if(s.method=e[t],!L(s.method))throw"Invalid callback "+t+" for scope "+e}else if(!L(t))throw"Invalid callback "+t;return s}function Ae(e,t,s,n){var i=xe(t,s);h._debug("Adding",n?"listener":"subscription","on",e,"with scope",i.scope,"and callback",i.method);var r=++S,o={id:r,channel:e,scope:i.scope,callback:i.method,listener:n},a=T[e];return a||(T[e]=a={}),a[r]=o,h._debug("Added",n?"listener":"subscription",o),o}this._mixin=function(e,t,s){for(var n=t||{},i=2;i<arguments.length;++i){var r=arguments[i];if(null!=r)for(var o in r)if(r.hasOwnProperty(o)){var a=O(r,o),l=O(n,o);if(a===t)continue;if(void 0===a)continue;n[o]=e&&"object"==typeof a&&null!==a?this._mixin(e,a instanceof Array?l instanceof Array?l:[]:"object"!=typeof l||l instanceof Array?{}:l,a):a}}return n},this._warn=function(){M("warn",arguments)},this._info=function(){"warn"!==D.logLevel&&M("info",arguments)},this._debug=function(){"debug"===D.logLevel&&M("debug",arguments)},this._isCrossDomain=function(e){return!!(window.location&&window.location.host&&e)&&e!==window.location.host},this.send=ee,this._getCallback=function(e){return A[e]},this._putCallback=function(e,t){var s=this._getCallback(e);return L(t)&&(A[e]=t),s},this.onTransportFailure=function(e,t,s){this._debug("Transport failure",t,"for",e);var i=this.getTransportRegistry(),r=this.getURL(),o=this._isCrossDomain(U(r)[2]),a=i.findTransportTypes("1.0",o,r);if("none"===t.action){if("/meta/handshake"===e.channel&&!t.transport){var l="Could not negotiate transport, client=["+a+"], server=["+e.supportedConnectionTypes+"]";this._warn(l),oe(n.getType(),null,{reason:l,connectionType:n.getType(),transport:n})}}else if(t.delay=this.getBackoffPeriod(),"/meta/handshake"===e.channel){if(!t.transport){var u=i.negotiateTransport(a,"1.0",o,r);u?(this._debug("Transport",n.getType(),"->",u.getType()),oe(n.getType(),u.getType(),e.failure),t.action="handshake",t.transport=u):(this._warn("Could not negotiate transport, client=["+a+"]"),oe(n.getType(),null,e.failure),t.action="none")}"none"!==t.action&&this.increaseBackoffPeriod()}else{var c=(new Date).getTime();if(0===P&&(P=c),"retry"===t.action){t.delay=this.increaseBackoffPeriod();var d=x.maxInterval;d>0&&c-P+w>x.timeout+x.interval+d&&(t.action="handshake")}"handshake"===t.action&&(t.delay=0,i.reset(!1),this.resetBackoffPeriod())}s.call(h,t)},this.receive=Ce,u=function(e){h._debug("Received",e);for(var t=0;t<e.length;++t)Ce(e[t])},c=function(e,t,s){h._debug("handleFailure",e,t,s),s.transport=e;for(var n=0;n<t.length;++n){var i=t[n],r={id:i.id,successful:!1,channel:i.channel,failure:s};switch(s.message=i,i.channel){case"/meta/handshake":pe(r);break;case"/meta/connect":ge(r);break;case"/meta/disconnect":ye(r);break;case"/meta/subscribe":r.subscription=i.subscription,_e(r);break;case"/meta/unsubscribe":r.subscription=i.subscription,Se(r);break;default:we(r)}}},this.registerTransport=function(e,t,s){var n=m.add(e,t,s);return n&&(this._debug("Registered transport",e),L(t.registered)&&t.registered(e,this)),n},this.unregisterTransport=function(e){var t=m.remove(e);return null!==t&&(this._debug("Unregistered transport",e),L(t.unregistered)&&t.unregistered()),t},this.unregisterTransports=function(){m.clear()},this.getTransportTypes=function(){return m.getTransportTypes()},this.findTransport=function(e){return m.find(e)},this.getTransportRegistry=function(){return m},this.configure=function(e){B.call(this,e)},this.init=function(e,t){this.configure(e),this.handshake(t)},this.handshake=function(e,t){if("disconnected"!==g)throw"Illegal state: handshaken";ae(e,t)},this.disconnect=function(e,t,s){if(!$()){"boolean"!=typeof e&&(s=t,t=e,e=!1),L(t)&&(s=t,t=void 0);var n={id:z(),channel:"/meta/disconnect"},i=this._mixin(!1,{},t,n);h._putCallback(i.id,s),G("disconnecting"),X(!0===e,[i],!1,"disconnect")}},this.startBatch=function(){++v,h._debug("Starting batch, depth",v)},this.endBatch=function(){!function(){if(--v,h._debug("Ending batch, depth",v),v<0)throw"Calls to startBatch() and endBatch() are not paired";0!==v||$()||b||se()}()},this.batch=function(e,t){var s=xe(e,t);this.startBatch();try{s.method.call(s.scope),this.endBatch()}catch(n){throw this._info("Exception during execution of batch",n),this.endBatch(),n}},this.addListener=function(e,t,s){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!F(e))throw"Illegal argument type: channel must be a string";return Ae(e,t,s,!0)},this.removeListener=function(e){if(!e||!e.channel||!("id"in e))throw"Invalid argument: expected subscription, not "+e;q(e)},this.clearListeners=function(){T={}},this.subscribe=function(e,t,s,n,i){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!F(e))throw"Illegal argument type: channel must be a string";if($())throw"Illegal state: disconnected";L(t)&&(i=n,n=s,s=t,t=void 0),L(n)&&(i=n,n=void 0);var r=!Ee(e),o=Ae(e,t,s,!1);if(r){var a={id:z(),channel:"/meta/subscribe",subscription:e},l=this._mixin(!1,{},n,a);h._putCallback(l.id,i),ee(l)}return o},this.unsubscribe=function(e,t,s){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if($())throw"Illegal state: disconnected";L(t)&&(s=t,t=void 0),this.removeListener(e);var n=e.channel;if(!Ee(n)){var i={id:z(),channel:"/meta/unsubscribe",subscription:n},r=this._mixin(!1,{},t,i);h._putCallback(r.id,s),ee(r)}},this.resubscribe=function(e,t){if(Q(e),e)return this.subscribe(e.channel,e.scope,e.callback,t)},this.clearSubscriptions=function(){H()},this.publish=function(e,t,s,n){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!F(e))throw"Illegal argument type: channel must be a string";if(/^\/meta\//.test(e))throw"Illegal argument: cannot publish to meta channels";if($())throw"Illegal state: disconnected";L(t)?(n=t,t={},s=void 0):L(s)&&(n=s,s=void 0);var i={id:z(),channel:e,data:t},r=this._mixin(!1,{},s,i);h._putCallback(r.id,n),ee(r)},this.publishBinary=function(e,t,s,n,i){L(t)?(i=t,t=new ArrayBuffer(0),s=!0,n=void 0):L(s)?(i=s,s=!0,n=void 0):L(n)&&(i=n,n=void 0),this.publish(e,{meta:n,data:t,last:s},{ext:{binary:{}}},i)},this.remoteCall=function(t,s,n,i,r){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!F(t))throw"Illegal argument type: target must be a string";if($())throw"Illegal state: disconnected";if(L(s)?(r=s,s={},n=D.maxNetworkDelay,i=void 0):L(n)?(r=n,n=D.maxNetworkDelay,i=void 0):L(i)&&(r=i,i=void 0),"number"!=typeof n)throw"Illegal argument type: timeout must be a number";t.match(/^\//)||(t="/"+t);var o="/service"+t,a={id:z(),channel:o,data:s},l=this._mixin(!1,{},i,a),u={callback:r};n>0&&(u.timeout=e.setTimeout(h,function(){h._debug("Timing out remote call",l,"after",n,"ms"),Te({id:l.id,error:"406::timeout",successful:!1,failure:{message:l,reason:"Remote Call Timeout"}})},n),h._debug("Scheduled remote call timeout",l,"in",n,"ms")),k[l.id]=u,ee(l)},this.remoteCallBinary=function(e,t,s,n,i,r){L(t)?(r=t,t=new ArrayBuffer(0),s=!0,n=void 0,i=D.maxNetworkDelay):L(s)?(r=s,s=!0,n=void 0,i=D.maxNetworkDelay):L(n)?(r=n,n=void 0,i=D.maxNetworkDelay):L(i)&&(r=i,i=D.maxNetworkDelay),this.remoteCall(e,{meta:n,data:t,last:s},i,{ext:{binary:{}}},r)},this.getStatus=function(){return g},this.isDisconnected=$,this.setBackoffIncrement=function(e){D.backoffIncrement=e},this.getBackoffIncrement=function(){return D.backoffIncrement},this.getBackoffPeriod=function(){return w},this.increaseBackoffPeriod=function(){return w<D.maxBackoff&&(w+=D.backoffIncrement),w},this.resetBackoffPeriod=function(){te()},this.setLogLevel=function(e){D.logLevel=e},this.registerExtension=function(e,t){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!F(e))throw"Illegal argument type: extension name must be a string";for(var s=!1,n=0;n<E.length;++n)if(E[n].name===e){s=!0;break}return s?(this._info("Could not register extension with name",e,"since another extension with the same name already exists"),!1):(E.push({name:e,extension:t}),this._debug("Registered extension",e),L(t.registered)&&t.registered(e,this),!0)},this.unregisterExtension=function(e){if(!F(e))throw"Illegal argument type: extension name must be a string";for(var t=!1,s=0;s<E.length;++s){var n=E[s];if(n.name===e){E.splice(s,1),t=!0,this._debug("Unregistered extension",e);var i=n.extension;L(i.unregistered)&&i.unregistered();break}}return t},this.getExtension=function(e){for(var t=0;t<E.length;++t){var s=E[t];if(s.name===e)return s.extension}return null},this.getName=function(){return d},this.getClientId=function(){return y},this.getURL=function(){if(n){var e=n.getURL();if(e)return e;if(e=D.urls[n.getType()])return e}return D.url},this.getTransport=function(){return n},this.getConfiguration=function(){return this._mixin(!0,{},D)},this.getAdvice=function(){return this._mixin(!0,{},x)},window.WebSocket&&this.registerTransport("websocket",new o),this.registerTransport("long-polling",new i),this.registerTransport("callback-polling",new r)},Transport:s,RequestTransport:n,LongPollingTransport:i,CallbackPollingTransport:r,WebSocketTransport:o,Utils:e,Z85:{encode:function(e){var t=null;if(e instanceof ArrayBuffer?t=e:e.buffer instanceof ArrayBuffer?t=e.buffer:Array.isArray(e)&&(t=new Uint8Array(e).buffer),null==t)throw"Cannot Z85 encode "+e;for(var s=t.byteLength,n=s%4,i=4-(0===n?4:n),r=new DataView(t),o="",l=0,u=0;u<s+i;++u){var c=u>=s;if(l=256*l+(c?0:r.getUint8(u)),(u+1)%4==0){for(var h=52200625,d=5;d>0;--d){if(!c||d>i){var p=Math.floor(l/h)%85;o+=a[p]}h/=85}l=0}}return o},decode:function(e){for(var t=e.length%5,s=5-(0===t?5:t),n=0;n<s;++n)e+=a[a.length-1];for(var i=e.length,r=new ArrayBuffer(4*i/5-s),o=new DataView(r),u=0,c=0,h=0,d=0;d<i;++d){var p=e.charCodeAt(c++)-32;if(u=85*u+l[p],c%5==0){for(var m=16777216;m>=1;)h<o.byteLength&&o.setUint8(h++,Math.floor(u/m)%256),m/=256;u=0}}return r}}}}()},32286:(e,t,s)=>{"use strict";s.d(t,{f:()=>_r});var n=s(82376),i=s(94846),r=s(93185);
/**
 * @license Angular v12.1.4
 * (c) 2010-2021 Google LLC. https://angular.io/
 * License: MIT
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function o(){return"undefined"!=typeof window&&void 0!==window.document}function a(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function l(e){switch(e.length){case 0:return new r.ZN;case 1:return e[0];default:return new r.ZE(e)}}function u(e,t,s,n,i={},o={}){const a=[],l=[];let u=-1,c=null;if(n.forEach(e=>{const s=e.offset,n=s==u,h=n&&c||{};Object.keys(e).forEach(s=>{let n=s,l=e[s];if("offset"!==s)switch(n=t.normalizePropertyName(n,a),l){case r.k1:l=i[s];break;case r.l3:l=o[s];break;default:l=t.normalizeStyleValue(s,n,l,a)}h[n]=l}),n||l.push(h),c=h,u=s}),a.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${a.join(e)}`)}return l}function c(e,t,s,n){switch(t){case"start":e.onStart(()=>n(s&&h(s,"start",e)));break;case"done":e.onDone(()=>n(s&&h(s,"done",e)));break;case"destroy":e.onDestroy(()=>n(s&&h(s,"destroy",e)))}}function h(e,t,s){const n=s.totalTime,i=d(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==n?e.totalTime:n,!!s.disabled),r=e._data;return null!=r&&(i._data=r),i}function d(e,t,s,n,i="",r=0,o){return{element:e,triggerName:t,fromState:s,toState:n,phaseName:i,totalTime:r,disabled:!!o}}function p(e,t,s){let n;return e instanceof Map?(n=e.get(t),n||e.set(t,n=s)):(n=e[t],n||(n=e[t]=s)),n}function m(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let g=(e,t)=>!1,f=(e,t)=>!1,y=(e,t,s)=>[];const v=a();(v||"undefined"!=typeof Element)&&(g=o()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),f=(()=>{if(v||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,s)=>t.apply(e,[s]):f}})(),y=(e,t,s)=>{let n=[];if(s){const s=e.querySelectorAll(t);for(let e=0;e<s.length;e++)n.push(s[e])}else{const s=e.querySelector(t);s&&n.push(s)}return n});let _=null,b=!1;function S(e){_||(_=("undefined"!=typeof document?document.body:null)||{},b=!!_.style&&"WebkitAppearance"in _.style);let t=!0;return _.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in _.style,!t&&b)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in _.style),t}const T=f,w=g,C=y;function E(e){const t={};return Object.keys(e).forEach(s=>{const n=s.replace(/([a-z])([A-Z])/g,"$1-$2");t[n]=e[s]}),t}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */let x=(()=>{class e{validateStyleProperty(e){return S(e)}matchesElement(e,t){return T(e,t)}containsElement(e,t){return w(e,t)}query(e,t,s){return C(e,t,s)}computeStyle(e,t,s){return s||""}animate(e,t,s,n,i,o=[],a){return new r.ZN(s,n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class A{}A.NOOP=new x;
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
const k="ng-enter",I="ng-leave",R="ng-trigger",P=".ng-trigger",N="ng-animating",D=".ng-animating";function O(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:F(parseFloat(t[1]),t[2])}function F(e,t){switch(t){case"s":return 1e3*e;default:return e}}function L(e,t,s){return e.hasOwnProperty("duration")?e:function(e,t,s){let n,i=0,r="";if("string"==typeof e){const s=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===s)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};n=F(parseFloat(s[1]),s[2]);const o=s[3];null!=o&&(i=F(parseFloat(o),s[4]));const a=s[5];a&&(r=a)}else n=e;if(!s){let s=!1,r=t.length;n<0&&(t.push("Duration values below 0 are not allowed for this animation step."),s=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),s=!0),s&&t.splice(r,0,`The provided timing value "${e}" is invalid.`)}return{duration:n,delay:i,easing:r}}(e,t,s)}function j(e,t={}){return Object.keys(e).forEach(s=>{t[s]=e[s]}),t}function M(e,t,s={}){if(t)for(let n in e)s[n]=e[n];else j(e,s);return s}function U(e,t,s){return s?t+":"+s+";":""}function B(e){let t="";for(let s=0;s<e.style.length;s++){const n=e.style.item(s);t+=U(0,n,e.style.getPropertyValue(n))}for(const s in e.style)e.style.hasOwnProperty(s)&&!s.startsWith("_")&&(t+=U(0,s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[s]));e.setAttribute("style",t)}function q(e,t,s){e.style&&(Object.keys(t).forEach(n=>{const i=J(n);s&&!s.hasOwnProperty(n)&&(s[n]=e.style[i]),e.style[i]=t[n]}),a()&&B(e))}function Q(e,t){e.style&&(Object.keys(t).forEach(t=>{const s=J(t);e.style[s]=""}),a()&&B(e))}function H(e){return Array.isArray(e)?1==e.length?e[0]:(0,r.vP)(e):e}const G=new RegExp("{{\\s*(.+?)\\s*}}","g");function $(e){let t=[];if("string"==typeof e){let s;for(;s=G.exec(e);)t.push(s[1]);G.lastIndex=0}return t}function z(e,t,s){const n=e.toString(),i=n.replace(G,(e,n)=>{let i=t[n];return t.hasOwnProperty(n)||(s.push(`Please provide a value for the animation param ${n}`),i=""),i.toString()});return i==n?e:i}function K(e){const t=[];let s=e.next();for(;!s.done;)t.push(s.value),s=e.next();return t}const W=/-+([a-z0-9])/g;function J(e){return e.replace(W,(...e)=>e[1].toUpperCase())}function V(e,t){return 0===e||0===t}function Y(e,t,s){const n=Object.keys(s);if(n.length&&t.length){let r=t[0],o=[];if(n.forEach(e=>{r.hasOwnProperty(e)||o.push(e),r[e]=s[e]}),o.length)for(var i=1;i<t.length;i++){let s=t[i];o.forEach(function(t){s[t]=X(e,t)})}}return t}function Z(e,t,s){switch(t.type){case 7:return e.visitTrigger(t,s);case 0:return e.visitState(t,s);case 1:return e.visitTransition(t,s);case 2:return e.visitSequence(t,s);case 3:return e.visitGroup(t,s);case 4:return e.visitAnimate(t,s);case 5:return e.visitKeyframes(t,s);case 6:return e.visitStyle(t,s);case 8:return e.visitReference(t,s);case 9:return e.visitAnimateChild(t,s);case 10:return e.visitAnimateRef(t,s);case 11:return e.visitQuery(t,s);case 12:return e.visitStagger(t,s);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function X(e,t){return window.getComputedStyle(e)[t]}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const ee="*";function te(e,t){const s=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,s){if(":"==e[0]){const n=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,s);if("function"==typeof n)return void t.push(n);e=n}const n=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return s.push(`The provided transition expression "${e}" is not supported`),t;const i=n[1],r=n[2],o=n[3];t.push(ie(i,o)),"<"!=r[0]||i==ee&&o==ee||t.push(ie(o,i))}(e,s,t)):s.push(e),s}const se=new Set(["true","1"]),ne=new Set(["false","0"]);function ie(e,t){const s=se.has(e)||ne.has(e),n=se.has(t)||ne.has(t);return(i,r)=>{let o=e==ee||e==i,a=t==ee||t==r;return!o&&s&&"boolean"==typeof i&&(o=i?se.has(e):ne.has(e)),!a&&n&&"boolean"==typeof r&&(a=r?se.has(t):ne.has(t)),o&&a}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const re=new RegExp("s*:selfs*,?","g");function oe(e,t,s){return new ae(e).build(t,s)}class ae{constructor(e){this._driver=e}build(e,t){const s=new le(t);return this._resetContextStyleTimingState(s),Z(this,H(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let s=t.queryCount=0,n=t.depCount=0;const i=[],r=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const s=e,n=s.name;n.toString().split(/\s*,\s*/).forEach(e=>{s.name=e,i.push(this.visitState(s,t))}),s.name=n}else if(1==e.type){const i=this.visitTransition(e,t);s+=i.queryCount,n+=i.depCount,r.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:r,queryCount:s,depCount:n,options:null}}visitState(e,t){const s=this.visitStyle(e.styles,t),n=e.options&&e.options.params||null;if(s.containsDynamicStyles){const i=new Set,r=n||{};if(s.styles.forEach(e=>{if(ue(e)){const t=e;Object.keys(t).forEach(e=>{$(t[e]).forEach(e=>{r.hasOwnProperty(e)||i.add(e)})})}}),i.size){const s=K(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${s.join(", ")}`)}}return{type:0,name:e.name,style:s,options:n?{params:n}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const s=Z(this,H(e.animation),t);return{type:1,matchers:te(e.expr,t.errors),animation:s,queryCount:t.queryCount,depCount:t.depCount,options:ce(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>Z(this,e,t)),options:ce(e.options)}}visitGroup(e,t){const s=t.currentTime;let n=0;const i=e.steps.map(e=>{t.currentTime=s;const i=Z(this,e,t);return n=Math.max(n,t.currentTime),i});return t.currentTime=n,{type:3,steps:i,options:ce(e.options)}}visitAnimate(e,t){const s=function(e,t){let s=null;if(e.hasOwnProperty("duration"))s=e;else if("number"==typeof e)return he(L(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=he(0,0,"");return e.dynamic=!0,e.strValue=n,e}return s=s||L(n,t),he(s.duration,s.delay,s.easing)}(e.timings,t.errors);let n;t.currentAnimateTimings=s;let i=e.styles?e.styles:(0,r.oB)({});if(5==i.type)n=this.visitKeyframes(i,t);else{let i=e.styles,o=!1;if(!i){o=!0;const e={};s.easing&&(e.easing=s.easing),i=(0,r.oB)(e)}t.currentTime+=s.duration+s.delay;const a=this.visitStyle(i,t);a.isEmptyStep=o,n=a}return t.currentAnimateTimings=null,{type:4,timings:s,style:n,options:null}}visitStyle(e,t){const s=this._makeStyleAst(e,t);return this._validateStyleAst(s,t),s}_makeStyleAst(e,t){const s=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==r.l3?s.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):s.push(e)}):s.push(e.styles);let n=!1,i=null;return s.forEach(e=>{if(ue(e)){const t=e,s=t.easing;if(s&&(i=s,delete t.easing),!n)for(let e in t)if(t[e].toString().indexOf("{{")>=0){n=!0;break}}}),{type:6,styles:s,easing:i,offset:e.offset,containsDynamicStyles:n,options:null}}_validateStyleAst(e,t){const s=t.currentAnimateTimings;let n=t.currentTime,i=t.currentTime;s&&i>0&&(i-=s.duration+s.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(s=>{if(!this._driver.validateStyleProperty(s))return void t.errors.push(`The provided animation property "${s}" is not a supported CSS property for animations`);const r=t.collectedStyles[t.currentQuerySelector],o=r[s];let a=!0;o&&(i!=n&&i>=o.startTime&&n<=o.endTime&&(t.errors.push(`The CSS property "${s}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${n}ms"`),a=!1),i=o.startTime),a&&(r[s]={startTime:i,endTime:n}),t.options&&function(e,t,s){const n=t.params||{},i=$(e);i.length&&i.forEach(e=>{n.hasOwnProperty(e)||s.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[s],t.options,t.errors)})})}visitKeyframes(e,t){const s={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),s;let n=0;const i=[];let r=!1,o=!1,a=0;const l=e.steps.map(e=>{const s=this._makeStyleAst(e,t);let l=null!=s.offset?s.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(ue(e)&&e.hasOwnProperty("offset")){const s=e;t=parseFloat(s.offset),delete s.offset}});else if(ue(e)&&e.hasOwnProperty("offset")){const s=e;t=parseFloat(s.offset),delete s.offset}return t}(s.styles),u=0;return null!=l&&(n++,u=s.offset=l),o=o||u<0||u>1,r=r||u<a,a=u,i.push(u),s});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),r&&t.errors.push("Please ensure that all keyframe offsets are in order");const u=e.steps.length;let c=0;n>0&&n<u?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==n&&(c=1/(u-1));const h=u-1,d=t.currentTime,p=t.currentAnimateTimings,m=p.duration;return l.forEach((e,n)=>{const r=c>0?n==h?1:c*n:i[n],o=r*m;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=r,s.styles.push(e)}),s}visitReference(e,t){return{type:8,animation:Z(this,H(e.animation),t),options:ce(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ce(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ce(e.options)}}visitQuery(e,t){const s=t.currentQuerySelector,n=e.options||{};t.queryCount++,t.currentQuery=e;const[i,r]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(re,"")),[e=e.replace(/@\*/g,P).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,D),t]}(e.selector);t.currentQuerySelector=s.length?s+" "+i:i,p(t.collectedStyles,t.currentQuerySelector,{});const o=Z(this,H(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=s,{type:11,selector:i,limit:n.limit||0,optional:!!n.optional,includeSelf:r,animation:o,originalSelector:e.selector,options:ce(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const s="full"===e.timings?{duration:0,delay:0,easing:"full"}:L(e.timings,t.errors,!0);return{type:12,animation:Z(this,H(e.animation),t),timings:s,options:null}}}class le{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ue(e){return!Array.isArray(e)&&"object"==typeof e}function ce(e){var t;return e?(e=j(e)).params&&(e.params=(t=e.params)?j(t):null):e={},e}function he(e,t,s){return{duration:e,delay:t,easing:s}}function de(e,t,s,n,i,r,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:s,postStyleProps:n,duration:i,delay:r,totalTime:i+r,easing:o,subTimeline:a}}class pe{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let s=this._map.get(e);s||this._map.set(e,s=[]),s.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const me=new RegExp(":enter","g"),ge=new RegExp(":leave","g");function fe(e,t,s,n,i,r={},o={},a,l,u=[]){return(new ye).buildKeyframes(e,t,s,n,i,r,o,a,l,u)}class ye{buildKeyframes(e,t,s,n,i,r,o,a,l,u=[]){l=l||new pe;const c=new _e(e,t,l,n,i,u,[]);c.options=a,c.currentTimeline.setStyles([r],null,c.errors,a),Z(this,s,c);const h=c.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,c.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[de(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const s=t.subInstructions.consume(t.element);if(s){const n=t.createSubContext(e.options),i=t.currentTimeline.currentTime,r=this._visitSubInstructions(s,n,n.options);i!=r&&t.transformIntoNewTimeline(r)}t.previousNode=e}visitAnimateRef(e,t){const s=t.createSubContext(e.options);s.transformIntoNewTimeline(),this.visitReference(e.animation,s),t.transformIntoNewTimeline(s.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,s){let n=t.currentTimeline.currentTime;const i=null!=s.duration?O(s.duration):null,r=null!=s.delay?O(s.delay):null;return 0!==i&&e.forEach(e=>{const s=t.appendInstructionToTimeline(e,i,r);n=Math.max(n,s.duration+s.delay)}),n}visitReference(e,t){t.updateOptions(e.options,!0),Z(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const s=t.subContextCount;let n=t;const i=e.options;if(i&&(i.params||i.delay)&&(n=t.createSubContext(i),n.transformIntoNewTimeline(),null!=i.delay)){6==n.previousNode.type&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=ve);const e=O(i.delay);n.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>Z(this,e,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>s&&n.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const s=[];let n=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?O(e.options.delay):0;e.steps.forEach(r=>{const o=t.createSubContext(e.options);i&&o.delayNextStep(i),Z(this,r,o),n=Math.max(n,o.currentTimeline.currentTime),s.push(o.currentTimeline)}),s.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(n),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const s=e.strValue;return L(t.params?z(s,t.params,t.errors):s,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const s=t.currentAnimateTimings=this._visitTiming(e.timings,t),n=t.currentTimeline;s.delay&&(t.incrementTime(s.delay),n.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(s.duration),this.visitStyle(i,t),n.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const s=t.currentTimeline,n=t.currentAnimateTimings;!n&&s.getCurrentStyleProperties().length&&s.forwardFrame();const i=n&&n.easing||e.easing;e.isEmptyStep?s.applyEmptyStep(i):s.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const s=t.currentAnimateTimings,n=t.currentTimeline.duration,i=s.duration,r=t.createSubContext().currentTimeline;r.easing=s.easing,e.styles.forEach(e=>{r.forwardTime((e.offset||0)*i),r.setStyles(e.styles,e.easing,t.errors,t.options),r.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(r),t.transformIntoNewTimeline(n+i),t.previousNode=e}visitQuery(e,t){const s=t.currentTimeline.currentTime,n=e.options||{},i=n.delay?O(n.delay):0;i&&(6===t.previousNode.type||0==s&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ve);let r=s;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!n.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((s,n)=>{t.currentQueryIndex=n;const o=t.createSubContext(e.options,s);i&&o.delayNextStep(i),s===t.element&&(a=o.currentTimeline),Z(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),r=Math.max(r,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(r),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const s=t.parentContext,n=t.currentTimeline,i=e.timings,r=Math.abs(i.duration),o=r*(t.currentQueryTotal-1);let a=r*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=s.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;Z(this,e.animation,t),t.previousNode=e,s.currentStaggerTime=n.currentTime-u+(n.startTime-s.currentTimeline.startTime)}}const ve={};class _e{constructor(e,t,s,n,i,r,o,a){this._driver=e,this.element=t,this.subInstructions=s,this._enterClassName=n,this._leaveClassName=i,this.errors=r,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ve,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new be(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const s=e;let n=this.options;null!=s.duration&&(n.duration=O(s.duration)),null!=s.delay&&(n.delay=O(s.delay));const i=s.params;if(i){let e=n.params;e||(e=this.options.params={}),Object.keys(i).forEach(s=>{t&&e.hasOwnProperty(s)||(e[s]=z(i[s],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const s=e.params={};Object.keys(t).forEach(e=>{s[e]=t[e]})}}return e}createSubContext(e=null,t,s){const n=t||this.element,i=new _e(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,s||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=ve,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,s){const n={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+e.delay,easing:""},i=new Se(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,n,e.stretchStartingKeyframe);return this.timelines.push(i),n}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,s,n,i,r){let o=[];if(n&&o.push(this.element),e.length>0){e=(e=e.replace(me,"."+this._enterClassName)).replace(ge,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=s);0!==s&&(t=s<0?t.slice(t.length+s,t.length):t.slice(0,s)),o.push(...t)}return i||0!=o.length||r.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class be{constructor(e,t,s,n){this._driver=e,this.element=t,this.startTime=s,this._elementTimelineStylesLookup=n,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new be(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||r.l3,this._currentKeyframe[e]=r.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,s,n){t&&(this._previousKeyframe.easing=t);const i=n&&n.params||{},o=function(e,t){const s={};let n;return e.forEach(e=>{"*"===e?(n=n||Object.keys(t),n.forEach(e=>{s[e]=r.l3})):M(e,!1,s)}),s}(e,this._globalTimelineStyles);Object.keys(o).forEach(e=>{const t=z(o[e],i,s);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:r.l3),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const s=this._styleSummary[t],n=e._styleSummary[t];(!s||n.time>s.time)&&this._updateStyle(t,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,s=1===this._keyframes.size&&0===this.duration;let n=[];this._keyframes.forEach((i,o)=>{const a=M(i,!0);Object.keys(a).forEach(s=>{const n=a[s];n==r.k1?e.add(s):n==r.l3&&t.add(s)}),s||(a.offset=o/this.duration),n.push(a)});const i=e.size?K(e.values()):[],o=t.size?K(t.values()):[];if(s){const e=n[0],t=j(e);e.offset=0,t.offset=1,n=[e,t]}return de(this.element,n,i,o,this.duration,this.startTime,this.easing,!1)}}class Se extends be{constructor(e,t,s,n,i,r,o=!1){super(e,t,r.delay),this.keyframes=s,this.preStyleProps=n,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:s,easing:n}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],r=s+t,o=t/r,a=M(e[0],!1);a.offset=0,i.push(a);const l=M(e[0],!1);l.offset=Te(o),i.push(l);const u=e.length-1;for(let n=1;n<=u;n++){let o=M(e[n],!1);o.offset=Te((t+o.offset*s)/r),i.push(o)}s=r,t=0,n="",e=i}return de(this.element,e,this.preStyleProps,this.postStyleProps,s,t,n,!0)}}function Te(e,t=3){const s=Math.pow(10,t-1);return Math.round(e*s)/s}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
class we{}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
class Ce extends we{normalizePropertyName(e,t){return J(e)}normalizeStyleValue(e,t,s,n){let i="";const r=s.toString().trim();if(Ee[t]&&0!==s&&"0"!==s)if("number"==typeof s)i="px";else{const t=s.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&n.push(`Please provide a CSS unit value for ${e}:${s}`)}return r+i}}const Ee=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function xe(e,t,s,n,i,r,o,a,l,u,c,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:s,fromStyles:r,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const Ae={};class ke{constructor(e,t,s){this._triggerName=e,this.ast=t,this._stateStyles=s}match(e,t,s,n){return function(e,t,s,n,i){return e.some(e=>e(t,s,n,i))}(this.ast.matchers,e,t,s,n)}buildStyles(e,t,s){const n=this._stateStyles["*"],i=this._stateStyles[e],r=n?n.buildStyles(t,s):{};return i?i.buildStyles(t,s):r}build(e,t,s,n,i,r,o,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||Ae,d=this.buildStyles(s,o&&o.params||Ae,c),m=a&&a.params||Ae,g=this.buildStyles(n,m,c),f=new Set,y=new Map,v=new Map,_="void"===n,b={params:Object.assign(Object.assign({},h),m)},S=u?[]:fe(e,t,this.ast.animation,i,r,d,g,b,l,c);let T=0;if(S.forEach(e=>{T=Math.max(e.duration+e.delay,T)}),c.length)return xe(t,this._triggerName,s,n,_,d,g,[],[],y,v,T,c);S.forEach(e=>{const s=e.element,n=p(y,s,{});e.preStyleProps.forEach(e=>n[e]=!0);const i=p(v,s,{});e.postStyleProps.forEach(e=>i[e]=!0),s!==t&&f.add(s)});const w=K(f.values());return xe(t,this._triggerName,s,n,_,d,g,S,w,y,v,T)}}class Ie{constructor(e,t,s){this.styles=e,this.defaultParams=t,this.normalizer=s}buildStyles(e,t){const s={},n=j(this.defaultParams);return Object.keys(e).forEach(t=>{const s=e[t];null!=s&&(n[t]=s)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let r=i[e];r.length>1&&(r=z(r,n,t));const o=this.normalizer.normalizePropertyName(e,t);r=this.normalizer.normalizeStyleValue(e,o,r,t),s[o]=r})}}),s}}class Re{constructor(e,t,s){this.name=e,this.ast=t,this._normalizer=s,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new Ie(e.style,e.options&&e.options.params||{},s)}),Pe(this.states,"true","1"),Pe(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new ke(e,t,this.states))}),this.fallbackTransition=new ke(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,s,n){return this.transitionFactories.find(i=>i.match(e,t,s,n))||null}matchStyles(e,t,s){return this.fallbackTransition.buildStyles(e,t,s)}}function Pe(e,t,s){e.hasOwnProperty(t)?e.hasOwnProperty(s)||(e[s]=e[t]):e.hasOwnProperty(s)&&(e[t]=e[s])}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const Ne=new pe;class De{constructor(e,t,s){this.bodyNode=e,this._driver=t,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(e,t){const s=[],n=oe(this._driver,t,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[e]=n}_buildPlayer(e,t,s){const n=e.element,i=u(0,this._normalizer,0,e.keyframes,t,s);return this._driver.animate(n,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,s={}){const n=[],i=this._animations[e];let o;const a=new Map;if(i?(o=fe(this._driver,t,i,k,I,{},{},s,Ne,n),o.forEach(e=>{const t=p(a,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(n.push("The requested animation doesn't exist or has already been destroyed"),o=[]),n.length)throw new Error(`Unable to create the animation due to the following errors: ${n.join("\n")}`);a.forEach((e,t)=>{Object.keys(e).forEach(s=>{e[s]=this._driver.computeStyle(t,s,r.l3)})});const u=l(o.map(e=>{const t=a.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=u,u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const s=this.players.indexOf(t);s>=0&&this.players.splice(s,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,s,n){const i=d(t,"","","");return c(this._getPlayer(e),s,i,n),()=>{}}command(e,t,s,n){if("register"==s)return void this.register(e,n[0]);if("create"==s)return void this.create(e,t,n[0]||{});const i=this._getPlayer(e);switch(s){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(e)}}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const Oe="ng-animate-queued",Fe="ng-animate-disabled",Le=".ng-animate-disabled",je=[],Me={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Be{constructor(e,t=""){this.namespaceId=t;const s=e&&e.hasOwnProperty("value");if(this.value=null!=(n=s?e.value:e)?n:null,s){const t=j(e);delete t.value,this.options=t}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(s=>{null==e[s]&&(e[s]=t[s])})}}}const qe="void",Qe=new Be(qe);class He{constructor(e,t,s){this.id=e,this.hostElement=t,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ve(t,this._hostClassName)}listen(e,t,s,n){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${t}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(i=s)&&"done"!=i)throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${t}" is not supported!`);var i;const r=p(this._elementListeners,e,[]),o={name:t,phase:s,callback:n};r.push(o);const a=p(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(Ve(e,R),Ve(e,"ng-trigger-"+t),a[t]=Qe),()=>{this._engine.afterFlush(()=>{const e=r.indexOf(o);e>=0&&r.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,s,n=!0){const i=this._getTrigger(t),r=new $e(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(Ve(e,R),Ve(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new Be(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=Qe),l.value!==qe&&a.value===l.value){if(!function(e,t){const s=Object.keys(e),n=Object.keys(t);if(s.length!=n.length)return!1;for(let i=0;i<s.length;i++){const n=s[i];if(!t.hasOwnProperty(n)||e[n]!==t[n])return!1}return!0}(a.params,l.params)){const t=[],s=i.matchStyles(a.value,a.params,t),n=i.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{Q(e,s),q(e,n)})}return}const u=p(this._engine.playersByElement,e,[]);u.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let c=i.matchTransition(a.value,l.value,e,l.params),h=!1;if(!c){if(!n)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:c,fromState:a,toState:l,player:r,isFallbackTransition:h}),h||(Ve(e,Oe),r.onStart(()=>{Ye(e,Oe)})),r.onDone(()=>{let t=this.players.indexOf(r);t>=0&&this.players.splice(t,1);const s=this._engine.playersByElement.get(e);if(s){let e=s.indexOf(r);e>=0&&s.splice(e,1)}}),this.players.push(r),u.push(r),r}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,s)=>{delete t[e]}),this._elementListeners.forEach((t,s)=>{this._elementListeners.set(s,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const s=this._engine.driver.query(e,P,!0);s.forEach(e=>{if(e.__ng_removed)return;const s=this._engine.fetchNamespacesByElement(e);s.size?s.forEach(s=>s.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,s,n){const i=this._engine.statesByElement.get(e);if(i){const r=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const s=this.trigger(e,t,qe,n);s&&r.push(s)}}),r.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),s&&l(r).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),s=this._engine.statesByElement.get(e);if(t&&s){const n=new Set;t.forEach(t=>{const i=t.name;if(n.has(i))return;n.add(i);const r=this._triggers[i].fallbackTransition,o=s[i]||Qe,a=new Be(qe),l=new $e(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:r,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const s=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let n=!1;if(s.totalAnimations){const t=s.players.length?s.playersByQueriedElement.get(e):[];if(t&&t.length)n=!0;else{let t=e;for(;t=t.parentNode;)if(s.statesByElement.get(t)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(e),n)s.markElementAsRemoved(this.id,e,!1,t);else{const n=e.__ng_removed;n&&n!==Me||(s.afterFlush(()=>this.clearElementCache(e)),s.destroyInnerAnimations(e),s._onRemovalComplete(e,t))}}insertNode(e,t){Ve(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(s=>{const n=s.player;if(n.destroyed)return;const i=s.element,r=this._elementListeners.get(i);r&&r.forEach(t=>{if(t.name==s.triggerName){const n=d(i,s.triggerName,s.fromState.value,s.toState.value);n._data=e,c(s.player,t.phase,n,t.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):t.push(s)}),this._queue=[],t.sort((e,t)=>{const s=e.transition.ast.depCount,n=t.transition.ast.depCount;return 0==s||0==n?s-n:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class Ge{constructor(e,t,s){this.bodyNode=e,this.driver=t,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const s=new He(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(s,t):(this.newHostElements.set(t,s),this.collectEnterElement(t)),this._namespaceLookup[e]=s}_balanceNamespaceList(e,t){const s=this._namespaceList.length-1;if(s>=0){let n=!1;for(let i=s;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),n=!0;break}n||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let s=this._namespaceLookup[e];return s||(s=this.createNamespace(e,t)),s}registerTrigger(e,t,s){let n=this._namespaceLookup[e];n&&n.register(t,s)&&this.totalAnimations++}destroy(e,t){if(!e)return;const s=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(s);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>s.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,s=this.statesByElement.get(e);if(s){const e=Object.keys(s);for(let n=0;n<e.length;n++){const i=s[e[n]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,s,n){if(ze(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,s,n),!0}return!1}insertNode(e,t,s,n){if(!ze(t))return;const i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const n=this._fetchNamespace(e);n&&n.insertNode(t,s)}n&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ve(e,Fe)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ye(e,Fe))}removeNode(e,t,s,n){if(ze(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n),s){const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,n)}}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,s,n){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:n,hasAnimation:s,removedBeforeQueried:!1}}listen(e,t,s,n,i){return ze(t)?this._fetchNamespace(e).listen(t,s,n,i):()=>{}}_buildInstruction(e,t,s,n,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,s,n,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,P,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,D,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return l(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=Me,t.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(t.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Le)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Le,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)Ve(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{t=this._flushAnimations(s,e)}finally{for(let e=0;e<s.length;e++)s[e]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?l(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const s=new pe,n=[],i=new Map,o=[],a=new Map,u=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(e=>{h.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let s=0;s<t.length;s++)h.add(t[s])});const d=this.bodyNode,m=Array.from(this.statesByElement.keys()),g=Je(m,this.collectedEnterElements),f=new Map;let y=0;g.forEach((e,t)=>{const s=k+y++;f.set(t,s),e.forEach(e=>Ve(e,s))});const v=[],_=new Set,b=new Set;for(let r=0;r<this.collectedLeaveElements.length;r++){const e=this.collectedLeaveElements[r],t=e.__ng_removed;t&&t.setForRemoval&&(v.push(e),_.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>_.add(e)):b.add(e))}const S=new Map,T=Je(m,Array.from(_));T.forEach((e,t)=>{const s=I+y++;S.set(t,s),e.forEach(e=>Ve(e,s))}),e.push(()=>{g.forEach((e,t)=>{const s=f.get(t);e.forEach(e=>Ye(e,s))}),T.forEach((e,t)=>{const s=S.get(t);e.forEach(e=>Ye(e,s))}),v.forEach(e=>{this.processLeaveNode(e)})});const w=[],C=[];for(let r=this._namespaceList.length-1;r>=0;r--)this._namespaceList[r].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(w.push(t),this.collectedEnterElements.length){const e=i.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const r=!d||!this.driver.containsElement(d,i),l=S.get(i),h=f.get(i),m=this._buildInstruction(e,s,h,l,r);if(m.errors&&m.errors.length)C.push(m);else{if(r)return t.onStart(()=>Q(i,m.fromStyles)),t.onDestroy(()=>q(i,m.toStyles)),void n.push(t);if(e.isFallbackTransition)return t.onStart(()=>Q(i,m.fromStyles)),t.onDestroy(()=>q(i,m.toStyles)),void n.push(t);m.timelines.forEach(e=>e.stretchStartingKeyframe=!0),s.append(i,m.timelines),o.push({instruction:m,player:t,element:i}),m.queriedElements.forEach(e=>p(a,e,[]).push(t)),m.preStyleProps.forEach((e,t)=>{const s=Object.keys(e);if(s.length){let e=u.get(t);e||u.set(t,e=new Set),s.forEach(t=>e.add(t))}}),m.postStyleProps.forEach((e,t)=>{const s=Object.keys(e);let n=c.get(t);n||c.set(t,n=new Set),s.forEach(e=>n.add(e))})}});if(C.length){const e=[];C.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),w.forEach(e=>e.destroy()),this.reportError(e)}const E=new Map,x=new Map;o.forEach(e=>{const t=e.element;s.has(t)&&(x.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,E))}),n.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{p(E,t,[]).push(e),e.destroy()})});const A=v.filter(e=>et(e,u,c)),R=new Map;We(R,this.driver,b,c,r.l3).forEach(e=>{et(e,u,c)&&A.push(e)});const P=new Map;g.forEach((e,t)=>{We(P,this.driver,new Set(e),u,r.k1)}),A.forEach(e=>{const t=R.get(e),s=P.get(e);R.set(e,Object.assign(Object.assign({},t),s))});const N=[],O=[],F={};o.forEach(e=>{const{element:t,player:r,instruction:o}=e;if(s.has(t)){if(h.has(t))return r.onDestroy(()=>q(t,o.toStyles)),r.disabled=!0,r.overrideTotalTime(o.totalTime),void n.push(r);let e=F;if(x.size>1){let s=t;const n=[];for(;s=s.parentNode;){const t=x.get(s);if(t){e=t;break}n.push(s)}n.forEach(t=>x.set(t,e))}const s=this._buildAnimation(r.namespaceId,o,E,i,P,R);if(r.setRealPlayer(s),e===F)N.push(r);else{const t=this.playersByElement.get(e);t&&t.length&&(r.parentPlayer=l(t)),n.push(r)}}else Q(t,o.fromStyles),r.onDestroy(()=>q(t,o.toStyles)),O.push(r),h.has(t)&&n.push(r)}),O.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const s=l(t);e.setRealPlayer(s)}}),n.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let r=0;r<v.length;r++){const e=v[r],t=e.__ng_removed;if(Ye(e,I),t&&t.hasAnimation)continue;let s=[];if(a.size){let t=a.get(e);t&&t.length&&s.push(...t);let n=this.driver.query(e,D,!0);for(let e=0;e<n.length;e++){let t=a.get(n[e]);t&&t.length&&s.push(...t)}}const n=s.filter(e=>!e.destroyed);n.length?Ze(this,e,n):this.processLeaveNode(e)}return v.length=0,N.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),N}elementContainsData(e,t){let s=!1;const n=t.__ng_removed;return n&&n.setForRemoval&&(s=!0),this.playersByElement.has(t)&&(s=!0),this.playersByQueriedElement.has(t)&&(s=!0),this.statesByElement.has(t)&&(s=!0),this._fetchNamespace(e).elementContainsData(t)||s}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,s,n,i){let r=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(r=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==qe;t.forEach(t=>{t.queued||(e||t.triggerName==n)&&r.push(t)})}}return(s||n)&&(r=r.filter(e=>!(s&&s!=e.namespaceId||n&&n!=e.triggerName))),r}_beforeAnimationBuild(e,t,s){const n=t.element,i=t.isRemovalTransition?void 0:e,r=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==n,l=p(s,e,[]);this._getPreviousPlayers(e,a,i,r,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}Q(n,t.fromStyles)}_buildAnimation(e,t,s,n,i,o){const a=t.triggerName,c=t.element,h=[],d=new Set,m=new Set,g=t.timelines.map(t=>{const l=t.element;d.add(l);const p=l.__ng_removed;if(p&&p.removedBeforeQueried)return new r.ZN(t.duration,t.delay);const g=l!==c,f=function(e){const t=[];return Xe(e,t),t}((s.get(l)||je).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===l),y=i.get(l),v=o.get(l),_=u(0,this._normalizer,0,t.keyframes,y,v),b=this._buildPlayer(t,_,f);if(t.subTimeline&&n&&m.add(l),g){const t=new $e(e,a,l);t.setRealPlayer(b),h.push(t)}return b});h.forEach(e=>{p(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,s){let n;if(e instanceof Map){if(n=e.get(t),n){if(n.length){const e=n.indexOf(s);n.splice(e,1)}0==n.length&&e.delete(t)}}else if(n=e[t],n){if(n.length){const e=n.indexOf(s);n.splice(e,1)}0==n.length&&delete e[t]}return n}(this.playersByQueriedElement,e.element,e))}),d.forEach(e=>Ve(e,N));const f=l(g);return f.onDestroy(()=>{d.forEach(e=>Ye(e,N)),q(c,t.toStyles)}),m.forEach(e=>{p(n,e,[]).push(f)}),f}_buildPlayer(e,t,s){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,s):new r.ZN(e.duration,e.delay)}}class $e{constructor(e,t,s){this.namespaceId=e,this.triggerName=t,this.element=s,this._player=new r.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(s=>c(e,t,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){p(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function ze(e){return e&&1===e.nodeType}function Ke(e,t){const s=e.style.display;return e.style.display=null!=t?t:"none",s}function We(e,t,s,n,i){const r=[];s.forEach(e=>r.push(Ke(e)));const o=[];n.forEach((s,n)=>{const r={};s.forEach(e=>{const s=r[e]=t.computeStyle(n,e,i);s&&0!=s.length||(n.__ng_removed=Ue,o.push(n))}),e.set(n,r)});let a=0;return s.forEach(e=>Ke(e,r[a++])),o}function Je(e,t){const s=new Map;if(e.forEach(e=>s.set(e,[])),0==t.length)return s;const n=new Set(t),i=new Map;function r(e){if(!e)return 1;let t=i.get(e);if(t)return t;const o=e.parentNode;return t=s.has(o)?o:n.has(o)?1:r(o),i.set(e,t),t}return t.forEach(e=>{const t=r(e);1!==t&&s.get(t).push(e)}),s}function Ve(e,t){if(e.classList)e.classList.add(t);else{let s=e.$$classes;s||(s=e.$$classes={}),s[t]=!0}}function Ye(e,t){if(e.classList)e.classList.remove(t);else{let s=e.$$classes;s&&delete s[t]}}function Ze(e,t,s){l(s).onDone(()=>e.processLeaveNode(t))}function Xe(e,t){for(let s=0;s<e.length;s++){const n=e[s];n instanceof r.ZE?Xe(n.players,t):t.push(n)}}function et(e,t,s){const n=s.get(e);if(!n)return!1;let i=t.get(e);return i?n.forEach(e=>i.add(e)):t.set(e,n),s.delete(e),!0}class tt{constructor(e,t,s){this.bodyNode=e,this._driver=t,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new Ge(e,t,s),this._timelineEngine=new De(e,t,s),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,s,n,i){const r=e+"-"+n;let o=this._triggerCache[r];if(!o){const e=[],t=oe(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${n}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t,s){return new Re(e,t,s)}(n,t,this._normalizer),this._triggerCache[r]=o}this._transitionEngine.registerTrigger(t,n,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,s,n){this._transitionEngine.insertNode(e,t,s,n)}onRemove(e,t,s,n){this._transitionEngine.removeNode(e,t,n||!1,s)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,s,n){if("@"==s.charAt(0)){const[e,i]=m(s);this._timelineEngine.command(e,t,i,n)}else this._transitionEngine.trigger(e,t,s,n)}listen(e,t,s,n,i){if("@"==s.charAt(0)){const[e,n]=m(s);return this._timelineEngine.listen(e,t,n,i)}return this._transitionEngine.listen(e,t,s,n,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function st(e,t){let s=null,n=null;return Array.isArray(t)&&t.length?(s=it(t[0]),t.length>1&&(n=it(t[t.length-1]))):t&&(s=it(t)),s||n?new nt(e,s,n):null}class nt{constructor(e,t,s){this._element=e,this._startStyles=t,this._endStyles=s,this._state=0;let n=nt.initialStylesByElement.get(e);n||nt.initialStylesByElement.set(e,n={}),this._initialStyles=n}start(){this._state<1&&(this._startStyles&&q(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(q(this._element,this._initialStyles),this._endStyles&&(q(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(nt.initialStylesByElement.delete(this._element),this._startStyles&&(Q(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Q(this._element,this._endStyles),this._endStyles=null),q(this._element,this._initialStyles),this._state=3)}}function it(e){let t=null;const s=Object.keys(e);for(let n=0;n<s.length;n++){const i=s[n];rt(i)&&(t=t||{},t[i]=e[i])}return t}function rt(e){return"display"===e||"position"===e}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */nt.initialStylesByElement=new WeakMap;const ot="animation",at="animationend";class lt{constructor(e,t,s,n,i,r,o){this._element=e,this._name=t,this._duration=s,this._delay=n,this._easing=i,this._fillMode=r,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const s=mt(e,"").trim();s.length&&(function(e,t){let s=0;for(let n=0;n<e.length;n++)","===e.charAt(n)&&s++}(s),t=`${s}, ${t}`),pt(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),dt(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ut(this._element,this._name,"paused")}resume(){ut(this._element,this._name,"running")}setPosition(e){const t=ct(this._element,this._name);this._position=e*this._duration,pt(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),s=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&s>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),dt(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const s=mt(e,"").split(","),n=ht(s,t);n>=0&&(s.splice(n,1),pt(e,"",s.join(",")))}(this._element,this._name))}}function ut(e,t,s){pt(e,"PlayState",s,ct(e,t))}function ct(e,t){const s=mt(e,"");return s.indexOf(",")>0?ht(s.split(","),t):ht([s],t)}function ht(e,t){for(let s=0;s<e.length;s++)if(e[s].indexOf(t)>=0)return s;return-1}function dt(e,t,s){s?e.removeEventListener(at,t):e.addEventListener(at,t)}function pt(e,t,s,n){const i=ot+t;if(null!=n){const t=e.style[i];if(t.length){const e=t.split(",");e[n]=s,s=e.join(",")}}e.style[i]=s}function mt(e,t){return e.style[ot+t]||""}class gt{constructor(e,t,s,n,i,r,o,a){this.element=e,this.keyframes=t,this.animationName=s,this._duration=n,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=r||"linear",this.totalTime=n+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new lt(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(s=>{"offset"!=s&&(e[s]=t?this._finalStyles[s]:X(this.element,s))})}this.currentSnapshot=e}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */class ft extends r.ZN{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=E(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class yt{constructor(){this._count=0}validateStyleProperty(e){return S(e)}matchesElement(e,t){return T(e,t)}containsElement(e,t){return w(e,t)}query(e,t,s){return C(e,t,s)}computeStyle(e,t,s){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,s){s=s.map(e=>E(e));let n=`@keyframes ${t} {\n`,i="";s.forEach(e=>{i=" ";const t=parseFloat(e.offset);n+=`${i}${100*t}% {\n`,i+=" ",Object.keys(e).forEach(t=>{const s=e[t];switch(t){case"offset":return;case"easing":return void(s&&(n+=`${i}animation-timing-function: ${s};\n`));default:return void(n+=`${i}${t}: ${s};\n`)}}),n+=`${i}}\n`}),n+="}\n";const r=document.createElement("style");return r.textContent=n,r}animate(e,t,s,n,i,r=[],o){const a=r.filter(e=>e instanceof gt),l={};V(s,n)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(s=>{"offset"!=s&&"easing"!=s&&(t[s]=e[s])})}),t}(t=Y(e,t,l));if(0==s)return new ft(e,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,c,t);(function(e){var t;const s=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&s instanceof ShadowRoot?s:document.head})(e).appendChild(h);const d=st(e,t),p=new gt(e,t,c,s,n,i,u,d);return p.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),p}}class vt{constructor(e,t,s,n){this.element=e,this.keyframes=t,this.options=s,this._specialStyles=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,s){return e.animate(t,s)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:X(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class _t{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(bt().toString()),this._cssKeyframesDriver=new yt}validateStyleProperty(e){return S(e)}matchesElement(e,t){return T(e,t)}containsElement(e,t){return w(e,t)}query(e,t,s){return C(e,t,s)}computeStyle(e,t,s){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,s,n,i,r=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,s,n,i,r);const a={duration:s,delay:n,fill:0==n?"both":"forwards"};i&&(a.easing=i);const l={},u=r.filter(e=>e instanceof vt);V(s,n)&&u.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=st(e,t=Y(e,t=t.map(e=>M(e,!1)),l));return new vt(e,t,a,c)}}function bt(){return o()&&Element.prototype.animate||{}}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */var St=s(4562);
/**
 * @license Angular v12.1.4
 * (c) 2010-2021 Google LLC. https://angular.io/
 * License: MIT
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
let Tt=(()=>{class e extends r._j{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:i.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(e)?(0,r.vP)(e):e;return Et(this._renderer,null,t,"register",[s]),new wt(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(St.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class wt extends r.LC{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Ct(this._id,e,t||{},this._renderer)}}class Ct{constructor(e,t,s,n){this.id=e,this.element=t,this._renderer=n,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Et(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Et(e,t,s,n,i){return e.setProperty(t,`@@${s}:${n}`,i)}const xt="@",At="@.disabled";let kt=(()=>{class e{constructor(e,t,s){this.delegate=e,this.engine=t,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const s=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(s);return e||(e=new It("",s,this.engine),this._rendererCache.set(s,e)),e}const n=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const r=t=>{Array.isArray(t)?t.forEach(r):this.engine.registerTrigger(n,i,e,t.name,t)};return t.data.animation.forEach(r),new Rt(this,i,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,s){e>=0&&e<this._microtaskId?this._zone.run(()=>t(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,s]=e;t(s)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.FYo),i.LFG(tt),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class It{constructor(e,t,s){this.namespaceId=e,this.delegate=t,this.engine=s,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,s,n=!0){this.delegate.insertBefore(e,t,s),this.engine.onInsert(this.namespaceId,t,e,n)}removeChild(e,t,s){this.engine.onRemove(this.namespaceId,t,this.delegate,s)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,s,n){this.delegate.setAttribute(e,t,s,n)}removeAttribute(e,t,s){this.delegate.removeAttribute(e,t,s)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,s,n){this.delegate.setStyle(e,t,s,n)}removeStyle(e,t,s){this.delegate.removeStyle(e,t,s)}setProperty(e,t,s){t.charAt(0)==xt&&t==At?this.disableAnimations(e,!!s):this.delegate.setProperty(e,t,s)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,s){return this.delegate.listen(e,t,s)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Rt extends It{constructor(e,t,s,n){super(t,s,n),this.factory=e,this.namespaceId=t}setProperty(e,t,s){t.charAt(0)==xt?"."==t.charAt(1)&&t==At?this.disableAnimations(e,s=void 0===s||!!s):this.engine.process(this.namespaceId,e,t.substr(1),s):this.delegate.setProperty(e,t,s)}listen(e,t,s){if(t.charAt(0)==xt){const n=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),r="";return i.charAt(0)!=xt&&([i,r]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */(i)),this.engine.listen(this.namespaceId,n,i,r,e=>{this.factory.scheduleListenerCallback(e._data||-1,s,e)})}return this.delegate.listen(e,t,s)}}let Pt=(()=>{class e extends tt{constructor(e,t,s){super(e.body,t,s)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(St.K0),i.LFG(A),i.LFG(we))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Nt=new i.OlP("AnimationModuleType"),Dt=[{provide:r._j,useClass:Tt},{provide:we,useFactory:function(){return new Ce}},{provide:tt,useClass:Pt},{provide:i.FYo,useFactory:function(e,t,s){return new kt(e,t,s)},deps:[n.se,tt,i.R0b]}],Ot=[{provide:A,useFactory:function(){return"function"==typeof bt()?new _t:new yt}},{provide:Nt,useValue:"BrowserAnimations"},...Dt],Ft=[{provide:A,useClass:x},{provide:Nt,useValue:"NoopAnimations"},...Dt];
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
let Lt=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?Ft:Ot}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:Ot,imports:[n.b2]}),e})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var jt=s(59877),Mt=s(18687),Ut=s(25050),Bt=s(9661),qt=s(28739),Qt=s(67778),Ht=s(78515),Gt=s(49750),$t=s(51222),zt=s(24531),Kt=s(73999),Wt=(()=>(function(e){e.DELETE="delete",e.EDIT_COMMENT="editComment",e.INLINE_EDIT="inlineEdit",e.ROW_UPDATE="rowUpdate",e.UPDATE="update"}(Wt||(Wt={})),Wt))();function Jt(){if(window.parent.JIRA)return window.parent.JIRA;if(window.JIRA)return window.JIRA;var e={Dialogs:{},Meta:{}};return e.Meta.getLoggedInUser=function(){return{name:""}},e.Issues={},e.Issues.Application={},e.Issues.Application.on=function(e,t){},e.Issues.Application.start=function(){},e.Issues.Application.request=function(e){return{setContainer:function(e){},loadIssue:function(e){}}},e.Issues.FocusShifter={},e.Issues.FocusShifter.init=function(){},e.Issues.overrideIssueDialogs=function(e){},e.JQLAutoComplete=function(e){return{disable:function(){}}},e.JQLAutoComplete.MyParser=function(e){},e.bind=function(e,t){},e.unbind=function(){},e.Events={NEW_CONTENT_ADDED:"NEW_CONTENT_ADDED"},e.Version={isGreaterThanOrEqualTo:function(e){return!0}},e.Forms={Container:function(){return{asDialog:function(){return{show:function(){}}}}},CreateIssueModel:function(){},UnconfigurableCreateIssueForm:function(){},ConfigurableCreateIssueForm:function(){},Model:{createQuickEditIssueModel:function(){}}},e.Dialogs.getDefaultAjaxOptions=function(){},e.FormDialog=function(){},e.FormDialog.prototype._getDefaultOptions=function(){},e.FormDialog.prototype._handleSubmitResponse=function(){},e.LabelsDialog=function(){},e.Template={Util:{Issue:{Status:{statusLozenge:function(){},issueStatusResolver:function(){}}}}},e}let Vt=(()=>{class e extends Kt.f{constructor(){super(...arguments),this.shifterContext=!0,this.JIRA=null}init(e){this.JIRA=this.getJira(),this.config=e,function(){let e,t,s,n=window.parent.JIRA;n||(n=Jt()),n.Dialogs.getDefaultAjaxOptions=function(){let e=this.options.url||this.getRequestUrlFromTrigger();if(this.issueId=n.Issues.Api.getSelectedIssueId(),this.issueKey=n.Issues.Api.getSelectedIssueKey(),/id=\{0\}/.test(e)){if(!this.issueId)return!1;e=e.replace(/(id=\{0\})/,`id=${this.issueId}`)}return{data:{decorator:"dialog",inline:"true"},url:e}},n.Issues.overrideIssueDialogs=function(i){e=i.getIssueId,t=!!i.isNavigator,s=i.updateIssue,t&&(n.LabelsDialog.prototype._handleSubmitResponse=n.FormDialog.prototype._handleSubmitResponse),n.unbind("QuickEdit.sessionComplete"),n.bind("QuickEdit.sessionComplete",function(){s(n.Dialog.current)}),n.unbind("QuickCreateSubtask.sessionComplete"),n.bind("QuickCreateSubtask.sessionComplete",function(){s(n.Dialog.current)}),n.bind("Dialog.show",(t,s,i)=>{i&&(i.issueId=e(n.Dialog.current))}),n.bind(n.Events.NEW_CONTENT_ADDED,function(e,t){t.find(".issueaction-workflow-transition").each(function(){const e=jQuery(this);let t=e.attr("href");t=t.replace(/atl_token=[^&]*/,"atl_token="+atl_token()),e.attr("href",t)})}),n.bind(n.Events.NEW_CONTENT_ADDED,function(e,t){const s=jQuery("#ops-login-lnk");if(0===s.length)return;const n=window.location,i=parseUri(s.attr("href"));i.queryKey.os_destination=n.pathname.slice(contextPath.length)+n.search,s.attr("href",i.path+"?"+jQuery.param(i.queryKey))})};const i=n.FormDialog.prototype._getDefaultOptions;n.FormDialog.prototype._getDefaultOptions=function(){const e=i.call(this),t=e.onDialogFinished;return e.onDialogFinished=function(){this.isIssueDialog()?o.apply(this,arguments):t.apply(this,arguments)},e};const r=n.FormDialog.prototype._performRedirect;function o(){if("clone-issue-dialog"===this.options.id)r.apply(this,arguments);else if("delete-issue-dialog"===this.options.id)if(t)this.hide(),s(this);else{const e=this._getTargetUrlValue();e&&""!==e?window.location.href=e:jQuery(".page-navigation #next-issue").length>0?window.location.href=jQuery(".page-navigation #next-issue").attr("href"):jQuery(".page-navigation #return-to-search").length>0?window.location.href=jQuery(".page-navigation #return-to-search").attr("href"):window.location.href=jQuery("#find_link").attr("href")}else{const e=this;this.showFooterLoadingIndicator(),s(this),n.trace("jira.issue.update"),e.hideFooterLoadingIndicator(),e.hide()}}n.FormDialog.prototype._performRedirect=function(){this.isIssueDialog()?o.apply(this,arguments):r.apply(this,arguments)}}(),this.initJiraApi()}runEditOutsideOfShifterContext(){this.shifterContext=!1}initJiraApi(){void 0===this.JIRA.Issues.Api&&(this.JIRA.Issues.Api={}),this.JIRA.Issues.Api.getSelectedIssueKey=()=>{const e=this.config.selectedIssueProvider();if(e)return e.key},this.JIRA.Issues.Api.getSelectedIssueId=()=>{const e=this.config.selectedIssueProvider();if(e)return e.externalId},this.JIRA.Issues.Api.getSelectedIssue=()=>new this.JIRA.Issues.SimpleIssue({id:this.JIRA.Issues.Api.getSelectedIssueId(),key:this.JIRA.Issues.Api.getSelectedIssueKey()}),this.jira6Bridge(),this.jira7Bridge(),this.JIRA.Issues.overrideIssueDialogs({getIssueId:()=>this.JIRA.Issues.Api.getSelectedIssueId(),isNavigator:!0,updateIssue:this.updateIssueCallback.bind(this)})}updateIssueCallback(e){const t=this.JIRA.Issues.Utils.getUpdateCommandForDialog(e);return t&&this.shifterContext?(t.message&&this.JIRA.Issues.showNotification(t.message,t.key),this.reactToUpdate(t.id,t.action).toPromise()):(this.shifterContext=!0,Promise.resolve(null))}reactToUpdate(e,t){let s;switch(t){case Wt.DELETE:s=this.config.onDelete;break;default:s=this.config.onUpdate}return s(e)}jira6Bridge(){void 0===this.JIRA.Issue&&(this.JIRA.Issue={}),this.JIRA.Issue.getIssueKey=this.JIRA.Issues.Api.getSelectedIssueKey,this.JIRA.Issue.getIssueId=this.JIRA.Issues.Api.getSelectedIssueId}jira7Bridge(){this.JIRA.Issues.IssueAPI&&this.JIRA.Issues.IssueAPI.override&&this.JIRA.Issues.IssueAPI.override()}getJira(){let e=window.parent.JIRA;return e||(e=Jt()),e}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var Yt=s(15894),Zt=s(70125);let Xt=(()=>{class e{constructor(e){this.jiraOperationsDialogIntegrationService=e}init(e){this.jiraOperationsDialogIntegrationService&&this.jiraOperationsDialogIntegrationService.init(new Zt.y(e.selectedIssueProvider,t=>(0,Yt.D)(e.onDelete(t)),t=>(0,Yt.D)(e.onUpdate(t))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Kt.f,8))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),es=(()=>{class e{constructor(e){this.operationsDialogConnector=e,SP.JiraOperationsDialogGlobalConnector=this.operationsDialogConnector}static forRoot(){return{ngModule:e,providers:[Xt]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Xt))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})(),ts=(()=>{class e{constructor(e){window.JIRA_SERVER_OPERATIONS_DIALOG={runOutsideOfShifter:()=>e.runEditOutsideOfShifterContext()}}static forRoot(){return{ngModule:e,providers:[...es.forRoot().providers,{provide:Kt.f,useClass:Vt}]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Kt.f))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[es]]}),e})();var ss=s(83429),ns=s(7581);class is extends class{}{constructor(){super()}}var rs=s(88651),os=s(56101),as=s(78454),ls=s(75689),us=s(99544),cs=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},hs=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class ds extends as.E{constructor(e,t,s){super(t,s),this.router=e}goToGantt(e){return this.goToModule(rs.r.GANTT,e)}goToRoadmap(e){return this.goToModule(rs.r.ROADMAP,e)}goToResources(e){return this.goToModule(rs.r.RESOURCES,e)}goToRisk(e){return this.goToModule(rs.r.RISKS,e)}goToReports(e){return this.goToModule(rs.r.REPORTS,e)}goToBoard(e){return this.goToModule(rs.r.BOARD,e)}goToBoardCapacityPlanning(e){return this.goToModule(rs.r.BOARD,e,"/capacity-planning")}goToTeams(e){return this.goToModule(rs.r.TEAMS,e)}goToScope(e){return this.goToModule(rs.r.SCOPE,e)}goToBoxConfiguration(e){return this.goToModule(rs.r.CONFIGURATION,e)}goToScopeDefinition(e){return this.goToModule(rs.r.CONFIGURATION,e,"/tasks/scope-definition")}goToOverview(e,t){return this.goToModule(rs.r.OVERVIEW,e,t)}openOverviewInNewTab(e){const t=this.goToOverview(e).href;window.open(t,"_blank").focus()}goToAdministration(){return this.goToAdministrationModule()}goToUserProfile(){return{eventPreventDefault:!0,href:`${this.environmentService.getServletUrl()}/#/userprofile`,navigation:()=>{this.router.navigate(["/userprofile"],{queryParamsHandling:"preserve"})}}}goToUserProfileAbsences(){return{eventPreventDefault:!0,href:`${this.environmentService.getServletUrl()}/#/userprofile/absences`,navigation:()=>{this.router.navigate(["/userprofile/absences"],{queryParamsHandling:"preserve"})}}}goToTechnicalConfiguration(){return{eventPreventDefault:!0,href:`${this.environmentService.getServletUrl()}/#/global-configuration`,navigation:()=>{this.router.navigate(["/global-configuration"],{queryParamsHandling:"preserve"})}}}goToAdministrationResourceManager(){return this.goToAdministrationModule("resourcemanager")}goToAdministrationWorkloadPlans(){return this.goToAdministrationModule("workloadplan")}goToAdministrationHolidayPlans(){return this.goToAdministrationModule("holidayplan")}goToAdministrationSkills(){return this.goToAdministrationModule("skills")}goToTaskTemplates(e){return this.goToModule(rs.r.CONFIGURATION,e,"/tasks/task-templates")}goToScopeColumnViewConfiguration(e){return this.goToModule(rs.r.CONFIGURATION,e,"/scope/column-views")}goToGanttColumnViewConfiguration(e){return this.goToModule(rs.r.CONFIGURATION,e,"/gantt/column-views")}goToWbsWidgetConfiguration(e){return super.goToWbsWidgetConfiguration(e)}goToCalendar(e){return this.goToModule(rs.r.CALENDAR,e)}goToRiskCardLayoutConfiguration(e){return this.goToModule(rs.r.CONFIGURATION,e,"/risk/card-views")}goToAdministrationModule(e=""){return{eventPreventDefault:!0,href:`${this.environmentService.getServletUrl()}/#/administration`+(e?`/${e}`:""),navigation:()=>{this.router.navigate(["/administration"+(e?`/${e}`:"")],{queryParamsHandling:"preserve"})}}}goToModule(e,t,s=""){return{eventPreventDefault:!0,href:this.getBoxModuleRouterUrl(`${e}${s}`,t),navigation:()=>{this.router.navigate([this.prepareUrl(e,t,s)],{queryParamsHandling:"preserve"})}}}prepareUrl(e,t,s=""){return`box/${t}/${e}${s}`}}ds.\u0275fac=function(e){return new(e||ds)(i.LFG(jt.F0),i.LFG(ls.L),i.LFG(us.p))},ds.\u0275prov=i.Yz7({token:ds,factory:ds.\u0275fac}),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToGantt",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToRoadmap",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToResources",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToRisk",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToReports",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToBoard",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToBoardCapacityPlanning",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToTeams",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToScope",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToBoxConfiguration",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToScopeDefinition",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String,String]),hs("design:returntype",is)],ds.prototype,"goToOverview",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",void 0)],ds.prototype,"openOverviewInNewTab",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToAdministration",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToUserProfile",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToUserProfileAbsences",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToTechnicalConfiguration",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToAdministrationResourceManager",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToAdministrationWorkloadPlans",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToAdministrationHolidayPlans",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[]),hs("design:returntype",is)],ds.prototype,"goToAdministrationSkills",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToTaskTemplates",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToScopeColumnViewConfiguration",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToGanttColumnViewConfiguration",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToWbsWidgetConfiguration",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToCalendar",null),cs([os.C,hs("design:type",Function),hs("design:paramtypes",[String]),hs("design:returntype",is)],ds.prototype,"goToRiskCardLayoutConfiguration",null);var ps=s(84468),ms=s(61511),gs=s(42422),fs=s(43497),ys=s(28981),vs=s(96505),_s=s(57748),bs=s(18842);class Ss{}let Ts=(()=>{class e extends Ss{constructor(){super(),this.JQLAutocompleteMap=new Map}init(e,t,s){jQuery.fn.selection=function(e){var t,s,n=this[0];return!!n&&(null==e?!!n.setSelectionRange&&n.value.substring(n.selectionStart,n.selectionEnd):(t=n.scrollTop,n.setSelectionRange&&(n.value=n.value.substring(0,s=n.selectionStart)+e+n.value.substring(n.selectionEnd),n.selectionStart=s,n.selectionEnd=s+e.length),n.focus(),void(n.scrollTop=t)))},jQuery.fn.selectionRange=function(e,t){if(null==e){var s={start:this[0].selectionStart,end:this[0].selectionEnd},n=this.val();return s.text=n.substring(s.start,s.end),s.textBefore=n.substring(0,s.start),s.textAfter=n.substring(s.end),s}this[0].selectionStart=e,this[0].selectionEnd=t},jQuery.fn.wrapSelection=function(e,t){this.selection(e+this.selection()+(t||""))};const n=jQuery("#"+e),i=Jt(),r=i.JQLAutoComplete({field:n,parser:i.JQLAutoComplete.MyParser(s.jqlReservedWords),queryDelay:.65,jqlFieldNames:s.visibleFieldNames,jqlFunctionNames:s.visibleFunctionNames,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:!1,errorID:t});return r.replaceValue=(e,t,s)=>{const n=jQuery(r.field);n.selectionRange(e,t),n.selection(s);const i=n.selectionRange().end;n.selectionRange(i,i)},r.updateParseIndicator=e=>{r.parseError=""!==e.tokenString&&e.getParseError()},(0,bs.R)(document.body,"click").subscribe(()=>{const e=r.dropdownController;e&&e.displayed&&e.hideDropdown()}),(0,bs.R)(n,"keyup").subscribe(e=>{if("Enter"===e.key){const e=document.querySelector("li[id*='jql_'][id*='suggest'].active");null!==e&&e.click()}}),this.JQLAutocompleteMap.set(e,r),this}enable(e){const t=this.JQLAutocompleteMap.get(e);t.buildResponseContainer(),t.enable()}disable(e){const t=this.JQLAutocompleteMap.get(e);t.responseContainer&&t.responseContainer.context.parentNode.removeChild(t.responseContainer.context),t.disable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var ws=s(58444),Cs=s(22869),Es=s(10977);class xs{constructor(e,t,s){this.jqlReservedWords=e,this.visibleFieldNames=t,this.visibleFunctionNames=s}}var As=s(88985),ks=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},Is=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Rs extends As.M{static toDomain(e){return new xs(e.jqlReservedWords,e.visibleFieldNames,e.visibleFunctionNames)}getClassName(){return"JQLAutocompleteDataDTO"}}ks([(0,Cs.Yl)(),(0,Es.XV)({each:!0}),Is("design:type",Array)],Rs.prototype,"jqlReservedWords",void 0),ks([(0,Cs.Yl)(),Is("design:type",Array)],Rs.prototype,"visibleFieldNames",void 0),ks([(0,Cs.Yl)(),Is("design:type",Array)],Rs.prototype,"visibleFunctionNames",void 0);var Ps=s(29979);class Ns extends Ps.a{constructor(e){super(e)}getRestUrl(e){}}var Ds=s(7090);let Os=(()=>{class e extends Ns{constructor(e,t){super(t),this.environmentService=e}getAutocompleteData(){return this.get("/rest/api/2/jql/autocompletedata").pipe((0,ws.W)(Rs))}getRestUrl(e){return this.environmentService.getBaseURL()+e}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(ls.L),i.LFG(Ds.O))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var Fs=s(81269);let Ls=(()=>{class e extends Fs.O{setAutoCompleteData(e){const t=Jt();this.jiraParser=t.JQLAutoComplete.MyParser(e)}parse(e){this.jiraParseError=this.jiraParser.parse(e).getParseError()}getParseError(){return this.jiraParseError}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var js=s(92605),Ms=s(89432),Us=s(45515),Bs=s(89450);let qs=(()=>{class e{createAbcConfiguration(){return(new Bs.f).withName("SPT_BOXCONFIG_TASKS_QUICK_FILTERS_NEW_FILTER_QUERY_ABC_NAME").withPlaceholder("SPT_BOXCONFIG_TASKS_QUICK_FILTERS_NEW_FILTER_QUERY_ABC_PLACEHOLDER").withLozengeColor("default").withSaveAsQuickFilterEnabled(!1)}createJqlConfiguration(){return(new Bs.f).withName("SPT_BOXCONFIG_TASKS_QUICK_FILTERS_NEW_FILTER_QUERY_JQL_NAME").withPlaceholder("SPT_BOXCONFIG_TASKS_QUICK_FILTERS_NEW_FILTER_QUERY_JQL_PLACEHOLDER").withSaveAsQuickFilterEnabled(!1).withQueryLanguageSearch(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Qs=(()=>{class e extends Us.Q{constructor(e){super(),this.configurationFactory=e}getStrategies(){return[this.configurationFactory.createAbcConfiguration(),this.configurationFactory.createJqlConfiguration()]}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(qs))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Hs=(()=>{class e{}return e.jqlFieldNames=[{value:"affectedVersion",displayName:"affectedVersion",auto:"true",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["com.atlassian.jira.project.version.Version"]},{value:"assignee",displayName:"assignee",auto:"true",orderable:"true",searchable:"true",operators:["was not","was not in","was","is not","changed","was in","in","!=","=","not in","is"],types:["com.atlassian.crowd.embedded.api.User"]},{value:"category",displayName:"category",auto:"true",searchable:"true",operators:["=","!=","in","not in","is","is not"],types:["com.atlassian.jira.project.ProjectCategory"]},{value:"comment",displayName:"comment",searchable:"true",operators:["~","!~"],types:["java.lang.String"]},{value:"component",displayName:"component",auto:"true",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not"],types:["com.atlassian.jira.bc.project.component.ProjectComponent"]},{value:"created",displayName:"created",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"createdDate",displayName:"createdDate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"description",displayName:"description",orderable:"true",searchable:"true",operators:["~","!~","is","is not"],types:["java.lang.String"]},{value:"due",displayName:"due",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"duedate",displayName:"duedate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"environment",displayName:"environment",orderable:"true",searchable:"true",operators:["~","!~","is","is not"],types:["java.lang.String"]},{value:"filter",displayName:"filter",auto:"true",searchable:"true",operators:["=","!=","in","not in"],types:["com.atlassian.jira.issue.search.SearchRequest"]},{value:"fixVersion",displayName:"fixVersion",auto:"true",orderable:"true",searchable:"true",operators:["was not","was not in","was in","=","!=",">","not in","is not","was","changed","in",">=","<","is","<="],types:["com.atlassian.jira.project.version.Version"]},{value:"id",displayName:"id",orderable:"true",searchable:"true",operators:["=","!=","in","not in","<","<=",">",">="],types:["com.atlassian.jira.issue.Issue"]},{value:"issue",displayName:"issue",orderable:"true",searchable:"true",operators:["=","!=","in","not in","<","<=",">",">="],types:["com.atlassian.jira.issue.Issue"]},{value:"issuekey",displayName:"issuekey",orderable:"true",searchable:"true",operators:["=","!=","in","not in","<","<=",">",">="],types:["com.atlassian.jira.issue.Issue"]},{value:"issuetype",displayName:"issuetype",auto:"true",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not"],types:["com.atlassian.jira.issue.issuetype.IssueType"]},{value:"key",displayName:"key",orderable:"true",searchable:"true",operators:["=","!=","in","not in","<","<=",">",">="],types:["com.atlassian.jira.issue.Issue"]},{value:"labels",displayName:"labels",auto:"true",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not"],types:["com.atlassian.jira.issue.label.Label"]},{value:"lastViewed",displayName:"lastViewed",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"level",displayName:"level",auto:"true",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not"],types:["com.atlassian.jira.issue.security.IssueSecurityLevel"]},{value:"originalEstimate",displayName:"originalEstimate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["com.atlassian.jira.types.Duration"]},{value:"parent",displayName:"parent",searchable:"true",operators:["=","!=","in","not in"],types:["com.atlassian.jira.issue.Issue"]},{value:"priority",displayName:"priority",auto:"true",orderable:"true",searchable:"true",operators:["was not","was not in","was in","=","!=",">","not in","is not","was","changed","in",">=","<","is","<="],types:["com.atlassian.jira.issue.priority.Priority"]},{value:"progress",displayName:"progress",orderable:"true",operators:[],types:["java.lang.Object"]},{value:"project",displayName:"project",auto:"true",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not"],types:["com.atlassian.jira.project.Project"]},{value:"remainingEstimate",displayName:"remainingEstimate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["com.atlassian.jira.types.Duration"]},{value:"reporter",displayName:"reporter",auto:"true",orderable:"true",searchable:"true",operators:["was not","was not in","was","is not","changed","was in","in","!=","=","not in","is"],types:["com.atlassian.crowd.embedded.api.User"]},{value:"request",displayName:"request",auto:"true",searchable:"true",operators:["=","!=","in","not in"],types:["com.atlassian.jira.issue.search.SearchRequest"]},{value:"resolution",displayName:"resolution",auto:"true",orderable:"true",searchable:"true",operators:["was not","was not in","was in","=","!=",">","not in","is not","was","changed","in",">=","<","is","<="],types:["com.atlassian.jira.issue.resolution.Resolution"]},{value:"resolutiondate",displayName:"resolutiondate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"resolved",displayName:"resolved",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"savedfilter",displayName:"savedfilter",auto:"true",searchable:"true",operators:["=","!=","in","not in"],types:["com.atlassian.jira.issue.search.SearchRequest"]},{value:"searchrequest",displayName:"searchrequest",auto:"true",searchable:"true",operators:["=","!=","in","not in"],types:["com.atlassian.jira.issue.search.SearchRequest"]},{value:"startDate",displayName:"startDate - cf[10000]",orderable:"true",searchable:"true",cfid:"cf[10000]",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"status",displayName:"status",auto:"true",orderable:"true",searchable:"true",operators:["was not","was not in","was","is not","changed","was in","in","!=","=","not in","is"],types:["com.atlassian.jira.issue.status.Status"]},{value:"subtasks",displayName:"subtasks",orderable:"true",operators:[],types:["java.lang.Object"]},{value:"summary",displayName:"summary",orderable:"true",searchable:"true",operators:["~","!~","is","is not"],types:["java.lang.String"]},{value:"text",displayName:"text",searchable:"true",operators:["~"],types:["java.lang.String"]},{value:"timeestimate",displayName:"timeestimate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["com.atlassian.jira.types.Duration"]},{value:"timeoriginalestimate",displayName:"timeoriginalestimate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["com.atlassian.jira.types.Duration"]},{value:"timespent",displayName:"timespent",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["com.atlassian.jira.types.Duration"]},{value:"type",displayName:"type",auto:"true",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not"],types:["com.atlassian.jira.issue.issuetype.IssueType"]},{value:"updated",displayName:"updated",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"updatedDate",displayName:"updatedDate",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.util.Date"]},{value:"voter",displayName:"voter",searchable:"true",operators:["=","!=","in","not in"],types:["com.atlassian.crowd.embedded.api.User"]},{value:"votes",displayName:"votes",orderable:"true",searchable:"true",operators:["=","!=","in","not in","<","<=",">",">="],types:["java.lang.Number"]},{value:"watcher",displayName:"watcher",searchable:"true",operators:["=","!=","in","not in"],types:["com.atlassian.crowd.embedded.api.User"]},{value:"watchers",displayName:"watchers",orderable:"true",searchable:"true",operators:["=","!=","in","not in","<","<=",">",">="],types:["java.lang.Number"]},{value:"workratio",displayName:"workratio",orderable:"true",searchable:"true",operators:["=","!=","in","not in","is","is not","<","<=",">",">="],types:["java.lang.Number"]}],e.jqlFunctionNames=[{value:'cascadeOption("")',displayName:'cascadeOption("")',isList:"true",types:["com.atlassian.jira.issue.customfields.option.CascadingOption"]},{value:"componentsLeadByUser()",displayName:"componentsLeadByUser()",isList:"true",types:["com.atlassian.jira.bc.project.component.ProjectComponent"]},{value:"currentLogin()",displayName:"currentLogin()",types:["java.util.Date"]},{value:"currentUser()",displayName:"currentUser()",types:["com.atlassian.crowd.embedded.api.User"]},{value:"earliestUnreleasedVersion()",displayName:"earliestUnreleasedVersion()",types:["com.atlassian.jira.project.version.Version"]},{value:"endOfDay()",displayName:"endOfDay()",types:["java.util.Date"]},{value:"endOfMonth()",displayName:"endOfMonth()",types:["java.util.Date"]},{value:"endOfWeek()",displayName:"endOfWeek()",types:["java.util.Date"]},{value:"endOfYear()",displayName:"endOfYear()",types:["java.util.Date"]},{value:"issueHistory()",displayName:"issueHistory()",isList:"true",types:["com.atlassian.jira.issue.Issue"]},{value:'issuesWithRemoteLinksByGlobalId("")',displayName:'issuesWithRemoteLinksByGlobalId("")',isList:"true",types:["com.atlassian.jira.issue.Issue"]},{value:"lastLogin()",displayName:"lastLogin()",types:["java.util.Date"]},{value:"latestReleasedVersion()",displayName:"latestReleasedVersion()",types:["com.atlassian.jira.project.version.Version"]},{value:'linkedIssues("")',displayName:'linkedIssues("")',isList:"true",types:["com.atlassian.jira.issue.Issue"]},{value:'membersOf("")',displayName:'membersOf("")',isList:"true",types:["com.atlassian.crowd.embedded.api.User"]},{value:"now()",displayName:"now()",types:["java.util.Date"]},{value:"programs()",displayName:"programs()",isList:"true",types:["com.atlassian.jira.issue.Issue"]},{value:"projectsLeadByUser()",displayName:"projectsLeadByUser()",isList:"true",types:["com.atlassian.jira.project.Project"]},{value:'projectsWhereUserHasPermission("")',displayName:'projectsWhereUserHasPermission("")',isList:"true",types:["com.atlassian.jira.project.Project"]},{value:'projectsWhereUserHasRole("")',displayName:'projectsWhereUserHasRole("")',isList:"true",types:["com.atlassian.jira.project.Project"]},{value:"releasedVersions()",displayName:"releasedVersions()",isList:"true",types:["com.atlassian.jira.project.version.Version"]},{value:"standardIssueTypes()",displayName:"standardIssueTypes()",isList:"true",types:["com.atlassian.jira.issue.issuetype.IssueType"]},{value:"startOfDay()",displayName:"startOfDay()",types:["java.util.Date"]},{value:"startOfMonth()",displayName:"startOfMonth()",types:["java.util.Date"]},{value:"startOfWeek()",displayName:"startOfWeek()",types:["java.util.Date"]},{value:"startOfYear()",displayName:"startOfYear()",types:["java.util.Date"]},{value:"structure()",displayName:"structure()",isList:"true",types:["com.atlassian.jira.issue.Issue"]},{value:"subTaskIssueTypes()",displayName:"subTaskIssueTypes()",isList:"true",types:["com.atlassian.jira.issue.issuetype.IssueType"]},{value:"unreleasedVersions()",displayName:"unreleasedVersions()",isList:"true",types:["com.atlassian.jira.project.version.Version"]},{value:"votedIssues()",displayName:"votedIssues()",isList:"true",types:["com.atlassian.jira.issue.Issue"]},{value:"watchedIssues()",displayName:"watchedIssues()",isList:"true",types:["com.atlassian.jira.issue.Issue"]}],e.jqlReservedWords=["greater","for","privileges","float","validate","distinct","of","break","defaults","byte","initial","file","noaudit","empty","on","false","boolean","right","option","decrement","limit","else","increment","fetch","equals","or","number","table","like","create","row","declare","not","trans","asc","start","session","then","view","strict","explain","go","unique","desc","raise","exclusive","before","next","inout","goto","date","nowait","escape","mode","character","rownum","union","encoding","delete","current","whenever","left","do","null","end","min","trigger","intersection","define","max","previous","integer","sqrt","return","true","checkpoint","divide","join","access","alter","field","delimiter","string","exists","modulo","having","public","insert","abort","uid","to","last","grant","count","transaction","synonym","inner","char","drop","rename","collate","by","where","long","identified","prior","function","changed","revoke","after","remainder","values","more","commit","when","any","power","notin","returns","avg","index","execute","minus","select","int","double","size","rows","and","difference","input","default","isempty","intersect","column","exec","output","cf","update","raw","connect","set","catch","sum","object","from","add","collation","while","was","share","order","isnull","if","less","between","all","with","is","check","alias","resource","lock","into","modify","audit","as","multiply","in","decimal","begin","subtract","immediate","outer","continue","group","user","rowid","first"],e})();class Gs{}let $s=(()=>{class e extends Gs{constructor(){super(),this.idToJQLAutoComplete=new Map}initialize(e,t,s){const n=Jt();this._searchCallback=s;const i=n.JQLAutoComplete({field:jQuery("#"+e),parser:n.JQLAutoComplete.MyParser(Hs.jqlReservedWords),queryDelay:.65,jqlFieldNames:Hs.jqlFieldNames,jqlFunctionNames:Hs.jqlFunctionNames,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:!1,errorID:t});return i.replaceValue=(e,t,s)=>{const n=jQuery(i.field);n.selectionRange(e,t),n.selection(s);const r=n.selectionRange().end;n.selectionRange(r,r)},i.updateParseIndicator=e=>{i.parseError=""!==e.tokenString&&e.getParseError()},(0,bs.R)(document.body,"click").subscribe(()=>{const e=i.dropdownController;e&&e.displayed&&e.hideDropdown()}),this.idToJQLAutoComplete.set(e,i),this}enable(e){const t=this.idToJQLAutoComplete.get(e);t.enable&&(t.buildResponseContainer(),t.enable())}disable(e){this.idToJQLAutoComplete.get(e).disable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var zs=s(29170),Ks=s(15050),Ws=s(3596),Js=s(45610),Vs=s(25635),Ys=s(16551),Zs=s(9223),Xs=s(38152);class en{}var tn=s(67717),sn=(()=>(function(e){e.SEPARATOR="/",e.SEARCH="?"}(sn||(sn={})),sn))();class nn{constructor(e){this.stringPattern=e,this.pathParamsKeys=this.getPathParamsKeysFromString(e)}getStringPattern(){return this.stringPattern}getPathParamsKeys(){return this.pathParamsKeys}convertToPath(e){return this.stringPattern.split(sn.SEPARATOR).map(t=>this.convertToSegment(t,e)).join(sn.SEPARATOR)}convertToSegment(e,t){if(e.match(/{\S+}/)){const s=e.replace(/{|}/g,""),n=t.find(e=>e.getName()===s).getValue();if(!n)throw new Error("Cannot find path parameter with name "+s+".");return n}return e}getPathParamsKeysFromString(e){const t=this.trimPrecedingSeparator(e).split(sn.SEPARATOR).filter(e=>e.match(/{\S+}/)).map(e=>e.replace(/{|}/g,""));if(this.hasPathParamsKeysDuplicates(t))throw new Error("Path parameters keys cannot be duplicated.");return t}hasPathParamsKeysDuplicates(e){const t=Array.from(new Set(e));return e.length!==t.length}trimPrecedingSeparator(e){return e.charAt(0)===sn.SEPARATOR?e.substr(1):e}}class rn{constructor(e,t){this.name=e,this.value=t}getName(){return this.name}getValue(){return this.value}toString(){return this.name+"="+this.value}}class on{constructor(e,t){this.name=e,this.value=t}getName(){return this.name}getValue(){return this.value}toString(){return this.name+"="+this.value}}class an{constructor(e){this.value=e.split(",")}isMultivalue(){return this.value.length>1}getValue(){return this.value.toString()}getValues(){return this.value}toString(){return this.value.toString()}}let ln=(()=>{class e{constructor(t){this.pathContextString=this.normalizePath(t),this.path=this.normalizePath(t.split(sn.SEARCH)[0]),this.queryParams=e.getQueryParamsFromPath(t)}static getQueryParamsFromPath(e){const t=e.split(sn.SEARCH),s=t.length>1?t[1]:"";return s&&s.length?s.split("&").map(e=>{const t=e.split("="),s=t[0],n=new an(t[1]);return new on(s,n)}):[]}getQueryParams(){return this.queryParams}getQueryParamsKeys(){return this.queryParams.map(e=>e.getName())}getQueryParamValueByKey(e){const t=this.queryParams.find(t=>t.getName()===e);if(!t)throw new Error("No query parameter with key "+e+" was foud.");return t.getValue().toString()}getPath(){return this.path}toString(){return this.pathContextString}normalizePath(e){return e.startsWith(sn.SEPARATOR)?e:sn.SEPARATOR+e}}return e.Builder=class extends tn.I{constructor(){super(),this.path="",this.pathParams=[],this.queryParams=[]}build(){return new e(this.buildPathContextString())}withPath(e,t){if(this.pathContainsQueryParameters(e))throw new Error("Query parameters are prohibited in path.");return this.path=e,t&&this.withPathPattern(t),this}withPathParam(e,t){return this.validateParameter(e,t,"Path parameter"),this.pathParamKeyExists(e)?this.pathParams.map(s=>s.getName()===e?new rn(s.getName(),t):s):this.pathParams.push(new rn(e,t)),this}withQueryParam(e,t){if(this.validateParameter(e,t,"Query parameter"),this.queryParamKeyExists(e)){let s=this.extendQueryParamValue(e,t);this.queryParams=s}else this.queryParams.push(new on(e,new an(t)));return this}pathContainsQueryParameters(e){return e.indexOf(sn.SEARCH)>=0}extendQueryParamValue(e,t){return this.queryParams.map(s=>{if(s.getName()===e){let e=s.getValue().getValues().concat(t);return new on(s.getName(),new an(e.toString()))}return s})}withPathPattern(e){return this.pathPattern=new nn(e),this}validateParameter(e,t,s){if(!e)throw new Error(s+" key cannot be empty.");if(!t)throw new Error(s+" value cannot be empty.")}queryParamKeyExists(e){return!!this.queryParams.find(t=>t.getName()===e)}pathParamKeyExists(e){return!!this.pathParams.find(t=>t.getName()===e)}buildPathContextString(){let e=this.path,t="";if(this.pathPattern){if(!this.pathParams)throw new Error("Cannot convert pattern to path without path parameters.");e=this.pathPattern.convertToPath(this.pathParams)}return this.queryParams.length&&(t=sn.SEARCH+this.queryParamsToString(this.queryParams)),t?e+t:e}queryParamsToString(e){return e.map(e=>e.toString()).reduce((e,t)=>e+"&"+t,"").substr(1)}},e})();class un{constructor(e,t){this.pathContextSubject$=e,this.changeListenerDisabledStorage=t}onPathContextChange(e){const t=(new ln.Builder).withPath(e).build();this.changeListenerDisabledStorage.get()||this.pathContextSubject$.next(t)}}var cn=s(3810);let hn=(()=>{class e extends en{constructor(e,t){super(),this.environmentService=e,this.document=t,this.SET_CONTEXT_PATH="SET_CONTEXT_PATH",this.uiPlatformWindow=(0,cn.h)(t)}setPathContext(e){this.uiPlatformWindow.postMessage({type:this.SET_CONTEXT_PATH,contextPath:e.toString()},this.environmentService.getBaseURL())}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(ls.L),i.LFG(St.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var dn=s(8323);let pn=(()=>{class e extends dn.V{constructor(){super(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var mn=s(66089);let gn=(()=>{class e extends un{constructor(e,t,s){super(e,t),this.ngZone=s}init(){window.addEventListener("message",e=>{if("HASH_CHANGE"===e.data.type){const t=e.data.hash;this.ngZone.run(()=>this.onPathContextChange(t))}},!1)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(mn.j),i.LFG(pn),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),fn=(()=>{class e{constructor(e,t,s){this.pathContextChangeListener=e,this.pathContextSetter=t,this.pathContextSubject=s}getPathContext(){return this.pathContextSubject.asObservable()}setPathContext(e){this.pathContextSetter.setPathContext(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(un),i.LFG(en),i.LFG(mn.j))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function yn(e){return()=>e.init()}let vn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[{provide:un,useClass:gn},{provide:en,useClass:hn},{provide:i.ip1,useFactory:yn,deps:[un],multi:!0},fn,mn.j,pn],imports:[[St.ez]]}),e})(),_n=(()=>{class e extends Ps.a{constructor(e,t){super(e),this.environmentService=t}postStatistics(e){return this.post("system/pushServer/metrics",e)}getRestUrl(e){return this.environmentService.getRestBaseUrl()+e}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ds.O),i.LFG(ls.L))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class bn{}var Sn=s(92178),Tn=s(98549),wn=s(78268),Cn=s(42028),En=s(68387),xn=s(58319);class An{constructor(e,t,s){this.transportType=e,this.negotiationSuccess=t,this.negotiationTime=s}}var kn=(()=>(function(e){e.META_CONNECT_CHANNEL="/meta/connect",e.META_HANDSHAKE_CHANNEL="/meta/handshake",e.SERVICE_SYSTEM_MESSAGE="/service/system/message",e.SERVICE_SYSTEM_SUBSCRIBE="/service/system/subscribe",e.SERVICE_SYSTEM_UNSUBSCRIBE="/service/system/unsubscribe"}(kn||(kn={})),kn))();class In{collectNegotiationSuccess(e){this.negotiationSuccess=e}collectTransportType(e){this.transport=e}negotiationTimerStart(){this.negotiationTimeStart=performance.now()}negotiationTimerStop(){this.negotiationTimeStop=performance.now(),this.negotiationTime=this.negotiationTimeStop-this.negotiationTimeStart}toDTO(){return new An(this.transport,this.negotiationSuccess,this.negotiationTime)}}let Rn=(()=>{class e extends class{constructor(e,t){this.environmentService=e,this.statisticsResource=t,this.connected=!1,this.enabled=!1,this.systemMessages$=null,this.operationsQueue=new Array,this.enabled=e.isActiveUsersLiveSyncEnabled()||e.isBoardLiveSyncGloballyEnabled()||e.isMarkerLiveSyncEnabled(),this.enabled&&(this.initAdditionalData(),this.initConfiguration(),this.initStatistics())}subscribeContext(e){return this.assertIsEnabled(),this.publishJoinMessage(e),this.getPushMessageSubject().pipe((0,Cn.h)(t=>t.data.context.toString()===e.toString()),(0,En.U)(e=>({data:{payload:JSON.parse(e.data.eventData)}})))}unsubscribeContext(e){this.assertIsEnabled(),this.connected&&this.bayeuxClient().publish(kn.SERVICE_SYSTEM_UNSUBSCRIBE,{context:e.toString()})}disconnect(){this.assertIsEnabled(),this.bayeuxClient().disconnect(()=>{})}sendStatisticsAfterDelay(e){return this.assertIsEnabled(),(0,Tn.H)(e).pipe((0,En.U)(()=>this.getStatisticsDTO()),(0,xn.VS)(e=>this.statisticsResource.postStatistics(e)))}getStatisticsDTO(){return this.statistics.toDTO()}configureTransports(){}connectionClosed(){}connectionEstablished(){this.bayeuxClient().batch(()=>{this.flushOperationsQueue()})}connectionBroken(){}initConfiguration(){this.configuration={url:this.environmentService.getPushServerUrl(),logLevel:"info"}}initAdditionalData(){this.additionalData={sessionToken:this.environmentService.getSessionToken()}}initStatistics(){this.statistics=new In}assertIsEnabled(){if(!this.enabled)throw new Error("Push notifications are not enabled")}metaConnect(e){if(this.bayeuxClient().isDisconnected())return this.connected=!1,void this.connectionClosed();const t=this.connected;this.connected=!0===e.successful,!t&&this.connected?this.connectionEstablished():t&&!this.connected&&this.connectionBroken()}metaHandshake(e){if(e.successful){const e=this.bayeuxClient().getTransport().getType();this.statistics.collectTransportType(e),this.statistics.collectNegotiationSuccess(!0),this.statistics.negotiationTimerStop(),this.bayeuxClient().batch(()=>{this.bayeuxClient().subscribe(kn.SERVICE_SYSTEM_MESSAGE,e=>this.systemMessageReceived(e),this.additionalData)})}else this.statistics.collectNegotiationSuccess(!1)}systemMessageReceived(e){this.systemMessages$.next({data:e.data})}getPushMessageSubject(){return null===this.systemMessages$&&(this.systemMessages$=new wn.xQ,this.initInternalClient()),this.systemMessages$}initInternalClient(){this.bayeuxClient().configure(this.configuration),this.configureTransports(),this.bayeuxClient().addListener(kn.META_CONNECT_CHANNEL,e=>this.metaConnect(e)),this.bayeuxClient().addListener(kn.META_HANDSHAKE_CHANNEL,e=>this.metaHandshake(e)),this.statistics.negotiationTimerStart(),this.bayeuxClient().handshake(this.additionalData)}enqueueOperation(e){this.connected?e():this.operationsQueue.push(e)}flushOperationsQueue(){for(;this.operationsQueue.length>0;)this.operationsQueue.shift()()}publishJoinMessage(e){this.enqueueOperation(()=>{this.bayeuxClient().publish(kn.SERVICE_SYSTEM_SUBSCRIBE,{context:e.toString()})})}}{constructor(e,t){super(e,t),this.cometd3=new Sn.CometD}bayeuxClient(){return this.cometd3}configureTransports(){this.bayeuxClient().unregisterTransport("websocket")}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(ls.L),i.LFG(_n))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function Pn(e,t){return()=>t.isActiveUsersLiveSyncEnabled()||t.isBoardLiveSyncGloballyEnabled()||t.isMarkerLiveSyncEnabled()?e.sendStatisticsAfterDelay(7e3).subscribe({error:e=>{throw new Error(e)}}):null}let Nn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[{provide:ls.L,useClass:Ys.q},{provide:bn,useClass:Rn},{provide:i.ip1,useFactory:Pn,deps:[bn,ls.L],multi:!0},_n],imports:[[St.ez]]}),e})();var Dn=s(85492),On=s(15609),Fn=s(2322),Ln=s(33867),jn=s(61145),Mn=s(81533),Un=s(29342),Bn=s(66885),qn=s(77464);const Qn="[TOUR]FetchTestTourActionSuccess",Hn="[TOUR]FetchTourAction",Gn="[TOUR]FetchTourActionSuccess",$n="[TOUR]StepAction",zn="[TOUR]CloseTourAction";class Kn{constructor(e){this.tour=e,this.type=Qn}}class Wn{constructor(e){this.tour=e,this.type=Hn}}class Jn{constructor(e){this.tour=e,this.type=Gn}}class Vn{constructor(e){this.currentStep=e,this.type=$n}}class Yn{constructor(e){this.postponed=e,this.type=zn}}class Zn{constructor(){this.type="[TOUR]CloseTourActionSuccess"}}class Xn{constructor(e,t){this.description=e,this.selector=t}}class ei{constructor(e,t){this.description=e,this.selector=t}static default(){return new ei("","")}static fromRaw(e){return new ei(e.description,e.selector)}static fromRawArray(e){const t=[];return e.forEach(e=>{t.push(ei.fromRaw(e))}),t}static toDomain(e){return new Xn(e.description,e.selector)}static toDomainArray(e){const t=[];return e.forEach(e=>{t.push(ei.toDomain(e))}),t}static fromDomain(e){return new ei(e.description,e.selector)}}class ti{constructor(e,t,s,n){this.step=e,this.index=t,this.isFirst=s,this.isLast=n}}class si{constructor(e,t,s,n){this.step=e,this.index=t,this.isFirst=s,this.isLast=n}static default(){return new si(ei.default(),-1,!1,!1)}static toDomain(e){return new ti(ei.toDomain(e.step),e.index,e.isFirst,e.isLast)}static fromDomain(e){return new si(ei.fromDomain(e.step),e.index,e.isFirst,e.isLast)}}class ni{constructor(e,t,s){this.title=e,this.description=t,this.picture=s}}class ii{constructor(e,t,s){this.title=e,this.description=t,this.picture=s}static default(){return new ii("","","")}static fromRaw(e){return e?new ii(e.title,e.description,e.pictureUrl):null}static toDomain(e){return e?new ni(e.title,e.description,e.picture):null}}class ri{constructor(e,t){this.introDialog=e,this.steps=t,this.lastPossibleIndex=this.steps.length-1}getNextStep(e){let t=e.index+1;return t>this.lastPossibleIndex&&(t=this.lastPossibleIndex),this.resolveCurrentStep(t)}getPreviousStep(e){let t=e.index-1;return t<0&&(t=0),this.resolveCurrentStep(t)}resolveCurrentStep(e){return 0===this.lastPossibleIndex?new ti(this.steps[0],e,!0,!0):0===e?new ti(this.steps[0],e,!0,!1):new ti(this.steps[e],e,!1,e===this.lastPossibleIndex)}}class oi{constructor(e,t){this.introDialog=e,this.steps=t}static default(){return new oi(null,[])}static fromRaw(e){return new oi(ii.fromRaw(e.introDialog),ei.fromRawArray(e.steps))}static toDomain(e){return new ri(ii.toDomain(e.introDialog),ei.toDomainArray(e.steps))}}const ai="TOUR";let li=(()=>{class e{constructor(e){this.store=e,this.getFeature=(0,Ut.ZF)(ai),this.getState=(0,Ut.P1)(this.getFeature,e=>e),this.getTour=(0,Ut.P1)(this.getState,e=>e.tour),this.getCurrentStep=(0,Ut.P1)(this.getState,e=>e.currentStep)}selectTour(){return this.store.pipe((0,Ut.Ys)(this.getTour)).pipe((0,En.U)(e=>oi.toDomain(e)))}selectCurrentStep(){return this.store.pipe((0,Ut.Ys)(this.getCurrentStep)).pipe((0,En.U)(e=>si.toDomain(e)))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ut.yh))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),ui=(()=>{class e{constructor(e,t){this.store=e,this.tourQueryService=t}startTestTour(e){const t=oi.fromRaw(e);this.store.dispatch(new Kn(t))}fetch(e){this.store.dispatch(new Wn(e))}nextStep(){this.getTourAndCurrentStep().subscribe(e=>{const t=e[0].getNextStep(e[1]),s=si.fromDomain(t);this.store.dispatch(new Vn(s))})}previousStep(){this.getTourAndCurrentStep().subscribe(e=>{const t=e[0].getPreviousStep(e[1]),s=si.fromDomain(t);this.store.dispatch(new Vn(s))})}closeTour(e){this.store.dispatch(new Yn(e))}getTourAndCurrentStep(){return(0,Bn.$R)(this.tourQueryService.selectTour(),this.tourQueryService.selectCurrentStep().pipe((0,qn.P)()))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ut.yh),i.LFG(li))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var ci=s(70802),hi=s(6812);class di{constructor(e,t){this.mainShowed=e,this.lastVersionShowed=t}static default(){return new di(!1,-1)}}var pi=s(81106);let mi=(()=>{class e{constructor(e,t){this.localStorage=e,this.environmentService=t}setTourLocation(e){this.tourLocationId=e}getTourSettings(){return this.localStorage.getObject(this.getTourKey())||this.setTourSettings(di.default()),this.localStorage.getObject(this.getTourKey())}setTourSettings(e){this.localStorage.setObject(this.getTourKey(),e)}getTourKey(){return`tour-user-${this.environmentService.getLoggedInUser().userKey}-visited-${this.tourLocationId}`}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(pi.m),i.LFG(ls.L))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class gi{constructor(e,t){this.main=e,this.versions=t}static fromRaw(e){return new gi(oi.fromRaw(e.main),e.versions)}getActualTourVersion(e){return!1===e.mainShowed?this.main:!0===e.mainShowed?null:void 0}}let fi=(()=>{class e{constructor(){this.closeTour$=new wn.xQ}close(e){this.closeTour$.next(e)}onClose(){return this.closeTour$.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var yi=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},vi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class _i{constructor(e,t,s){this.actions$=e,this.tourStorage=t,this.tourClosingController=s,this.fetchTestTour$=this.actions$.pipe((0,Mt.l4)(Qn),(0,ci.w)(e=>(this.testTourInProgress=!0,(0,hi.of)(new Jn(e.tour))))),this.fetchTour$=this.actions$.pipe((0,Mt.l4)(Hn),(0,ci.w)(e=>{const t=this.resolveActualTourVersion(e.tour);return t?(0,hi.of)(new Jn(t)):(this.tourClosingController.close(!1),(0,hi.of)(new Zn))})),this.closeTour$=this.actions$.pipe((0,Mt.l4)(zn),(0,ci.w)(e=>(!1===this.testTourInProgress&&this.updateTourSettings(t=>{t.mainShowed=!e.postponed}),this.testTourInProgress=!1,(0,hi.of)(new Zn)))),this.testTourInProgress=!1}updateTourSettings(e){const t=this.tourStorage.getTourSettings();e(t),this.tourStorage.setTourSettings(t)}resolveActualTourVersion(e){const t=gi.fromRaw(e),s=this.tourStorage.getTourSettings();return t.getActualTourVersion(s)}}_i.\u0275fac=function(e){return new(e||_i)(i.LFG(Mt.eX),i.LFG(mi),i.LFG(fi))},_i.\u0275prov=i.Yz7({token:_i,factory:_i.\u0275fac}),yi([(0,Mt.Qm)(),vi("design:type",Object)],_i.prototype,"fetchTestTour$",void 0),yi([(0,Mt.Qm)(),vi("design:type",Object)],_i.prototype,"fetchTour$",void 0),yi([(0,Mt.Qm)(),vi("design:type",Object)],_i.prototype,"closeTour$",void 0);class bi{constructor(){this.tour=oi.default(),this.currentStep=si.default()}}const Si=new bi;function Ti(e=Si,t){switch(t.type){case Gn:const s=t;return Object.assign(new bi,e,{tour:s.tour,currentStep:si.default()});case $n:return Object.assign(new bi,e,{currentStep:t.currentStep});default:return e}}let wi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[mi,ui,li],imports:[[St.ez,Ut.Aw.forFeature(ai,Ti),Mt.sQ.forFeature([_i])]]}),e})();var Ci=s(84933),Ei=s(4335),xi=s(99721),Ai=s(92518),ki=s(9282),Ii=s(9029),Ri=s(58735),Pi=s(69291),Ni=s(42139),Di=s(33680),Oi=s(93077),Fi=s(89932);const Li=["canvasElement"];let ji=(()=>{class e extends Fi.H{constructor(e,t,s,n){super(e,t),this.ngZone=s,this.window=n}init(){this.setContext(),this.setCanvasSize(),this.setCanvasBackground(),this.listenForWindowResize()}highlightArea(e){this.setCanvasSize(),this.setCanvasBackground(),this.setHighlightedElement(e),this.drawHighlightedArea()}getHostClasses(){return["sp-tour-page-coverlet","sp-fixed","sp-top-0","sp-left-0","sp-wh-100","sp-z-4"]}listenForWindowResize(){this.ngZone.runOutsideAngular(()=>{(0,bs.R)(this.window,"resize").pipe((0,Oi.b)(e.WINDOW_RESIZE_DEBOUNCE_TIME),this.takeUntilDestroy()).subscribe(()=>{this.setCanvasSize(),this.setCanvasBackground(),this.highlightedElement&&this.drawHighlightedArea()})})}setContext(){this.ctx=this.canvasElement.nativeElement.getContext("2d")}setCanvasSize(){const e=this.canvasElement.nativeElement;this.updateCanvasSizeValues(),e.width=this.canvasWidth,e.height=this.canvasHeight}updateCanvasSizeValues(){this.canvasWidth=this.window.innerWidth,this.canvasHeight=this.window.innerHeight}setCanvasBackground(){this.ctx.beginPath(),this.ctx.fillStyle="rgba(0, 0, 0, .5)",this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.closePath()}setHighlightedElement(e){this.highlightedElement=e}drawHighlightedArea(){const e=this.highlightedElement.getBoundingClientRect(),t={x:e.x,y:e.y},s=e.width,n=e.height;this.drawTransparentRect(t,s,n),this.drawBorderedRect(t,s,n)}drawTransparentRect(e,t,s){this.ctx.beginPath(),this.ctx.clearRect(e.x,e.y,t,s),this.ctx.closePath()}drawBorderedRect(t,s,n){this.drawRoundedRect(t,s,n),this.ctx.strokeStyle="#5243aa",this.ctx.lineWidth=e.BORDER_SIZE,this.ctx.stroke()}drawRoundedRect(e,t,s){const n=e.x,i=e.y,r=this.getLeftTopCoordinates(n,i),o=this.getLeftBottomCoordinates(n,i,s),a=this.getRightTopCoordinates(n,i,t),l=this.getRightBottomCoordinates(n,i,t,s);this.ctx.beginPath(),this.moveToStartOfHighlightedElement(r),this.drawTopBorderOfHighlightedElement(a),this.drawRightBorderOfHighlightedElement(l),this.drawBottomBorderOfHighlightedElement(o),this.drawLeftBorderOfHighlightedElement(r),this.ctx.closePath()}moveToStartOfHighlightedElement(t){this.ctx.moveTo(t.x+e.RADIUS,t.y)}drawTopBorderOfHighlightedElement(t){this.ctx.lineTo(t.x-e.RADIUS,t.y),this.ctx.quadraticCurveTo(t.x,t.y,t.x,t.y+e.RADIUS)}drawRightBorderOfHighlightedElement(t){this.ctx.lineTo(t.x,t.y-e.RADIUS),this.ctx.quadraticCurveTo(t.x,t.y,t.x-e.RADIUS,t.y)}drawBottomBorderOfHighlightedElement(t){this.ctx.lineTo(t.x+e.RADIUS,t.y),this.ctx.quadraticCurveTo(t.x,t.y,t.x,t.y-e.RADIUS)}drawLeftBorderOfHighlightedElement(t){this.ctx.lineTo(t.x,t.y+e.RADIUS),this.ctx.quadraticCurveTo(t.x,t.y,t.x+e.RADIUS,t.y)}getRightTopCoordinates(t,s,n){return{x:t+n+e.HIGHLIGHTED_GAP,y:s-e.HIGHLIGHTED_GAP}}getRightBottomCoordinates(t,s,n,i){return{x:t+n+e.HIGHLIGHTED_GAP,y:s+i+e.HIGHLIGHTED_GAP}}getLeftBottomCoordinates(t,s,n){return{x:t-e.HIGHLIGHTED_GAP,y:s+n+e.HIGHLIGHTED_GAP}}getLeftTopCoordinates(t,s){return{x:t-e.HIGHLIGHTED_GAP,y:s-e.HIGHLIGHTED_GAP}}}return e.RADIUS=5,e.HIGHLIGHTED_GAP=1,e.BORDER_SIZE=2,e.WINDOW_RESIZE_DEBOUNCE_TIME=300,e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.R0b),i.Y36(Di.m))},e.\u0275cmp=i.Xpm({type:e,selectors:[["sp-tour-page-coverlet"]],viewQuery:function(e,t){if(1&e&&i.Gf(Li,7),2&e){let e;i.iGM(e=i.CRH())&&(t.canvasElement=e.first)}},features:[i.qOj],decls:2,vars:0,consts:[["canvasElement",""]],template:function(e,t){1&e&&i._UZ(0,"canvas",null,0)},encapsulation:2,changeDetection:0}),e})(),Mi=(()=>{class e{constructor(e,t,s,n){this.componentFactoryResolver=e,this.injector=t,this.applicationRef=s,this.document=n}cover(){this.pageCoverletComponentRef||(this.createPageCoverlet(),this.document.body.appendChild(this.pageCoverletComponentRef.location.nativeElement),this.pageCoverletComponentRef.instance.init())}uncover(){this.pageCoverletComponentRef&&(this.pageCoverletComponentRef.location.nativeElement.remove(),this.pageCoverletComponentRef.destroy(),this.pageCoverletComponentRef=null)}highlightArea(e){this.pageCoverletComponentRef&&this.pageCoverletComponentRef.instance.highlightArea(e)}createPageCoverlet(){const e=this.componentFactoryResolver.resolveComponentFactory(ji);this.pageCoverletComponentRef=e.create(this.injector),this.applicationRef.attachView(this.pageCoverletComponentRef.hostView)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i._Vd),i.LFG(i.zs3),i.LFG(i.z2F),i.LFG(St.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var Ui=s(71402),Bi=s(91216);function qi(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",6),i.NdJ("click",function(){return i.CHM(e),i.oxw().previous()}),i._uU(1),i.ALo(2,"spL10nText"),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.firstStep),i.xp6(1),i.hij(" ",i.lcZ(2,2,"SPT_COMMON_TOUR_STEP_BUTTON_BACK")," ")}}function Qi(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",function(){return i.CHM(e),i.oxw().next()}),i._uU(1),i.ALo(2,"spL10nText"),i.qZA()}2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"SPT_COMMON_TOUR_STEP_BUTTON_NEXT")," "))}function Hi(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){return i.CHM(e),i.oxw().close()}),i._uU(1),i.ALo(2,"spL10nText"),i.qZA()}2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"SPT_COMMON_TOUR_STEP_BUTTON_SKIP")," "))}function Gi(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",function(){return i.CHM(e),i.oxw().close()}),i._uU(1),i.ALo(2,"spL10nText"),i.qZA()}2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"SPT_COMMON_TOUR_STEP_BUTTON_GET_STARTED")," "))}let $i=(()=>{class e extends Fi.H{constructor(e,t,s,n){super(e,t),this.tourCommandDispatcher=s,this.tourClosingController=n}ngOnInit(){this.firstStep=this.data.currentStep.isFirst,this.lastStep=this.data.currentStep.isLast}getHostClasses(){return["sp-flex","sp-flex-column"]}next(){this.tourCommandDispatcher.nextStep()}previous(){this.tourCommandDispatcher.previousStep()}close(){this.tourClosingController.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(ui),i.Y36(fi))},e.\u0275cmp=i.Xpm({type:e,selectors:[["sp-tour-step-template"]],inputs:{data:"data"},features:[i.qOj],decls:8,vars:7,consts:[[1,"sp-tour-step-template__description","sp-m-2"],[1,"sp-flex","sp-my-1","sp-mx-2"],["sp-button","","class","previous-button",3,"disabled","click",4,"ngIf"],["sp-button","","primary","","class","next-button",3,"click",4,"ngIf"],["sp-button","","link","","class","sp-close-tour",3,"click",4,"ngIf"],["sp-button","","primary","","class","sp-close-tour",3,"click",4,"ngIf"],["sp-button","",1,"previous-button",3,"disabled","click"],["sp-button","","primary","",1,"next-button",3,"click"],["sp-button","","link","",1,"sp-close-tour",3,"click"],["sp-button","","primary","",1,"sp-close-tour",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.ALo(2,"spL10nText"),i.qZA(),i.TgZ(3,"div",1),i.YNc(4,qi,3,4,"button",2),i.YNc(5,Qi,3,3,"button",3),i.YNc(6,Hi,3,3,"button",4),i.YNc(7,Gi,3,3,"button",5),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,5,t.data.currentStep.step.description),"\n"),i.xp6(3),i.Q6J("ngIf",!t.firstStep),i.xp6(1),i.Q6J("ngIf",!t.lastStep),i.xp6(1),i.Q6J("ngIf",!t.lastStep),i.xp6(1),i.Q6J("ngIf",t.lastStep))},directives:[St.O5,Ui.r],pipes:[Bi.L],styles:[".sp-tour-step-template{width:350px}.sp-tour-step-template__description{width:330px}"],encapsulation:2,changeDetection:0}),e})();var zi=s(99578);let Ki=(()=>{class e{constructor(e,t,s,n,i){this.tourPageCoverletHandler=e,this.inlineDialogManager=t,this.inlineDialogService=s,this.rendererFactory=n,this.document=i,this.renderer=this.rendererFactory.createRenderer(null,null)}next(e){let t;this.closeInlineDialog(),t=this.getHighlightedElement(e.step.selector),this.tourPageCoverletHandler.highlightArea(t),this.inlineDialog=this.inlineDialogService.createInlineDialog(this.renderer,this.createInlineDialogConfig(e),t),this.inlineDialog.openInlineDialog({})}turnOff(){this.closeInlineDialog()}createInlineDialogConfig(e){return new Ii.U($i,{currentStep:e},Pi.e.CLICK.toString(),null,Ri.x.HORIZONTAL_BOTTOM,ki.a.ELEMENT).withCloseDialogWhenClickOutside(!1)}closeInlineDialog(){this.inlineDialog&&this.inlineDialogManager.destroy()}getHighlightedElement(e){return this.document.querySelector(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Mi),i.LFG(zi.V),i.LFG(Ni.O),i.LFG(i.FYo),i.LFG(St.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var Wi=s(29686),Ji=s(24176),Vi=s(84055);function Yi(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"sp-modal-window-confirm-button",7),i.NdJ("onConfirm",function(t){return i.CHM(e),i.oxw().showSteps(t)}),i._uU(2),i.ALo(3,"spL10nText"),i.qZA(),i.TgZ(4,"sp-modal-window-standard-button",8),i.NdJ("click",function(){return i.CHM(e),i.oxw().skipTour()}),i._uU(5),i.ALo(6,"spL10nText"),i.qZA(),i.BQk()}2&e&&(i.xp6(2),i.hij(" ",i.lcZ(3,2,"SPT_COMMON_TOUR_BUTTON_EXPLORE")," "),i.xp6(3),i.hij(" ",i.lcZ(6,4,"SPT_COMMON_TOUR_BUTTON_SKIP")," "))}function Zi(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"sp-modal-window-confirm-button",9),i.NdJ("click",function(){return i.CHM(e),i.oxw().skipTour()}),i._uU(1),i.ALo(2,"spL10nText"),i.qZA()}2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"SPT_COMMON_TOUR_BUTTON_GET_STARTED")," "))}let Xi=(()=>{class e extends Fi.H{constructor(e,t,s,n,i,r,o,a){super(e,t),this.changeDetectorRef=s,this.tourPageCoverletHandler=n,this.tourCommandDispatcher=i,this.tourClosingController=r,this.tourQueryService=o,this.modalWindowComponentRef=a}ngOnInit(){this.observeTour()}finalize(){this.modalWindowComponentRef.close(),this.tourPageCoverletHandler.uncover()}getHostClasses(){return["sp-tour-intro-dialog","sp-text-center","sp-pt-4","sp-w-full"]}showSteps(e){this.modalWindowComponentRef.close(),e&&this.tourCommandDispatcher.nextStep()}skipTour(){this.modalWindowComponentRef.close(),this.tourClosingController.close(!1)}observeTour(){this.tourQueryService.selectTour().pipe(this.takeUntilDestroy()).subscribe(e=>{this.tourStepsExist=!!e.steps.length,this.changeDetectorRef.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(i.sBO),i.Y36(Mi),i.Y36(ui),i.Y36(fi),i.Y36(li),i.Y36(Ci.Zh))},e.\u0275cmp=i.Xpm({type:e,selectors:[["sp-tour-intro-dialog"]],features:[i.qOj],decls:12,vars:9,consts:[[1,"sp-intro-modal-header","sp-intro-modal-header","sp-modal-title"],[1,"sp-intro-modal-body"],[1,"sp-tour-intro-dialog__picture","sp-mx-auto"],[1,"sp-mx-auto","sp-p-5","sp-text-center"],[1,"sp-intro-modal-footer"],[4,"ngIf","ngIfElse"],["getStartedButton",""],[3,"onConfirm"],[1,"sp-close-tour","sp-ml-3",3,"click"],[1,"sp-close-tour",3,"click"]],template:function(e,t){if(1&e&&(i.TgZ(0,"h3",0),i._uU(1),i.ALo(2,"spL10nText"),i.qZA(),i.TgZ(3,"div",1),i._UZ(4,"img",2),i.TgZ(5,"div",3),i._uU(6),i.ALo(7,"spL10nText"),i.qZA(),i.qZA(),i.TgZ(8,"div",4),i.YNc(9,Yi,7,6,"ng-container",5),i.YNc(10,Zi,3,3,"ng-template",null,6,i.W1O),i.qZA()),2&e){const e=i.MAs(11);i.xp6(1),i.Oqu(i.lcZ(2,5,t.configuration.title)),i.xp6(3),i.uIk("src",t.configuration.picture,i.LSH),i.xp6(2),i.hij(" ",i.lcZ(7,7,t.configuration.description)," "),i.xp6(3),i.Q6J("ngIf",t.tourStepsExist)("ngIfElse",e)}},directives:[St.O5,Ji.r,Vi.$],pipes:[Bi.L],styles:[".sp-tour-intro-dialog__picture{width:355px;height:200px}"],encapsulation:2,changeDetection:0}),e})();var er=s(44840);let tr=(()=>{class e{constructor(e){this.modalWindowService=e}open(e){this.createModalWindowConfig(),this.modalWindowService.open(this.modalWindowConfiguration,e)}turnOff(){this.modalWindowConfiguration&&this.modalWindowService.close(this.modalWindowConfiguration)}createModalWindowConfig(){this.modalWindowConfiguration=new Wi.g.Builder(Xi).withSize(er.e.M).build()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ei.b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var sr=s(14681),nr=s(99998),ir=s(48698),rr=s(62610),or=(()=>(function(e){e.SKIP="Tour escape",e.NAVIGATION="Tour steps navigation"}(or||(or={})),or))();let ar=(()=>{class e{constructor(e,t,s,n){this.shortcutsService=e,this.tourClosingController=t,this.tourCommandDispatcher=s,this.tourRepository=n,this.destroy$=new wn.xQ,this.shortcutContainers=[]}init(){this.destroy$=new wn.xQ,this.subscribeForStep(),this.shortcutContainers=[],this.skipGroup=this.shortcutsService.createGroup(or.SKIP,{position:ir.N.FORCE_TO_TOP}),this.navigationGroup=this.shortcutsService.createGroup(or.NAVIGATION,{position:ir.N.FORCE_TO_TOP}),this.addShortcutsForNextStep(),this.addShortcutsForPreviousStep(),this.addShortcutsForSkipTour(),this.shortcutsService.setGroupActivityStatus(or.SKIP,!0)}terminate(){this.shortcutsService.removeShortcutGroup(this.skipGroup),this.shortcutsService.removeShortcutGroup(this.navigationGroup),this.shortcutContainers.forEach(e=>e.removeAllShortcuts()),this.destroy$.next(),this.destroy$.complete()}subscribeForStep(){this.tourRepository.selectCurrentStep().pipe((0,xi.R)(this.destroy$),(0,Cn.h)(e=>e.index>=0)).subscribe(e=>{this.shortcutsService.setGroupActivityStatus(or.NAVIGATION,!0),this.currentStep=e})}addShortcutsForNextStep(){this.shortcutContainers.push(this.shortcutsService.createContainer("Next step",this.navigationGroup).add(new nr.z(sr.s.ARROW_RIGHT,()=>{this.goNextStepViaShortcut()})).add(new nr.z(sr.s.N,()=>{this.goNextStepViaShortcut()})))}addShortcutsForPreviousStep(){this.shortcutContainers.push(this.shortcutsService.createContainer("Previous step",this.navigationGroup).add(new nr.z(sr.s.ARROW_LEFT,()=>{this.goPreviousStepViaShortcut()})).add(new nr.z(sr.s.B,()=>{this.goPreviousStepViaShortcut()})))}addShortcutsForSkipTour(){this.shortcutContainers.push(this.shortcutsService.createContainer("Skip tour",this.skipGroup).add(new nr.z(sr.s.ESCAPE,()=>{this.tourClosingController.close(!1)})).add(new nr.z(sr.s.S,()=>{this.tourClosingController.close(!1)})))}goNextStepViaShortcut(){this.currentStep.isLast||this.tourCommandDispatcher.nextStep()}goPreviousStepViaShortcut(){this.currentStep.isFirst||this.tourCommandDispatcher.previousStep()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(rr.L),i.LFG(fi),i.LFG(ui),i.LFG(li))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),lr=(()=>{class e{constructor(e,t,s){this.DOCUMENT=e,this.tourClosingController=t,this.tourQueryService=s,this.tourLoaded=new wn.xQ,this.tourLoadStarted=new wn.xQ,this.INSPECTION_INTERVAL=1500,this.MAX_INSPECTIONS=5,this.WARN_MESSAGE="The tour was closed at the end of the waiting time because the page lacks all necessary DOM elements.",this.subscribeForTour()}onTourLoaded(){return this.tourLoaded.asObservable()}onTourLoadStarted(){return this.tourLoadStarted.asObservable()}subscribeForTour(){this.tourQueryService.selectTour().pipe((0,Cn.h)(e=>!!e.introDialog||!!e.steps.length)).subscribe(e=>{this.tourLoadStarted.next(),this.load(e)})}load(e){let t=0;const s=window.setInterval(()=>{t+=1,this.tryLoad(e,s,t)},this.INSPECTION_INTERVAL)}tryLoad(e,t,s){!0===this.waitForTourElementsAppearingOnThePage(e.steps,s===this.MAX_INSPECTIONS-1)?(this.tourLoaded.next(e),clearInterval(t)):s===this.MAX_INSPECTIONS&&(console.warn(this.WARN_MESSAGE),this.tourClosingController.close(!0),clearInterval(t))}waitForTourElementsAppearingOnThePage(e,t){let s=0;return e.forEach(e=>{void 0!==this.DOCUMENT.querySelectorAll(e.selector)[0]?s++:t&&console.warn("[TOUR] Selector not found: "+e.selector)}),s===e.length}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(St.K0),i.LFG(fi),i.LFG(li))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),ur=(()=>{class e{constructor(e,t,s,n,i,r,o,a,l,u){this.tourRepository=e,this.tourCommandDispatcher=t,this.tourClosingController=s,this.tourLoadingController=n,this.tourPageCoverletHandler=i,this.tourStepTemplateHandler=r,this.tourIntroDialogHandler=o,this.tourShortcutsManager=a,this.tourStorage=l,this.tourDisableService=u,this.closed$=new wn.xQ,this.onDestroy$=new wn.xQ}ngOnDestroy(){this.destroy(!0)}watchTour(e,t){this.tourStorage.setTourLocation(t),this.tourDisableService.isDisabled()||(this.tourClosingController.onClose().pipe((0,xi.R)(this.onDestroy$)).subscribe(e=>{this.close(e)}),this.tourLoadingController.onTourLoaded().pipe((0,Cn.h)(()=>!this.tourDisableService.isDisabled()),(0,xi.R)(this.onDestroy$)).subscribe(e=>{this.start(e)}),this.tourCommandDispatcher.fetch(e))}destroy(e){this.onDestroy$.next(),this.closed$.next(),e&&(this.onDestroy$.complete(),this.closed$.complete())}start(e){this.tourShortcutsManager.init(),this.closed$=new wn.xQ,this.subscribeForStep(),e.introDialog?(this.tourPageCoverletHandler.cover(),this.tourIntroDialogHandler.open(e.introDialog)):this.tourCommandDispatcher.nextStep()}close(e){this.tourStepTemplateHandler.turnOff(),this.tourPageCoverletHandler.uncover(),this.tourShortcutsManager.terminate(),this.tourCommandDispatcher.closeTour(e),this.closed$.next(),this.closed$.complete()}subscribeForStep(){this.tourRepository.selectCurrentStep().pipe((0,xi.R)(this.closed$),(0,Cn.h)(e=>e.index>=0)).subscribe(e=>{this.tourIntroDialogHandler.turnOff(),this.tourPageCoverletHandler.cover(),this.tourStepTemplateHandler.next(e)})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(li),i.LFG(ui),i.LFG(fi),i.LFG(lr),i.LFG(Mi),i.LFG(Ki),i.LFG(tr),i.LFG(ar),i.LFG(mi),i.LFG(Ai.V1))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),cr=(()=>{class e{constructor(e,t,s,n){this.modalWindowComponentRef=e,this.modalWindowService=t,this.tourService=s,this.tourCommandDispatcher=n}startTestTour(e,t){if(e){this.closeDialogConfiguration();const e=JSON.parse(t);this.tourCommandDispatcher.startTestTour(e)}}closeDialogConfiguration(){this.modalWindowComponentRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Ci.Zh),i.Y36(Ei.b),i.Y36(ur),i.Y36(ui))},e.\u0275cmp=i.Xpm({type:e,selectors:[["sp-test-tour-dialog-configuration"]],decls:13,vars:0,consts:[[1,"sp-modal-header"],[1,"sp-modal-body"],[1,"test-tour-configuration"],["testTourConfiguration",""],[1,"description"],[1,"sp-modal-footer"],[1,"close-test-tour",3,"click"],[3,"onConfirm"]],template:function(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",0),i._uU(1," TEST TOUR\n"),i.qZA(),i.TgZ(2,"div",1),i.TgZ(3,"textarea",2,3),i._uU(5,"\t"),i.qZA(),i.TgZ(6,"div",4),i._uU(7," Write down Tour with JSON format "),i.qZA(),i.qZA(),i.TgZ(8,"div",5),i.TgZ(9,"sp-modal-window-standard-button",6),i.NdJ("click",function(){return t.closeDialogConfiguration()}),i._uU(10," Exit "),i.qZA(),i.TgZ(11,"sp-modal-window-confirm-button",7),i.NdJ("onConfirm",function(s){i.CHM(e);const n=i.MAs(4);return t.startTestTour(s,n.value)}),i._uU(12," Start Test Tour "),i.qZA(),i.qZA()}},directives:[Vi.$,Ji.r],styles:[".sp-modal-header[_ngcontent-%COMP%]{color:#0e64a0;font-weight:700}.sp-modal-body[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap}.sp-modal-body[_ngcontent-%COMP%]   .test-tour-configuration[_ngcontent-%COMP%]{width:500px;height:300px}.sp-modal-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{width:470px;min-height:50px;padding:15px}.sp-modal-footer[_ngcontent-%COMP%]   .close-test-tour[_ngcontent-%COMP%]{margin-right:12px}"],changeDetection:0}),e})(),hr=(()=>{class e{constructor(e){this.modalWindowService=e}watchTestTour(){window.testTour=()=>{this.openTestTourDialogConfig()},this.modalWindowConfiguration=new Wi.g.Builder(cr).build()}openTestTourDialogConfig(){this.modalWindowService.open(this.modalWindowConfiguration)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Ei.b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),dr=(()=>{class e{static init(e){this.tourAlreadyInitialized||(this.tourAlreadyInitialized=!0,e.watchTestTour())}}return e.tourAlreadyInitialized=!1,e})();function pr(e){return()=>dr.init(e)}let mr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[ur,fi,Mi,Ki,tr,ar,lr,hr,pi.m,Ai.V1,{multi:!0,provide:i.tb,useFactory:pr,deps:[hr]}],imports:[[St.ez,jn.F,Un.o,_s.o,wi,Mn.K.forRoot(),Ln.J]]}),e})();var gr=s(46690),fr=s(3970),yr=s(46576),vr=s(23658);let _r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[{provide:Gt.f,useClass:Dn.s},{provide:zs.x,useClass:Ks.$},{provide:Ns,useClass:Os},{provide:Ss,useClass:Ts},{provide:Gs,useClass:$s},{provide:js.U,useClass:Ts},{provide:Fs.O,useClass:Ls},{provide:Ms.Z,useClass:Os},{provide:Us.Q,useClass:Qs},{provide:ls.L,useClass:Ys.q},{provide:Ws.S,useClass:Zs.r},{provide:Vs.x,useClass:Js.Y},{provide:vs.M,useClass:ds},{provide:ms.s,useClass:gs.y},{provide:$t.m,useClass:zt.o},{provide:jt.wN,useClass:ps.s},{provide:ss.T,useClass:ns.p},{provide:On.$,useClass:Fn.j},us.p,yr.f],imports:[[n.b2,Lt,Ut.Aw.forRoot({}),gr.$.forRoot(),fr.I.forRoot(),Mt.sQ.forRoot([]),Bt.FT.instrument({maxAge:50}),Xs.M.forRoot(),Nn,ts.forRoot(),vn,_s.o.forRoot(),Qt.h.forRoot(qt.W),ys.V.forRoot(),vr.gF.forRoot(),Ht.m.forRoot(),fs.SV,mr]]}),e})()},76847:(e,t,s)=>{"use strict";s.d(t,{m:()=>o});var n=s(78268),i=s(99721),r=s(73309);class o extends r.b{constructor(){super(),this.hostConnector=null,this.selectedIssue=null,this.unsubscribe$=new n.xQ}connect(e){this.hostConnector=e,this.hostConnector.observeIssueChange().pipe((0,i.R)(this.unsubscribe$)).subscribe(e=>{this.selectedIssue=e}),this.runIntegrationLogic()}disconnect(){this.hostConnector=null,this.selectedIssue=null,this.unsubscribe$.next()}}},51222:(e,t,s)=>{"use strict";s.d(t,{m:()=>n.m});var n=s(76847)},73999:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});class n{}},70125:(e,t,s)=>{"use strict";s.d(t,{y:()=>n});class n{constructor(e,t,s){this.selectedIssueProvider=e,this.onDelete=t,this.onUpdate=s}}},24531:(e,t,s)=>{"use strict";s.d(t,{o:()=>l});var n=s(6812),i=s(76847),r=s(70125),o=s(94846),a=s(73999);let l=(()=>{class e extends i.m{constructor(e){super(),this.operationsDialogIntegrationService=e}runIntegrationLogic(){this.operationsDialogIntegrationService&&this.operationsDialogIntegrationService.init(new r.y(this.getIssue.bind(this),e=>this.hostConnector?this.hostConnector.onIssueDelete(e):(0,n.of)(),e=>this.hostConnector?this.hostConnector.onIssueUpdate(e):(0,n.of)()))}getIssue(){return this.selectedIssue?{externalId:(e=this.selectedIssue).extTaskId,key:e.key}:null;var e}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(a.f))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()},83429:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var n=s(5821);let i=(()=>{class e{constructor(){this.REST_URL="ppm/box/active/set/"}setActiveProgram(t){return new Promise(s=>{const i=new XMLHttpRequest,r=this.getRestBaseUrl()+this.REST_URL+t.toString();i.onreadystatechange=()=>{(i.status===n.o.OK&&i.readyState===e.REQUEST_IN_READY_STATE||i.status>=n.o.BAD_REQUEST)&&s(t)},i.open("POST",r),i.setRequestHeader("Content-Type","application/json"),i.send()})}getUrlParam(e){const t=window.location.search;if(""===e||!t)return"";const s=new RegExp(e+"=([^&]*)").exec(t)[1];return decodeURIComponent(s)}getAttributeParam(e){const t=document.querySelector(".sp-page");return decodeURIComponent(t.getAttribute(e))}}return e.REQUEST_IN_READY_STATE=4,e})()},7581:(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var n=s(83429),i=s(94846);let r=(()=>{class e extends n.T{getRestBaseUrl(){return this.getAttributeParam("applicationbaseurl").split("parameters")[0]}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})()},84468:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var n=s(59877),i=(()=>(function(e){e.BOX_ID="boxId",e.MODULE_TYPE="moduleType"}(i||(i={})),i))(),r=s(33237),o=s(94846);let a=(()=>{class e extends n.wN{constructor(){super()}shouldDetach(){return!1}store(){}shouldAttach(){return!1}retrieve(){return null}shouldReuseRoute(e,t){const s=this.getAbsoluteUrlFromSnapshot(e),n=this.getAbsoluteUrlFromSnapshot(t);if(!s.startsWith("box/")||!n.startsWith("box/"))return e.routeConfig===t.routeConfig;const i=t.firstChild,r=this.getBoxIdFromParam(e.firstChild),o=this.getBoxIdFromParam(i);return r.equals(o)&&e.routeConfig===t.routeConfig}getBoxIdFromParam(e){const t=e?e.params[i.BOX_ID]:"";return t?new r.A(t):r.A.ROOT_ID}getAbsoluteUrlFromSnapshot(e){return e.pathFromRoot.map(e=>e.url).reduce((e,t)=>[...e,...t],[]).map(e=>e.path).join("/")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()},66089:(e,t,s)=>{"use strict";s.d(t,{j:()=>r});var n=s(78268),i=s(94846);let r=(()=>{class e extends n.xQ{}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})()},3596:(e,t,s)=>{"use strict";s.d(t,{S:()=>n});class n{constructor(){}}},56101:(e,t,s)=>{"use strict";function n(e,t){if("function"!=typeof Object.getPrototypeOf(e)[t])throw new Error("Method "+t+" of "+e.constructor.name+" does not override any base class method")}s.d(t,{C:()=>n})},9223:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var n=s(3596),i=s(94846),r=s(75689);let o=(()=>{class e extends n.S{constructor(e){super(),this.environmentService=e}getPageUrl(e){switch(e){case"gantt_configuration":return`${this.environmentService.getTaskProviderBaseUrl()}/plugins/servlet/ac/\n\t\t\t\t\t${this.environmentService.getPluginKey()}/admin/structure`;case"task_configuration":return`${this.environmentService.getTaskProviderBaseUrl()}/plugins/servlet/ac/\n\t\t\t\t\t${this.environmentService.getPluginKey()}/admin/taskConfig`;case"project_config":return`${this.environmentService.getTaskProviderBaseUrl()}/plugins/servlet/project-config`;default:throw new Error("There is no such jira server page url key: "+e)}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.L))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);