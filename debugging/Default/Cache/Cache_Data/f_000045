"use strict";(self.webpackChunkppm=self.webpackChunkppm||[]).push([[7420],{2884:(A,p,e)=>{e.d(p,{k:()=>E});var t=e(2859),l=e(98223),a=e(72075),i=e(25337),r=e(94615),o=e(16),c=e(89744),m=e(73921),h=e(62546),u=e(95900),d=e(84046),g=e(83950),T=e(55331),y=e(68890),s=e(94944);function v(n,Z){1&n&&d.GkF(0)}function _(n,Z){if(1&n&&(d.TgZ(0,"a",5),d.YNc(1,v,1,0,"ng-container",6),d.qZA()),2&n){const O=d.oxw(),B=d.MAs(6);d.Q6J("href",O.platformLinkURL,d.LSH),d.xp6(1),d.Q6J("ngTemplateOutlet",B)}}function f(n,Z){if(1&n&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&n){const O=d.oxw();d.xp6(1),d.hij(" ",O.platformName," ")}}function I(n,Z){1&n&&d.GkF(0)}function D(n,Z){if(1&n&&d.YNc(0,I,1,0,"ng-container",6),2&n){d.oxw();const O=d.MAs(6);d.Q6J("ngTemplateOutlet",O)}}function S(n,Z){if(1&n&&(d._UZ(0,"i",9),d.ALo(1,"spRichTextString")),2&n){const O=d.oxw(3);d.Q6J("spTooltipGravity",O.Gravity.NORTH)("spTooltipEnabled",O.tooltipText&&O.configuration.withTooltip)("spTooltip",d.lcZ(1,3,O.tooltipText))}}function M(n,Z){if(1&n&&(d._UZ(0,"img",10),d.ALo(1,"spRichTextString")),2&n){const O=d.oxw(3);d.Q6J("src",O.platformIconURL,d.LSH)("spTooltipGravity",O.Gravity.NORTH)("spTooltipEnabled",O.tooltipText&&O.configuration.withTooltip)("spTooltip",d.lcZ(1,4,O.tooltipText))}}function W(n,Z){if(1&n&&(d.ynx(0),d.YNc(1,S,2,5,"i",7),d.YNc(2,M,2,6,"ng-template",null,8,d.W1O),d.BQk()),2&n){const O=d.MAs(3),B=d.oxw(2);d.xp6(1),d.Q6J("ngIf",B.isBuiltIn)("ngIfElse",O)}}function C(n,Z){if(1&n&&d.YNc(0,W,4,2,"ng-container",2),2&n){const O=d.oxw();d.Q6J("ngIf",O.configuration.withIcon)}}let E=(()=>{class n extends h.H{constructor(O,B,P,R,L,J){super(O,B),this.changeDetectorRef=P,this.environmentService=R,this.extPlatformRepository=L,this.l10nTextService=J,this.isBuiltIn=!1,this.Gravity=u.X,this.builtInFieldDocumentationURL=this.environmentService.getHelpURL(a.m),this.platformsMap=new Map}ngOnChanges(O){O.id&&(this.resolvePlatform(),this.updatePlatformInfo())}ngOnInit(){this.observeExtPlatformsMap()}initializePlatformsWithBuiltInPlatform(){this.platformsMap.set(r.n,i.B.create())}resolvePlatform(){this.platform=this.platformsMap.get(this.id)}observeExtPlatformsMap(){this.extPlatformRepository.selectAsMap().pipe(this.takeUntilDestroy()).subscribe(O=>{this.platformsMap=O,this.initializePlatformsWithBuiltInPlatform(),this.resolvePlatform(),this.updatePlatformInfo(),this.changeDetectorRef.detectChanges()})}updateBuiltInFieldPlatformInfo(){this.platformLinkURL=this.builtInFieldDocumentationURL,this.platformName=o.b,this.domManipulator.addHostClass(`sp-platform-info--${o.b.toLocaleLowerCase()}`)}updateExternalFieldPlatformInfo(){if(!this.platform)return;const O=this.platform;this.platformLinkURL=O.baseURL,this.platformIconURL=O.extPlatformType.iconURL,this.platformName=O.name,this.domManipulator.addHostClass(`sp-platform-info--${this.platform.type.toLocaleLowerCase()}`)}updatePlatformInfo(){this.isBuiltIn=c.c.isBuiltIn(this.platform),this.tooltipText=m.p.resolveTooltipTextFromPlatform(this.l10nTextService,this.platform,this.isBuiltIn),this.isBuiltIn?this.updateBuiltInFieldPlatformInfo():this.updateExternalFieldPlatformInfo()}}return n.\u0275fac=function(O){return new(O||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(g.L),d.Y36(t.G),d.Y36(l.e))},n.\u0275cmp=d.Xpm({type:n,selectors:[["sp-platform-info"]],inputs:{id:"id",dataTypeId:"dataTypeId",configuration:"configuration"},features:[d.qOj,d.TTD],decls:7,vars:3,consts:[[1,"sp-platform-info-container","sp-mr-3"],["target","_blank","class","sp-pr-1 sp-flex sp-items-center",3,"href",4,"ngIf","ngIfElse"],[4,"ngIf"],["withoutLink",""],["icon",""],["target","_blank",1,"sp-pr-1","sp-flex","sp-items-center",3,"href"],[4,"ngTemplateOutlet"],["class","far fa-window sp-built-in-platform-icon sp-flex sp-items-center",3,"spTooltipGravity","spTooltipEnabled","spTooltip",4,"ngIf","ngIfElse"],["extPlatformImage",""],[1,"far","fa-window","sp-built-in-platform-icon","sp-flex","sp-items-center",3,"spTooltipGravity","spTooltipEnabled","spTooltip"],["alt","",1,"sp-external-platform-icon",3,"src","spTooltipGravity","spTooltipEnabled","spTooltip"]],template:function(O,B){if(1&O&&(d.TgZ(0,"span",0),d.YNc(1,_,2,2,"a",1),d.YNc(2,f,2,1,"span",2),d.qZA(),d.YNc(3,D,1,1,"ng-template",null,3,d.W1O),d.YNc(5,C,1,1,"ng-template",null,4,d.W1O)),2&O){const P=d.MAs(4);d.xp6(1),d.Q6J("ngIf",B.configuration.withLinkToPlatform)("ngIfElse",P),d.xp6(1),d.Q6J("ngIf",B.configuration.withName)}},directives:[T.O5,T.tP,y.i9],pipes:[s.C],styles:[".sp-platform-info-container{display:flex}.sp-platform-info-container span{white-space:nowrap;overflow:hidden;text-overflow:clip}.sp-built-in-platform-icon{display:flex;color:var(--primary);height:16px;width:16px}.sp-external-platform-icon{height:16px;width:16px}\n"],encapsulation:2,changeDetection:0}),n})()},83043:(A,p,e)=>{e.d(p,{L:()=>l});var t=e(85105);let l=(()=>{class a{constructor(){}}return a.Builder=class extends t.I{constructor(){super(...arguments),this.isWithIcon=!1,this.isWithName=!0,this.isWithTooltip=!1,this.isWithLinkToPlatform=!1}withIcon(){return this.isWithIcon=!0,this}withName(){return this.isWithName=!0,this}withTooltip(){return this.isWithTooltip=!0,this}withLinkToPlatform(){return this.isWithLinkToPlatform=!0,this}build(){const r=new a;return r.withIcon=this.isWithIcon,r.withName=this.isWithName,r.withTooltip=this.isWithTooltip,r.withLinkToPlatform=this.isWithLinkToPlatform,r}},a})()},27358:(A,p,e)=>{e.d(p,{i:()=>m});var t=e(55331),l=e(86392),a=e(41001),i=e(68890),r=e(1030),o=e(26566),c=e(84046);let m=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=c.oAB({type:h}),h.\u0275inj=c.cJS({imports:[[t.ez,l.D,i.z8,a.J,r.l,o.n]]}),h})()},51086:(A,p,e)=>{e.d(p,{z:()=>t});var t=(()=>{return(l=t||(t={})).JIRACLOUD="JIRACLOUD",l.JIRASERVER="JIRASERVER",l.TRELLO="TRELLO",l.AZUREDEVOPS="AZUREDEVOPS",t;var l})()},74874:(A,p,e)=>{e.d(p,{R:()=>y});var t=e(51086),l=e(62546),a=e(84046),i=e(55331);let r=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275cmp=a.Xpm({type:s,selectors:[["sp-platform-icon-trello"]],decls:1,vars:0,consts:[["src","app/common/assets/images/ext-platform/trello-icon.svg","alt","Trello icon",1,"sp-block","sp-align-middle","sp-w-full","sp-h-full"]],template:function(_,f){1&_&&a._UZ(0,"img",0)},encapsulation:2,changeDetection:0}),s})(),o=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275cmp=a.Xpm({type:s,selectors:[["sp-platform-icon-azure-devops"]],decls:1,vars:0,consts:[["src","app/common/assets/images/ext-platform/azure-devops-icon.svg","alt","Azure Devops icon",1,"sp-block","sp-align-middle","sp-w-full","sp-h-full"]],template:function(_,f){1&_&&a._UZ(0,"img",0)},encapsulation:2,changeDetection:0}),s})(),c=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275cmp=a.Xpm({type:s,selectors:[["sp-platform-icon-jira-cloud"]],decls:1,vars:0,consts:[["src","app/common/assets/images/ext-platform/jira-cloud-icon.svg","alt","Jira Cloud icon",1,"sp-block","sp-align-middle","sp-w-full","sp-h-full"]],template:function(_,f){1&_&&a._UZ(0,"img",0)},encapsulation:2,changeDetection:0}),s})(),m=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275cmp=a.Xpm({type:s,selectors:[["sp-platform-icon-jira-server"]],decls:1,vars:0,consts:[["src","app/common/assets/images/ext-platform/jira-server-icon.svg","alt","Jira Server icon",1,"sp-block","sp-align-middle","sp-w-full","sp-h-full"]],template:function(_,f){1&_&&a._UZ(0,"img",0)},encapsulation:2,changeDetection:0}),s})();function h(s,v){1&s&&a._UZ(0,"sp-platform-icon-trello")}function u(s,v){1&s&&a._UZ(0,"sp-platform-icon-azure-devops")}function d(s,v){1&s&&a._UZ(0,"sp-platform-icon-jira-cloud")}function g(s,v){1&s&&a._UZ(0,"sp-platform-icon-jira-server")}function T(s,v){1&s&&a._UZ(0,"sp-platform-icon-jira-server")}let y=(()=>{class s extends l.H{constructor(_,f){super(_,f),this.PlatformType=t.z}ngOnInit(){this.setHostPlatformTypeClass()}getHostClasses(){return["sp-platform-icon","sp-block","sp-relative","sp-w-4","sp-h-4"]}setHostPlatformTypeClass(){this.domManipulator.addHostClass(`sp-platform-icon--${this.platformType.toLocaleLowerCase()}`)}}return s.\u0275fac=function(_){return new(_||s)(a.Y36(a.SBq),a.Y36(a.Qsj))},s.\u0275cmp=a.Xpm({type:s,selectors:[["sp-platform-icon"]],inputs:{platformType:"platformType"},features:[a.qOj],decls:6,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(_,f){1&_&&(a.ynx(0,0),a.YNc(1,h,1,0,"sp-platform-icon-trello",1),a.YNc(2,u,1,0,"sp-platform-icon-azure-devops",1),a.YNc(3,d,1,0,"sp-platform-icon-jira-cloud",1),a.YNc(4,g,1,0,"sp-platform-icon-jira-server",1),a.YNc(5,T,1,0,"sp-platform-icon-jira-server",2),a.BQk()),2&_&&(a.Q6J("ngSwitch",f.platformType),a.xp6(1),a.Q6J("ngSwitchCase",f.PlatformType.TRELLO),a.xp6(1),a.Q6J("ngSwitchCase",f.PlatformType.AZUREDEVOPS),a.xp6(1),a.Q6J("ngSwitchCase",f.PlatformType.JIRACLOUD),a.xp6(1),a.Q6J("ngSwitchCase",f.PlatformType.JIRASERVER))},directives:[i.RF,i.n9,i.ED,r,o,c,m],encapsulation:2,changeDetection:0}),s})()},45778:(A,p,e)=>{e.d(p,{E:()=>a});var t=e(27609),l=e(84046);let a=(()=>{class i extends t.V{constructor(){super(!1)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},84836:(A,p,e)=>{e.d(p,{$:()=>t});class t{}},2027:(A,p,e)=>{e.d(p,{P:()=>t});class t{}},63023:(A,p,e)=>{e.d(p,{R:()=>c});var t=e(70822),l=e(71726),a=e(85670),i=e(2027),r=e(84046),o=e(38411);let c=(()=>{class m extends i.P{constructor(u){super(),this.boxTypeContainerAccessor=u}clear(){this.boxTypeContainerAccessor.clear()}loadAll(){this.boxTypeContainerAccessor.loadAll()}loadBoxTypeDetails(u){this.boxTypeContainerAccessor.loadBoxTypeDetails(u)}getBoxModuleTypeName(u){try{return a.z.findByType(this.getBoxTypeDetails().getModules(),u).getName()}catch(d){throw new Error(`${u.toString()} module name not found`)}}select(){return this.boxTypeContainerAccessor.select()}selectBoxTypes(){return this.boxTypeContainerAccessor.selectBoxTypes()}getBoxTypeDetails(){return this.boxTypeContainerAccessor.getBoxTypeDetails()}selectBoxTypeDetails(){return this.boxTypeContainerAccessor.selectBoxTypeDetails()}selectBoxTypeId(){return this.boxTypeContainerAccessor.selectBoxTypeDetails().pipe((0,t.h)(Boolean),(0,l.U)(u=>u.getId()))}selectAllAvailableParentBoxTypes(){return this.boxTypeContainerAccessor.selectAllAvailableParentTypes()}create(u){return this.boxTypeContainerAccessor.create(u)}update(u){return this.boxTypeContainerAccessor.update(u)}delete(u){return this.boxTypeContainerAccessor.delete(u)}archive(u){return this.boxTypeContainerAccessor.archive(u)}unarchive(u){return this.boxTypeContainerAccessor.unarchive(u)}duplicate(u){return this.boxTypeContainerAccessor.duplicate(u)}}return m.\u0275fac=function(u){return new(u||m)(r.LFG(o.R))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac}),m})()},86453:(A,p,e)=>{e.d(p,{Q:()=>m});var t=e(83941),l=e(46902),a=e(78609),i=e(9829),r=e(84836),o=e(84046);const m=[{provide:r.$,useClass:(()=>{class h extends r.${constructor(d){super(),this.messageService=d}showSaveSuccessfulMessage(){this.messageService.success(this.getSuccessfulSaveMessageOptions())}getSuccessfulSaveMessageOptions(){return(new l.P).withDefaultsByStatus(i.r.SUCCESS).withBody(t.H.i18n("SPT_ADMIN_BOX_TYPES_SECURITY_BASICS_INHERITANCE_MODE_SUCCESS_MESSAGE"))}}return h.\u0275fac=function(d){return new(d||h)(o.LFG(a.e))},h.\u0275prov=o.Yz7({token:h,factory:h.\u0275fac}),h})()}]},38411:(A,p,e)=>{e.d(p,{R:()=>t});class t{}},90187:(A,p,e)=>{e.d(p,{b:()=>t});class t{constructor(a){this.type=a}static of(a){switch(a){case"OWN":return this.OWN;case"INHERITED":return this.INHERITED;case"OWN_AND_INHERITED":return this.OWN_AND_INHERITED;default:return this.OWN}}static getLabelFor(a){switch(a){case t.OWN:return"SPT_COMMON_BOX_TYPE_INHERITANCE_MODE_OWN";case t.INHERITED:return"SPT_COMMON_BOX_TYPE_INHERITANCE_MODE_INHERITED_ONLY";case t.OWN_AND_INHERITED:return"SPT_COMMON_BOX_TYPE_INHERITANCE_MODE_OWN_AND_INHERITED";default:return"SPT_COMMON_BOX_TYPE_INHERITANCE_MODE_OWN"}}getType(){return this.type}equals(a){return a.getType()===this.getType()}}t.OWN=new t("OWN"),t.INHERITED=new t("INHERITED"),t.OWN_AND_INHERITED=new t("OWN_AND_INHERITED")},26814:(A,p,e)=>{e.d(p,{O:()=>t});var t=(()=>{return(l=t||(t={}))[l.IN_USE=0]="IN_USE",l[l.DRAFT=1]="DRAFT",t;var l})()},70816:(A,p,e)=>{e.d(p,{i:()=>t});class t{constructor(a,i,r,o,c,m,h,u,d,g){this.id=a,this.name=i,this.prefix=r,this.defaultIconId=o,this.description=c,this.readMoreURL=m,this.sequentialityId=h,this.periodModeId=u,this.parentTypeIds=d,this.modules=g}}},7685:(A,p,e)=>{e.d(p,{$Y:()=>l.$,PB:()=>t.P});var t=e(2027),l=e(84836);e(7905)},62614:(A,p,e)=>{e.d(p,{P:()=>l});var t=e(88004);class l{static toString(i){return t._[i].toLowerCase()}}},7905:(A,p,e)=>{e.d(p,{A:()=>se});var t=e(55331),l=e(70335),a=e(41001),i=e(86453),o=(e(25024),e(63855)),c=e(83237),m=e(65702),u=(e(66737),e(26353)),d=e(92945),g=e(89393),T=e(87464),y=e(26566),s=e(28722),v=e(47473),_=e(92944),f=e(84046);let I=(()=>{class V{}return V.\u0275fac=function($){return new($||V)},V.\u0275mod=f.oAB({type:V}),V.\u0275inj=f.cJS({providers:[g.$,T.c],imports:[[t.ez,s.v,v.S,y.n,a.J,_.$]]}),V})();var D=e(48062),S=e(20942);let M=(()=>{class V{}return V.\u0275fac=function($){return new($||V)},V.\u0275mod=f.oAB({type:V}),V.\u0275inj=f.cJS({providers:[D.$,S.A],imports:[[t.ez,v.S,s.v,y.n,a.J]]}),V})();var W=e(90753),C=e(17300),n=(e(26548),e(14217)),Z=e(29583);let O=(()=>{class V{}return V.\u0275fac=function($){return new($||V)},V.\u0275mod=f.oAB({type:V}),V.\u0275inj=f.cJS({imports:[[t.ez,v.S,Z.W,a.J]]}),V})();var B=e(51805),P=e(16171),R=e(51545);let J=(()=>{class V{}return V.\u0275fac=function($){return new($||V)},V.\u0275mod=f.oAB({type:V}),V.\u0275inj=f.cJS({providers:[W.F,n.I,C.G],imports:[[t.ez,d.Bz,B.$,P.n,R.F,M,I,O,s.v.forRoot()]]}),V})();var k=e(34491),x=(e(92697),e(98932),e(19537)),H=e(40131),te=e(68499),ae=e(12002),ue=e(79047),z=e(85013),ne=e(37869),F=e(68890),j=e(2027),de=e(63023);let se=(()=>{class V{}return V.\u0275fac=function($){return new($||V)},V.\u0275mod=f.oAB({type:V}),V.\u0275inj=f.cJS({providers:[{provide:j.P,useClass:de.R},c.b,m.d,u.H,k.r,o._,...i.Q],imports:[[t.ez,l.UX,R.F,ae.K,J,x.Z,ue.C,ne.o,z.D.forRoot(),H.l,_.$,te.L,a.J,y.n,F.z8]]}),V})()},25024:(A,p,e)=>{e.d(p,{J:()=>ve});var t=e(70335),l=e(3809),a=e(47722),i=e(26814),r=e(83237),o=e(34491),c=e(1637);class m extends c.V{resolveRowCssClass(ee){return ee.data.available?[]:["sp-box-type-not-available"]}}var h=e(82171),u=e(88136),d=e(47439),g=e(67177),T=e(64969),y=e(56159),s=e(19327),v=e(83941),_=e(7321),f=e(34322),I=e(79343),D=e(24949),S=e(46902),M=e(78609),W=e(9829),C=e(62546),E=e(95900),n=e(84046),Z=e(92945),O=e(2027),B=e(83950),P=e(15843),R=e(55092),L=e(56023),J=e(55331),k=e(83506),b=e(56293),U=e(41004),x=e(68890),H=e(71783),te=e(66737),ae=e(65799),ue=e(18217),z=e(98932),ne=e(92697),F=e(94944);const j=["infoBoxPBE"];function de(X,ee){if(1&X&&(n.TgZ(0,"div",10),n.TgZ(1,"sp-info-box",11),n._uU(2),n.ALo(3,"spL10nText"),n.TgZ(4,"a",12),n._uU(5),n.ALo(6,"spL10nText"),n.qZA(),n._uU(7,". "),n.qZA(),n.qZA()),2&X){const Y=n.oxw(2);n.xp6(1),n.Q6J("configuration",Y.InfoBoxPBEConfiguration),n.xp6(1),n.hij(" ",n.lcZ(3,4,"SPT_ADMIN_BOX_TYPES_INFO_BOX_MESSAGE")," "),n.xp6(2),n.Q6J("href",Y.BPEMarketplaceLink,n.LSH),n.xp6(1),n.Oqu(n.lcZ(6,6,"SPT_ADMIN_BOX_TYPES_INFO_BOX_LINK"))}}function Q(X,ee){if(1&X&&n.YNc(0,de,8,8,"div",9),2&X){const Y=n.oxw();n.Q6J("ngIf",!Y.isEnterpriseLicenseValid&&Y.isGoBPEAvailable)}}function se(X,ee){1&X&&(n._uU(0),n.ALo(1,"spL10nText")),2&X&&n.hij(" ",n.lcZ(1,1,ee.rawTreeNode.prefix)," ")}function V(X,ee){if(1&X&&(n.TgZ(0,"sp-lozenge",16),n._uU(1),n.ALo(2,"spL10nText"),n.qZA()),2&X){const Y=n.oxw().rawTreeNode;n.uIk("id","sp-archived-tag-"+Y.id),n.xp6(1),n.hij(" ",n.lcZ(2,2,"SPT_ADMIN_BOX_TYPES_TABLE_NAME_ARCHIVED")," ")}}function K(X,ee){if(1&X){const Y=n.EpF();n._UZ(0,"sp-color-presenter",13),n.TgZ(1,"a",14),n.NdJ("click",function(){const Ce=n.CHM(Y).rawTreeNode;return n.oxw().goToDetails(Ce.id)}),n._uU(2),n.ALo(3,"spL10nText"),n.qZA(),n.YNc(4,V,3,4,"sp-lozenge",15)}if(2&X){const Y=ee.rawTreeNode;n.Q6J("color",Y.color),n.xp6(1),n.uIk("id","sp-box-type-crud-name-"+Y.id),n.xp6(1),n.hij(" ",n.lcZ(3,4,Y.name)," "),n.xp6(2),n.Q6J("ngIf",Y.archived)}}function $(X,ee){if(1&X&&(n.ynx(0),n.TgZ(1,"sp-lozenge",19),n.ALo(2,"spRichTextI18n"),n._uU(3),n.ALo(4,"spBoxTypeStatusNamePipe"),n.qZA(),n.BQk()),2&X){const Y=n.oxw().rawTreeNode,re=n.oxw();n.xp6(1),n.Q6J("spTooltip",n.lcZ(2,2,"SPT_ADMIN_BOX_TYPES_TABLE_STATUS_IN_USE_TOOLTIP")),n.xp6(2),n.hij(" ",n.lcZ(4,4,re.boxTypeStatus[Y.status])," ")}}function ce(X,ee){if(1&X&&(n.ynx(0),n.TgZ(1,"sp-lozenge",20),n.ALo(2,"spRichTextI18n"),n._uU(3),n.ALo(4,"spL10nText"),n.qZA(),n.BQk()),2&X){const Y=n.oxw().rawTreeNode,re=n.oxw();n.xp6(1),n.Q6J("spTooltip",n.lcZ(2,2,"SPT_ADMIN_BOX_TYPES_TABLE_STATUS_DRAFT_TOOLTIP")),n.xp6(2),n.hij(" ",n.lcZ(4,4,re.boxTypeStatus[Y.status])," ")}}function fe(X,ee){if(1&X&&(n.ynx(0,17),n.YNc(1,$,5,6,"ng-container",18),n.YNc(2,ce,5,6,"ng-container",18),n.BQk()),2&X){const Y=ee.rawTreeNode,re=n.oxw();n.Q6J("ngSwitch",Y.status),n.xp6(1),n.Q6J("ngSwitchCase",re.boxTypeStatus.IN_USE),n.xp6(1),n.Q6J("ngSwitchCase",re.boxTypeStatus.DRAFT)}}function he(X,ee){if(1&X&&(n.TgZ(0,"div",23),n.TgZ(1,"sp-lozenge",24),n.ynx(2),n._uU(3),n.ALo(4,"spL10nText"),n.BQk(),n.qZA(),n.qZA()),2&X){const Y=ee.$implicit,re=n.oxw(2);n.xp6(1),n.Q6J("color",re.defaultColors.WHITE),n.xp6(2),n.Oqu(n.lcZ(4,2,Y.name))}}function ge(X,ee){if(1&X&&(n.TgZ(0,"div",21),n.ALo(1,"spBoxTypeNamesTooltipPipe"),n.ALo(2,"spRichTextString"),n.ALo(3,"spBoxTypeNamesTooltipPipe"),n.YNc(4,he,5,4,"div",22),n.qZA()),2&X){const Y=ee.rawTreeNode;n.Q6J("spTooltipEnabled",!!n.lcZ(1,3,Y.parentTypes))("spTooltip",n.lcZ(2,5,n.lcZ(3,7,Y.parentTypes))),n.xp6(4),n.Q6J("ngForOf",Y.parentTypes)}}function _e(X,ee){if(1&X&&(n.TgZ(0,"div",25),n.ALo(1,"spRichTextString"),n.TgZ(2,"span"),n._uU(3),n.ALo(4,"spL10nText"),n.qZA(),n.qZA()),2&X){const Y=ee.rawTreeNode;n.Q6J("spTooltipOnOverflow",!0)("spTooltipEnabled",!!Y.description)("spTooltip",n.lcZ(1,4,Y.description)),n.xp6(3),n.Oqu(n.lcZ(4,6,Y.description))}}function Ee(X,ee){if(1&X){const Y=n.EpF();n.TgZ(0,"div",26),n.TgZ(1,"sp-checkbox-swiper",27),n.NdJ("statusChanged",function(pe){return n.CHM(Y),n.oxw().showArchivedBoxTypesValueChanged(pe)}),n.qZA(),n.TgZ(2,"span",28),n._uU(3),n.ALo(4,"spL10nText"),n.qZA(),n.qZA()}if(2&X){const Y=n.oxw();n.xp6(1),n.Q6J("status",Y.isShowArchivedBoxTypesEnabled),n.xp6(2),n.Oqu(n.lcZ(4,2,"SPT_ADMIN_BOX_TYPES_SHOW_TITLE"))}}function ye(X,ee){if(1&X){const Y=n.EpF();n.TgZ(0,"sp-box-type-crud-custom-buttons",29),n.NdJ("archived",function(pe){return n.CHM(Y),n.oxw().archiveBoxType(pe)})("unarchived",function(pe){return n.CHM(Y),n.oxw().unarchiveBoxType(pe)})("duplicated",function(pe){return n.CHM(Y),n.oxw().duplicateBoxType(pe)})("deleted",function(pe){return n.CHM(Y),n.oxw().spCrud.clickInlineDelete(pe)}),n.qZA()}if(2&X){const Y=ee.item,re=n.oxw();n.Q6J("crudItem",Y)("canBoxTypesBeCreatedAndDeleted",re.canBoxTypesBeCreatedAndDeleted)}}let ve=(()=>{class X extends C.H{constructor(Y,re,pe,Ce,we,Pe,De,Ve,Be,Ie,Se){super(Y,re),this.router=pe,this.activatedRoute=Ce,this.changeDetectorRef=we,this.localStorageService=Pe,this.licenseService=De,this.containerService=Ve,this.environmentService=Be,this.messageService=Ie,this.applicationFeatures=Se,this.class="sp-box-type-configuration-root",this.InfoBoxPBEConfiguration=(new D.H.Builder).withDefaultsByStatus(W.r.WARNING).withTitle("SPT_ADMIN_BOX_TYPES_INFO_BOX_TITLE").build(),this.gravity=E.X,this.boxTypeStatus=i.O,this.defaultColors=s.B,this.idPrefix="sp-archived-tag-",this.nameMaxLength=70,this.boxTypePrefixMaxLength=5,this.validators={name:[t.kI.required,f.Z.validateMaxLength(this.nameMaxLength),f.Z.validateMinLength(1)],boxTypePrefix:[t.kI.required,f.Z.validateMaxLength(this.boxTypePrefixMaxLength),I.c.validateContains(h.h.regExp,h.h.errorMessage)],boxTypeIcon:[t.kI.required]}}ngOnInit(){this.observeBoxTypeLimit(),this.isShowArchivedBoxTypesEnabled=this.localStorageService.getShowArchivedBoxTypesValue(),this.isGoBPEAvailable=this.applicationFeatures.getFeatures().isGoBPEAvailable(),this.containerService.loadAll(),this.createCrudConfiguration(),this.getEnterpriseLicense(),this.getBPEMarketplaceLink()}goToDetails(Y){this.router.navigate([Y],{relativeTo:this.activatedRoute})}showArchivedBoxTypesValueChanged(Y){this.localStorageService.setShowArchivedBoxTypesValue(Y.status),this.spCrud.reloadAllData()}archiveBoxType(Y){const re=new a.n(Y),pe=(new S.P).withTitle("SPT_ADMIN_BOX_TYPES_ARCHIVE_TITLE").withBody(v.H.i18n("SPT_ADMIN_BOX_TYPES_ARCHIVE_TEXT"));this.containerService.archive(re).pipe(this.takeUntilDestroy()).subscribe(()=>{this.messageService.info(pe),this.spCrud.reloadAllData()})}unarchiveBoxType(Y){const re=new a.n(Y);this.containerService.unarchive(re).pipe(this.takeUntilDestroy()).subscribe(()=>{this.spCrud.reloadAllData()})}duplicateBoxType(Y){const re=new a.n(Y);this.containerService.duplicate(re).pipe(this.takeUntilDestroy()).subscribe(()=>{this.spCrud.reloadAllData()})}createCrudConfiguration(){this.crudConfiguration=d.m.default().withDictionary(T.B.default().withModalDictionary({create:{title:"SPT_ADMIN_BOX_TYPES_ADD_FORM_HEADER",submitBtnText:"SPT_ADMIN_BOX_TYPES_ADD_FORM_BUTTON_CREATE"}}).withHeaderActionDictionary({create:{text:"SPT_ADMIN_BOX_TYPES_ADD_TITLE",id:"sp-box-type-configuration-create-btn",tooltip:{onDisabled:"SPT_ADMIN_BOX_TYPES_ADD_DISABLED_TOOLTIP"}}})).withCreateButtonPrimaryClass(!0).withHeader("SPT_ADMIN_BOX_TYPES_HEADER").withTooltipOnQuestionMark("SPT_COMMON_READ_MORE_IN_DOCUMENTATION_TOOLTIP").withDescription(this.getDescription()).withFieldsConfiguration(this.addBoxTypeModalFieldsConfiguration()).withInlineActions(null).withDocumentationLink(this.getDocumentationLink()).withViewPortRender(!0).withCustomHeaderSectionOnTheLeft(this.infoBoxPBE).withNodesCssClassResolver(new m).withDisabled({create:!0})}addBoxTypeModalFieldsConfiguration(){return[{controlName:"name",label:"SPT_ADMIN_BOX_TYPES_ADD_FORM_LABEL_NAME",type:_.E.TEXT,validators:this.validators.name,id:"sp-modal-form-field-name"},{controlName:"boxTypePrefix",label:"SPT_ADMIN_BOX_TYPES_ADD_FORM_LABEL_PREFIX",type:_.E.TEXT,validators:this.validators.boxTypePrefix,id:"sp-modal-form-field-prefix"},{controlName:"boxTypeIcon",label:"SPT_ADMIN_BOX_TYPES_ADD_FORM_LABEL_ICON",type:_.E.COLORED_ICON_PICKER,validators:this.validators.boxTypeIcon,value:l.D.DEFAULT,id:"sp-modal-form-field-icon"}]}getEnterpriseLicense(){this.isGoBPEAvailable&&this.licenseService.selectLicense().pipe(this.takeUntilDestroy()).subscribe(Y=>{this.isEnterpriseLicenseValid=Y.isEnterprise(),this.changeDetectorRef.detectChanges()})}getDescription(){return v.H.i18n("SPT_ADMIN_BOX_TYPES_DESCRIPTION")}getDocumentationLink(){return this.environmentService.getHelpURL("ppm/box-types")}getBPEMarketplaceLink(){this.BPEMarketplaceLink=this.environmentService.getHelpURL("atlassian-marketplace/bigpicture-enterprise")}observeBoxTypeLimit(){this.containerService.select().pipe(this.takeUntilDestroy()).subscribe(Y=>{this.canBoxTypesBeCreatedAndDeleted=Y.getCanBoxTypesBeCreatedAndDeleted(),this.crudConfiguration&&(this.crudConfiguration=this.crudConfiguration.withDisabled({create:!this.canBoxTypesBeCreatedAndDeleted})),this.changeDetectorRef.detectChanges()})}}return X.\u0275fac=function(Y){return new(Y||X)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(Z.F0),n.Y36(Z.gz),n.Y36(n.sBO),n.Y36(o.r),n.Y36(u.ER),n.Y36(O.P),n.Y36(B.L),n.Y36(M.e),n.Y36(P.x))},X.\u0275cmp=n.Xpm({type:X,selectors:[["sp-box-type-configuration-root"]],viewQuery:function(Y,re){if(1&Y&&(n.Gf(y.D,7),n.Gf(j,7)),2&Y){let pe;n.iGM(pe=n.CRH())&&(re.spCrud=pe.first),n.iGM(pe=n.CRH())&&(re.infoBoxPBE=pe.first)}},hostVars:2,hostBindings:function(Y,re){2&Y&&n.Tol(re.class)},features:[n._Bn([{provide:g.g,useClass:r.b}]),n.qOj],decls:22,vars:17,consts:[[3,"config"],["infoBoxPBE",""],["flex","0 1 8%",3,"header"],["flex","0 1 17%",3,"header"],["flex","0 1 10%",3,"header"],["flex","0 1 20%",3,"header"],["flex","0 1 30%",3,"header","disableResize"],["type","modal"],["type","inline"],["id","sp-box-type-configuration-info-box-bpe","class","sp-pb-2",4,"ngIf"],["id","sp-box-type-configuration-info-box-bpe",1,"sp-pb-2"],[3,"configuration"],["target","_blank",3,"href"],[1,"sp-mr-2",3,"color"],["target","_blank",3,"click"],["class","sp-ml-2",4,"ngIf"],[1,"sp-ml-2"],[3,"ngSwitch"],[4,"ngSwitchCase"],["color","GREEN",3,"spTooltip"],["color","BLUE",3,"spTooltip"],[1,"sp-box-parent-types-container","sp-flex",3,"spTooltipEnabled","spTooltip"],["class","sp-mr-1",4,"ngFor","ngForOf"],[1,"sp-mr-1"],[3,"color"],["id","sp-box-type-description-container",1,"sp-box-type-description-container",3,"spTooltipOnOverflow","spTooltipEnabled","spTooltip"],[1,"sp-custom-modal-button-container","sp-flex","sp-items-center"],["idPrefix","sp-show-archive-box-types",3,"status","statusChanged"],[1,"sp-pl-2","sp-pr-3"],[3,"crudItem","canBoxTypesBeCreatedAndDeleted","archived","unarchived","duplicated","deleted"]],template:function(Y,re){1&Y&&(n.TgZ(0,"sp-crud",0),n.YNc(1,Q,1,1,"ng-template",null,1,n.W1O),n.TgZ(3,"sp-crud-column",2),n.ALo(4,"spL10nText"),n.YNc(5,se,2,3,"ng-template"),n.qZA(),n.TgZ(6,"sp-crud-column",3),n.ALo(7,"spL10nText"),n.YNc(8,K,5,6,"ng-template"),n.qZA(),n.TgZ(9,"sp-crud-column",4),n.ALo(10,"spL10nText"),n.YNc(11,fe,3,3,"ng-template"),n.qZA(),n.TgZ(12,"sp-crud-column",5),n.ALo(13,"spL10nText"),n.YNc(14,ge,5,9,"ng-template"),n.qZA(),n.TgZ(15,"sp-crud-column",6),n.ALo(16,"spL10nText"),n.YNc(17,_e,5,8,"ng-template"),n.qZA(),n.TgZ(18,"sp-crud-custom-buttons",7),n.YNc(19,Ee,5,4,"ng-template"),n.qZA(),n.TgZ(20,"sp-crud-custom-buttons",8),n.YNc(21,ye,1,2,"ng-template"),n.qZA(),n.qZA()),2&Y&&(n.Q6J("config",re.crudConfiguration),n.xp6(3),n.Q6J("header",n.lcZ(4,7,"SPT_ADMIN_BOX_TYPES_TABLE_HEADER_PREFIX")),n.xp6(3),n.Q6J("header",n.lcZ(7,9,"SPT_ADMIN_BOX_TYPES_TABLE_HEADER_NAME")),n.xp6(3),n.Q6J("header",n.lcZ(10,11,"SPT_ADMIN_BOX_TYPES_TABLE_HEADER_STATUS")),n.xp6(3),n.Q6J("header",n.lcZ(13,13,"SPT_ADMIN_BOX_TYPES_TABLE_HEADER_PARENT_TYPES")),n.xp6(3),n.Q6J("header",n.lcZ(16,15,"SPT_ADMIN_BOX_TYPES_TABLE_HEADER_DESCRIPTION"))("disableResize",!0))},directives:[y.D,R.U,L.h,J.O5,k.I,b.W,U.H,J.RF,J.n9,x.i9,J.sg,H.l,te.P],pipes:[ae.L,ue.d,z.Z,ne.L,F.C],styles:["sp-box-type-configuration-root{display:flex;flex-direction:column;flex:1 0 auto}sp-box-type-configuration-root.sp-panel{margin-top:0}sp-box-type-configuration-root .sp-box-parent-types-container{width:100%}sp-box-type-configuration-root .sp-box-type-icon{width:16px;height:16px;font-size:8px}sp-box-type-configuration-root .sp-box-type-not-available{opacity:.3}sp-box-type-configuration-root .sp-box-type-not-available a,sp-box-type-configuration-root .sp-box-type-not-available button{pointer-events:none}sp-box-type-configuration-root .sp-box-type-description-container{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),X})()},63855:(A,p,e)=>{e.d(p,{_:()=>a});var t=e(84046),l=e(2027);let a=(()=>{class i{constructor(o){this.containerService=o}canDeactivate(){return this.containerService.clear(),!0}}return i.\u0275fac=function(o){return new(o||i)(t.LFG(l.P))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})()},99904:(A,p,e)=>{e.d(p,{K:()=>l});const l=new(e(84046).OlP)("BOX_TYPE_CONFIGURATION_ROUTES_TOKEN")},83237:(A,p,e)=>{e.d(p,{b:()=>h});var t=e(47722),l=e(65702),a=e(26353),i=e(34491),r=e(71726),o=e(67177),c=e(84046),m=e(2027);let h=(()=>{class u extends o.g{constructor(g,T,y,s){super(),this.boxTypeService=g,this.boxTypeCrudItemConverter=T,this.localStorageService=y,this.createBoxTypeRequestConverter=s}getItems(){return this.boxTypeService.selectBoxTypes().pipe((0,r.U)(g=>{const T=this.boxTypeCrudItemConverter.toCrudItems(g,!0);return this.getCrudItemsDependOnArchivedValue(T)}))}createItem(g){return this.boxTypeService.create(this.createBoxTypeRequestConverter.toDTO(g)).pipe((0,r.U)(T=>this.boxTypeCrudItemConverter.toCrudItem(T)))}updateItem(){return null}removeItem(g){const T=new t.n(g.id);return this.boxTypeService.delete(T)}getCrudItemsDependOnArchivedValue(g){return this.localStorageService.getShowArchivedBoxTypesValue()?g:g.filter(T=>!T.archived)}}return u.\u0275fac=function(g){return new(g||u)(c.LFG(m.P),c.LFG(l.d),c.LFG(i.r),c.LFG(a.H))},u.\u0275prov=c.Yz7({token:u,factory:u.\u0275fac}),u})()},92487:(A,p,e)=>{e.d(p,{Q:()=>l});var t=e(47722);class l{constructor(i,r,o,c,m,h,u,d,g){this.id=i,this.name=r,this.prefix=o,this.color=c,this.description=m,this.archived=h,this.status=u,this.parentTypes=d,this.available=g}equals(i){return this.id===i.id}isDeleteDisabled(){return!1}isEditDisabled(){return!1}isRootBoxType(){return new t.n(this.id).isRoot()}}},65702:(A,p,e)=>{e.d(p,{d:()=>a});var t=e(92487),l=e(84046);let a=(()=>{class i{static sortByNameAndAvailability(o,c){const m=d=>d.getAvailable(),h=m(o),u=m(c);return h&&!u?-1:!h&&u?1:i.sortByName(o,c)}static sortByName(o,c){const m=d=>d.getName().toLowerCase(),h=m(o),u=m(c);return h<u?-1:h>u?1:0}toCrudItem(o){return new t.Q(o.getId().toString(),o.getName(),o.getPrefix().toString(),o.getColor(),o.getDescription(),o.isArchived(),o.getStatus(),o.getParentTypes(),o.getAvailable())}toCrudItems(o,c){return c&&(o=o.filter(m=>!m.getId().isRoot())),o.sort(i.sortByNameAndAvailability).map(this.toCrudItem)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},66737:(A,p,e)=>{e.d(p,{P:()=>s});var t=e(84046),l=e(26814),i=(e(92487),e(95900)),r=e(62546),o=e(68890),c=e(34909),m=e(55331),h=e(9400),u=e(18217),d=e(65799);function g(v,_){if(1&v){const f=t.EpF();t.ynx(0),t.TgZ(1,"button",5),t.NdJ("click",function(){t.CHM(f);const D=t.oxw();return D.unarchived.emit(D.crudItem.id)}),t.ALo(2,"spRichTextI18n"),t._UZ(3,"i",6),t.qZA(),t.BQk()}if(2&v){const f=t.oxw();t.xp6(1),t.Q6J("spTooltip",t.lcZ(2,2,"SPT_ADMIN_CRUD_CONFIG_UNDO_TOOLTIP")),t.uIk("id","sp-box-type-crud-undo-archived-button-"+f.crudItem.id)}}function T(v,_){if(1&v){const f=t.EpF();t.ynx(0),t.TgZ(1,"button",7),t.NdJ("spConfirmDialogOnSubmit",function(){t.CHM(f);const D=t.oxw();return D.archived.emit(D.crudItem.id)}),t.ALo(2,"spRichTextI18n"),t.ALo(3,"spL10nText"),t.ALo(4,"spL10nText"),t._UZ(5,"i",8),t.qZA(),t.BQk()}if(2&v){const f=t.oxw();t.xp6(1),t.Q6J("spTooltip",t.lcZ(2,5,"SPT_ADMIN_CRUD_CONFIG_ARCHIVE_TOOLTIP"))("spConfirmDialogConfirmButtonTitle",t.lcZ(3,7,"SPT_ADMIN_CRUD_CONFIG_ARCHIVE_CONFIRM_TITLE"))("spConfirmDialogMessage",t.lcZ(4,9,"SPT_ADMIN_CRUD_CONFIG_ARCHIVE_CONFIRM_MESSAGE"))("spConfirmDialogGravity",f.gravity.WEST),t.uIk("id",f.idPrefix+f.crudItem.id)}}function y(v,_){if(1&v){const f=t.EpF();t.TgZ(0,"div",9),t.ALo(1,"spRichTextI18n"),t.TgZ(2,"button",10),t.NdJ("spConfirmDialogOnSubmit",function(){t.CHM(f);const D=t.oxw();return D.deleted.emit(D.crudItem)}),t.ALo(3,"spRichTextI18n"),t.ALo(4,"spL10nText"),t.ALo(5,"spL10nText"),t._UZ(6,"i",11),t.qZA(),t.qZA()}if(2&v){const f=t.oxw();t.Q6J("spTooltipEnabled",!f.canBoxTypesBeCreatedAndDeleted&&f.crudItem.available)("spTooltip",t.lcZ(1,8,"SPT_ADMIN_CRUD_CONFIG_DELETE_TOOLTIP")),t.xp6(2),t.Q6J("disabled",!f.canBoxTypesBeCreatedAndDeleted&&f.crudItem.available)("spTooltip",t.lcZ(3,10,"SPT_ADMIN_CRUD_CONFIG_DELETE_BUTTON_TOOLTIP"))("spConfirmDialogConfirmButtonTitle",t.lcZ(4,12,"SPT_ADMIN_CRUD_CONFIG_DELETE_BUTTON_CONFIRM_TITLE"))("spConfirmDialogMessage",t.lcZ(5,14,"SPT_ADMIN_CRUD_CONFIG_DELETE_BUTTON_CONFIRM_MESSAGE"))("spConfirmDialogGravity",f.gravity.WEST),t.uIk("id","sp-box-type-crud-delete-button-"+f.crudItem.id)}}let s=(()=>{class v extends r.H{constructor(f,I){super(f,I),this.archived=new t.vpe,this.unarchived=new t.vpe,this.deleted=new t.vpe,this.duplicated=new t.vpe,this.gravity=i.X,this.boxTypeStatus=l.O,this.idPrefix="sp-archive-button-"}ngOnChanges(f){f.crudItem&&f.crudItem.currentValue&&(this.isUnarchivedButtonVisible=!0===this.crudItem.archived,this.isArchivedButtonVisible=this.crudItem.status===this.boxTypeStatus.IN_USE&&!1===this.crudItem.archived,this.isDeleteButtonVisible=this.crudItem.status===this.boxTypeStatus.DRAFT&&!1===this.crudItem.archived)}}return v.\u0275fac=function(f){return new(f||v)(t.Y36(t.SBq),t.Y36(t.Qsj))},v.\u0275cmp=t.Xpm({type:v,selectors:[["sp-box-type-crud-custom-buttons"]],inputs:{crudItem:"crudItem",canBoxTypesBeCreatedAndDeleted:"canBoxTypesBeCreatedAndDeleted"},outputs:{archived:"archived",unarchived:"unarchived",deleted:"deleted",duplicated:"duplicated"},features:[t.qOj,t.TTD],decls:8,vars:12,consts:[[1,"sp-duplicate-button-container",3,"spTooltipEnabled","spTooltip"],["sp-button","","subtle","",1,"sp-custom-btn",3,"spTooltip","disabled","click"],[1,"fas","fa-copy"],[4,"ngIf"],["class","sp-delete-button-container",3,"spTooltipEnabled","spTooltip",4,"ngIf"],["sp-button","","subtle","",1,"sp-custom-btn",3,"spTooltip","click"],[1,"fas","fa-undo"],["sp-button","","subtle","",1,"sp-custom-btn",3,"spTooltip","spConfirmDialog","spConfirmDialogConfirmButtonTitle","spConfirmDialogMessage","spConfirmDialogGravity","spConfirmDialogOnSubmit"],[1,"fas","fa-archive"],[1,"sp-delete-button-container",3,"spTooltipEnabled","spTooltip"],["sp-button","","subtle","",1,"sp-custom-btn",3,"disabled","spTooltip","spConfirmDialog","spConfirmDialogConfirmButtonTitle","spConfirmDialogMessage","spConfirmDialogGravity","spConfirmDialogOnSubmit"],[1,"fas","fa-trash"]],template:function(f,I){1&f&&(t.TgZ(0,"div",0),t.ALo(1,"spRichTextI18n"),t.TgZ(2,"button",1),t.NdJ("click",function(){return I.duplicated.emit(I.crudItem.id)}),t.ALo(3,"spRichTextI18n"),t._UZ(4,"i",2),t.qZA(),t.qZA(),t.YNc(5,g,4,4,"ng-container",3),t.YNc(6,T,6,11,"ng-container",3),t.YNc(7,y,7,16,"div",4)),2&f&&(t.Q6J("spTooltipEnabled",!I.canBoxTypesBeCreatedAndDeleted&&I.crudItem.available)("spTooltip",t.lcZ(1,8,"SPT_ADMIN_CRUD_CONFIG_DUPLICATE_TOOLTIP")),t.xp6(2),t.Q6J("spTooltip",t.lcZ(3,10,"SPT_ADMIN_CRUD_CONFIG_DUPLICATE_BUTTON_TOOLTIP"))("disabled",!I.canBoxTypesBeCreatedAndDeleted&&I.crudItem.available),t.uIk("id","sp-box-type-crud-duplicate-button-"+I.crudItem.id),t.xp6(3),t.Q6J("ngIf",I.isUnarchivedButtonVisible),t.xp6(1),t.Q6J("ngIf",I.isArchivedButtonVisible),t.xp6(1),t.Q6J("ngIf",I.isDeleteButtonVisible))},directives:[o.i9,c.r,m.O5,h.b],pipes:[u.d,d.L],styles:["sp-crud .sp-btn-group>* .sp-btn.sp-custom-btn{width:32px;border-radius:var(--border-radius-m)}sp-crud sp-box-type-crud-custom-buttons .sp-duplicate-button-container,sp-crud sp-box-type-crud-custom-buttons .sp-delete-button-container{display:inline-block}\n"],encapsulation:2,changeDetection:0}),v})()},26353:(A,p,e)=>{e.d(p,{H:()=>i});var t=e(20978);class l{constructor(o,c,m){this.name=o,this.boxPrefix=c,this.defaultIconId=m}}var a=e(84046);let i=(()=>{class r{constructor(c){this.iconConverter=c}toDTO(c){return new l(c.name,c.boxTypePrefix,this.iconConverter.toString(c.boxTypeIcon))}}return r.\u0275fac=function(c){return new(c||r)(a.LFG(t.I))},r.\u0275prov=a.Yz7({token:r,factory:r.\u0275fac}),r})()},90753:(A,p,e)=>{e.d(p,{F:()=>c});var t=e(62614),l=e(99904),a=e(7289),i=e(75779),r=e(8560),o=e(84046);let c=(()=>{class m{constructor(u){this.routes=u}getItems(u){const d=[];return this.routes.forEach(g=>{g instanceof a.nx&&this.getModuleConfigurationsMatchingRoute(g,u).forEach(T=>{d.push(this.createBoxModuleTabGroup(g,T))}),g instanceof a.tU&&d.push(this.createRegularTabGroup(g))}),d}getModuleConfigurationsMatchingRoute(u,d){return d.filter(g=>g.getType()===u.moduleType&&g.isActive())}createBoxModuleTabGroup(u,d){return new r.g(d.getName(),this.toTabs(u.children,g=>this.toModuleTab(g,d)),null,u.moduleIcon,u.path)}createRegularTabGroup(u){return new r.g(u.name,this.toTabs(u.children,d=>this.toRegularTab(d,u)),u.visibilityGuard,void 0,u.path)}toTabs(u,d){return u.filter(g=>g instanceof a.n4).map(d)}toModuleTab(u,d){const g=t.P.toString(d.getType()),T=d.getType().toString();return new i.L(u.name,`${g}/${T}/${u.path}`,u.visibilityGuard)}toRegularTab(u,d){return new i.L(u.name,`${d.path}/${u.path}`,u.visibilityGuard)}}return m.\u0275fac=function(u){return new(u||m)(o.LFG(l.K))},m.\u0275prov=o.Yz7({token:m,factory:m.\u0275fac}),m})()},17300:(A,p,e)=>{e.d(p,{G:()=>m});var t=e(85670),l=e(71726),a=e(45635),i=e(71118),r=e(84046),o=e(2027),c=e(92945);let m=(()=>{class h{constructor(d,g){this.containerService=d,this.router=g}canActivate(d,g){const T=d.routeConfig;return this.containerService.selectBoxTypeDetails().pipe((0,l.U)(y=>{const s=t.z.findByType(y.getModules(),T.moduleType);return i.l.isDefined(s)&&s.isActive()}),(0,a.b)(y=>!y&&this.redirectToBoxTypeConfigurationDetails(d)))}redirectToBoxTypeConfigurationDetails(d){const g=d.parent.url.join("/");this.router.navigate([g])}}return h.\u0275fac=function(d){return new(d||h)(r.LFG(o.P),r.LFG(c.F0))},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac}),h})()},26548:(A,p,e)=>{e.d(p,{J:()=>s});var t=e(90753),l=e(55611),a=e(74386),i=e(62546),r=e(84046),o=e(92945),c=e(2027),m=e(55331),h=e(26463),u=e(6961),d=e(34909);function g(v,_){if(1&v){const f=r.EpF();r.TgZ(0,"button",12),r.NdJ("click",function(){return r.CHM(f),r.oxw(2).toggleMobileMenu()}),r._UZ(1,"i",13),r.qZA()}}function T(v,_){if(1&v){const f=r.EpF();r.TgZ(0,"button",14),r.NdJ("click",function(){return r.CHM(f),r.oxw(2).toggleMobileMenu()}),r._UZ(1,"i",15),r.qZA()}}function y(v,_){if(1&v&&(r.TgZ(0,"div",2),r.TgZ(1,"div",3),r.TgZ(2,"div",4),r.TgZ(3,"a",5),r._UZ(4,"i",6),r.qZA(),r.TgZ(5,"h2",7),r._uU(6),r.qZA(),r.YNc(7,g,2,0,"button",8),r.qZA(),r.YNc(8,T,2,0,"button",9),r._UZ(9,"sp-vertical-tab-menu",10),r.qZA(),r.TgZ(10,"div",11),r._UZ(11,"router-outlet"),r.qZA(),r.qZA()),2&v){const f=r.oxw();r.xp6(1),r.ekj("sp-box-type-details-menu-container--is-open",f.isActive),r.xp6(2),r.Q6J("spNavigationLink",f.navigateBackToList.bind(f)),r.xp6(2),r.ekj("sp-hidden",!f.isActive),r.xp6(1),r.Oqu(f.boxType.getName()),r.xp6(1),r.Q6J("ngIf",f.isActive),r.xp6(1),r.Q6J("ngIf",!f.isActive),r.xp6(1),r.ekj("sp-hidden",!f.isActive),r.Q6J("items",f.menuItems)}}let s=(()=>{class v extends i.H{constructor(f,I,D,S,M,W,C){super(f,I),this.route=D,this.changeDetectorRef=S,this.containerService=M,this.router=W,this.menuItemsAccessor=C,this.isActive=!1}ngOnInit(){this.selectBoxTypeDetails()}navigateBackToList(){const f=this.router.createUrlTree(["../"],{relativeTo:this.route}),I=this.router.serializeUrl(f);this.router.navigate([I])}toggleMobileMenu(){this.toggleMobileMenuState(),this.changeDetectorRef.detectChanges()}getHostClasses(){return["sp-relative"]}toggleMobileMenuState(){this.isActive=!this.isActive}selectBoxTypeDetails(){this.containerService.selectBoxTypeDetails().pipe(this.takeUntilDestroy()).subscribe(f=>{this.boxType=f,this.menuItems=this.menuItemsAccessor.getItems(this.boxType.getModules()),this.changeDetectorRef.detectChanges()})}}return v.\u0275fac=function(f){return new(f||v)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(o.gz),r.Y36(r.sBO),r.Y36(c.P),r.Y36(o.F0),r.Y36(t.F))},v.\u0275cmp=r.Xpm({type:v,selectors:[["sp-box-type-configuration-details-root"]],features:[r._Bn([{provide:a.$,useClass:l.j}]),r.qOj],decls:2,vars:3,consts:[["class","sp-box-type-details-container sp-ml-12 lg:sp-ml-0","id","sp-box-type-details-container",4,"ngIf"],[1,"sp-block","lg:!sp-hidden","sp-absolute","sp-w-full","sp-h-full","sp-z-1",3,"click"],["id","sp-box-type-details-container",1,"sp-box-type-details-container","sp-ml-12","lg:sp-ml-0"],[1,"sp-box-type-details-menu-container","sp-z-2","sp-bg-gray-20","sp-dark:bg-gray-20","sp-px-0","lg:sp-p-4","sp-mr-4"],[1,"sp-back-to-list-link","sp-flex","sp-items-center","sp-relative","lg:sp-mb-4"],[1,"sp-w-8","sp-h-8","sp-inline-grid","sp-place-items-center",3,"spNavigationLink"],[1,"fas","fa-chevron-left"],["id","sp-box-type-configuration-type-name",1,"sp-box-type-name","sp-font-medium","sp-hidden","lg:!sp-block","sp-mb-0"],["class","sp-block lg:!sp-hidden sp-p-0 sp-box-type-configuration__close","sp-button","",3,"click",4,"ngIf"],["class","sp-block lg:!sp-hidden sp-p-0","sp-button","",3,"click",4,"ngIf"],[1,"lg:sp-block",3,"items"],[1,"sp-box-type-details-content"],["sp-button","",1,"sp-block","lg:!sp-hidden","sp-p-0","sp-box-type-configuration__close",3,"click"],[1,"fas","fa-times"],["sp-button","",1,"sp-block","lg:!sp-hidden","sp-p-0",3,"click"],[1,"fas","fa-bars"]],template:function(f,I){1&f&&(r.YNc(0,y,12,11,"div",0),r.TgZ(1,"div",1),r.NdJ("click",function(){return I.toggleMobileMenu()}),r.qZA()),2&f&&(r.Q6J("ngIf",I.boxType),r.xp6(1),r.ekj("sp-hidden",!I.isActive))},directives:[m.O5,h.k,u.d,o.lC,d.r],styles:[".sp-box-type-configuration__close{position:absolute;right:0}sp-box-type-configuration-details-root{display:flex;flex-direction:column;flex:1 0 auto}sp-box-type-configuration-details-root .sp-box-type-details-container{display:flex;flex:1 0 auto}sp-box-type-configuration-details-root .sp-box-type-details-container .sp-box-type-details-menu-container{flex:0 0 auto;border-radius:var(--border-radius-m);height:100%;transition:width .3s ease;position:absolute;left:0;width:32px;overflow:hidden}sp-box-type-configuration-details-root .sp-box-type-details-container .sp-box-type-details-menu-container--is-open{width:272px;box-shadow:4px 0 8px #091e421a}@media (min-width: 1024px){sp-box-type-configuration-details-root .sp-box-type-details-container .sp-box-type-details-menu-container{width:272px;height:initial;position:initial;overflow:initial}}sp-box-type-configuration-details-root .sp-box-type-details-container .sp-box-type-details-menu-container .sp-back-to-list-link .sp-box-type-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}sp-box-type-configuration-details-root .sp-box-type-details-container .sp-box-type-details-content{width:100%;overflow-x:auto;flex:1}sp-box-type-configuration-details-root .sp-box-type-details-container sp-form{display:block}sp-box-type-configuration-details-root .sp-box-type-details-container .sp-treegrid-edit-row sp-form{display:block;max-width:initial}sp-box-type-configuration-details-root .sp-back-to-list-link a:hover{text-decoration:none}sp-box-type-configuration-details-root .sp-back-to-list-link .sp-box-type-name{line-height:24px;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}sp-box-type-configuration-details-root .sp-back-to-list-link i{color:var(--gray-100);font-size:16px}\n"],encapsulation:2}),v})()},7289:(A,p,e)=>{e.d(p,{tU:()=>i,nx:()=>r,n4:()=>o});var t=e(62614),l=e(17300),a=e(89787);class i extends a.w{constructor(m,h,u=null){super(h),this.name=m,this.visibilityGuard=u}}class r extends a.w{constructor(m,h,u){super(r.processRouteConfig(u,m)),this.moduleType=m,this.moduleIcon=h}static processRouteConfig(m,h){return Object.assign(Object.assign({},m),{path:`${t.P.toString(h)}/:boxModuleId`,canActivate:[l.G]})}}class o extends a.w{constructor(m,h,u=null){super(h),this.name=m,this.visibilityGuard=u}}},14217:(A,p,e)=>{e.d(p,{I:()=>m});var t=e(71726),l=e(45635),a=e(71118),i=e(47722),r=e(84046),o=e(2027),c=e(92945);let m=(()=>{class h{constructor(d,g){this.containerService=d,this.router=g}canActivate(d){const g=new i.n(d.paramMap.get("id"));return null===this.containerService.getBoxTypeDetails()&&this.containerService.loadBoxTypeDetails(g),this.containerService.selectBoxTypeDetails().pipe((0,t.U)(y=>a.l.isDefined(y)&&y.getAvailable()),(0,l.b)(y=>{y||(this.containerService.clear(),this.redirectToBoxTypeConfiguration(d))}))}canDeactivate(){return this.containerService.clear(),!0}redirectToBoxTypeConfiguration(d){const g=d.parent.url.join("/");this.router.navigate([g])}}return h.\u0275fac=function(d){return new(d||h)(r.LFG(o.P),r.LFG(c.F0))},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac}),h})()},89393:(A,p,e)=>{e.d(p,{$:()=>c});var t=e(87464),l=e(63833),a=e(98274),i=e(43234),r=e(84046),o=e(2027);let c=(()=>{class m extends i.y{constructor(u,d){super(),this.containerService=u,this.updateRequestConverter=d}submit(u){return this.containerService.selectBoxTypeDetails().pipe((0,l.q)(1),(0,a.w)(d=>{const g=this.updateRequestConverter.toDTO(u,d);return this.containerService.update(g)}))}}return m.\u0275fac=function(u){return new(u||m)(r.LFG(o.P),r.LFG(t.c))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac}),m})()},87464:(A,p,e)=>{e.d(p,{c:()=>r});var t=e(20978),l=e(70816),a=e(84046),i=e(33847);let r=(()=>{class o{constructor(m,h){this.moduleRequestConverter=m,this.iconConverter=h}toDTO(m,h){return new l.i(h.getId().toString(),h.getName(),h.getPrefix().toString(),this.iconConverter.toStringFrom(h),h.getDescription(),m.readMoreUrl,m.sequentialityId,m.periodModeId,h.getParentTypes().map(u=>u.getId().toString()),this.moduleRequestConverter.toModuleRequestArray(h.getModules()))}}return o.\u0275fac=function(m){return new(m||o)(a.LFG(i.j),a.LFG(t.I))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac}),o})()},48062:(A,p,e)=>{e.d(p,{$:()=>c});var t=e(20942),l=e(63833),a=e(98274),i=e(43234),r=e(84046),o=e(2027);let c=(()=>{class m extends i.y{constructor(u,d){super(),this.containerService=u,this.updateRequestConverter=d}submit(u){return this.containerService.selectBoxTypeDetails().pipe((0,l.q)(1),(0,a.w)(d=>{const g=this.updateRequestConverter.toDTO(u,d);return this.containerService.update(g)}))}}return m.\u0275fac=function(u){return new(u||m)(r.LFG(o.P),r.LFG(t.A))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac}),m})()},20942:(A,p,e)=>{e.d(p,{A:()=>c});var t=e(3809),l=e(20978),a=e(70816),i=e(19327),r=e(84046),o=e(33847);let c=(()=>{class m{constructor(u,d){this.moduleRequestConverter=u,this.iconConverter=d}toDTO(u,d){const g=new t.D(u.iconId,i.B[u.color]);return new a.i(d.getId().toString(),u.name,u.prefix,this.iconConverter.toString(g),u.description,d.getReadMoreURL(),d.getSequentiality().getId().toNumber(),d.getPeriodMode().getId().toNumber(),this.getBoxParentTypeIds(u),this.moduleRequestConverter.toModuleRequestArray(d.getModules()))}getBoxParentTypeIds(u){return u.parentTypes?u.parentTypes.map(d=>d.value.toString()):[]}}return m.\u0275fac=function(u){return new(u||m)(r.LFG(o.j),r.LFG(l.I))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac}),m})()},34491:(A,p,e)=>{e.d(p,{r:()=>r});var t=e(71118),l=e(9933),a=e(84046),i=e(83950);let r=(()=>{class o{constructor(m,h){this.localStorage=m,this.BOX_TYPES_CONFIG_STORAGE_KEY=`box-types-config-show-archived-for-user-${h.getLoggedInUser().userKey}`}setShowArchivedBoxTypesValue(m){this.localStorage.setItem(this.BOX_TYPES_CONFIG_STORAGE_KEY,m)}getShowArchivedBoxTypesValue(){let m;const h=this.localStorage.getItem(this.BOX_TYPES_CONFIG_STORAGE_KEY);return t.l.isDefined(h)?m="true"===h:(m=!1,this.setShowArchivedBoxTypesValue(m)),m}}return o.\u0275fac=function(m){return new(m||o)(a.LFG(l.m),a.LFG(i.L))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac}),o})()},92697:(A,p,e)=>{e.d(p,{L:()=>l});var t=e(84046);let l=(()=>{class a{transform(r){return r.map(o=>o.name).join(", ")}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=t.Yjl({name:"spBoxTypeNamesTooltipPipe",type:a,pure:!0}),a})()},98932:(A,p,e)=>{e.d(p,{Z:()=>l});var t=e(84046);let l=(()=>{class a{transform(r){return r.replace("_"," ")}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=t.Yjl({name:"spBoxTypeStatusNamePipe",type:a,pure:!0}),a})()},48002:(A,p,e)=>{e.d(p,{c:()=>S});var t=e(97809),l=e(98274),a=e(71726),i=e(63833),r=e(78563),o=e(29051),c=e(54896),m=e(47106),h=e(66134),u=e(37081),d=e(37391),g=e(84109),T=e(35981),y=e(84046),s=e(66706),v=e(25673),_=e(51540),f=e(74965),I=e(37625),D=e(28523);let S=(()=>{class M extends h.u{constructor(C,E,n,Z,O,B){super(),this.columnViewModuleCode=C,this.boxHierarchyService=E,this.boxColumnViewResource=n,this.boxViewResource=Z,this.columnViewConverter=O,this.fieldConfigConverter=B,this.boxId=null,this.boxesLoaded$=new t.t(1),E.selectContextBoxId().pipe(this.takeUntilDestroy()).subscribe(P=>{this.boxId=P,this.boxesLoaded$.next()})}fetchViews(){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxColumnViewResource.getViewsByBoxId(this.boxId,this.getViewType())),(0,a.U)(C=>C),(0,a.U)(C=>this.convertFetchResponse(C)))}deleteView(C){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxViewResource.delete(this.boxId,C)))}addView(C,E,n,Z){const O=new m.V(C,E,n,Z);return this.waitForBoxId().pipe((0,l.w)(()=>this.boxColumnViewResource.addColumnView(this.boxId,O))).pipe((0,a.U)(B=>B),(0,a.U)(B=>new u.Y(this.columnViewConverter.fromDTO(B),this.fieldConfigConverter.fromDTOs(B.fieldConfigs))))}addColumnInView(C,E,n){const Z=new r.D(E,n);return this.waitForBoxId().pipe((0,l.w)(()=>this.boxColumnViewResource.addColumnInColumnView(this.boxId,C,Z)),(0,a.U)(O=>O),(0,a.U)(O=>new u.Y(this.columnViewConverter.fromDTO(O),this.fieldConfigConverter.fromDTOs(O.fieldConfigs))))}deleteColumnInView(C,E,n,Z){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxColumnViewResource.deleteColumnInColumnView(this.boxId,C,E,n,Z))).pipe((0,a.U)(O=>O),(0,a.U)(O=>new u.Y(this.columnViewConverter.fromDTO(O),this.fieldConfigConverter.fromDTOs(O.fieldConfigs))))}reorderViewFields(C,E,n,Z){const O=new o.U(E,n,Z);return this.waitForBoxId().pipe((0,l.w)(()=>this.boxColumnViewResource.reorderColumnViewFields(this.boxId,C,O)),(0,a.U)(B=>B),(0,a.U)(B=>new u.Y(this.columnViewConverter.fromDTO(B),this.fieldConfigConverter.fromDTOs(B.fieldConfigs))))}restoreToOrigin(C){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxViewResource.restoreToOrigin(this.boxId,C)))}saveAsNew(C,E,n,Z){const O=new g.T(E,n,Z);return this.waitForBoxId().pipe((0,l.w)(()=>this.boxViewResource.saveAsNew(this.boxId,C,O)),(0,a.U)(B=>B),(0,a.U)(B=>new u.Y(this.columnViewConverter.fromDTO(B),this.fieldConfigConverter.fromDTOs(B.fieldConfigs))))}saveToOrigin(C){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxViewResource.saveToOrigin(this.boxId,C)))}updateColumnInView(C,E,n){const Z=new c.v(E,n);return this.waitForBoxId().pipe((0,l.w)(()=>this.boxColumnViewResource.updateColumnInColumnView(this.boxId,C,Z)),(0,a.U)(O=>O),(0,a.U)(O=>new u.Y(this.columnViewConverter.fromDTO(O),this.fieldConfigConverter.fromDTOs(O.fieldConfigs))))}updateView(C,E,n,Z,O){const B=new T.G(E,n,Z,O);return this.boxesLoaded$.pipe((0,l.w)(()=>this.boxViewResource.update(this.boxId,C,B))).pipe((0,a.U)(P=>P),(0,a.U)(P=>new u.Y(this.columnViewConverter.fromDTO(P),this.fieldConfigConverter.fromDTOs(P.fieldConfigs))))}markAsFavourite(C){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxViewResource.markViewFavourite(this.boxId,C,this.getViewType())))}selectView(C){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxViewResource.selectView(this.boxId,C,this.getViewType())))}unmarkFromFavourite(C){return this.waitForBoxId().pipe((0,l.w)(()=>this.boxViewResource.unmarkViewFavourite(this.boxId,C,this.getViewType())))}convertFetchResponse(C){const E=new Map;for(const n of C.views)E.set(n.id,this.fieldConfigConverter.fromDTOs(n.fieldConfigs));return new d.O(C.favouriteViewIds,C.selectedViewId,this.columnViewConverter.fromDTOs(C.views),E)}waitForBoxId(){return this.boxesLoaded$.pipe((0,i.q)(1))}getViewType(){return`${this.columnViewModuleCode.getCode()}_COLUMN`}}return M.\u0275fac=function(C){return new(C||M)(y.LFG(s.L),y.LFG(v.T),y.LFG(_.x),y.LFG(f.T),y.LFG(I.t),y.LFG(D.q))},M.\u0275prov=y.Yz7({token:M,factory:M.\u0275fac}),M})()},89587:(A,p,e)=>{e.d(p,{f:()=>O});var t=e(42738),l=e(74594),a=e(17542),i=e(50870),r=function(B,P,R,L){var b,J=arguments.length,k=J<3?P:null===L?L=Object.getOwnPropertyDescriptor(P,R):L;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(B,P,R,L);else for(var U=B.length-1;U>=0;U--)(b=B[U])&&(k=(J<3?b(k):J>3?b(P,R,k):b(P,R))||k);return J>3&&k&&Object.defineProperty(P,R,k),k},o=function(B,P){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(B,P)};class c extends a.M{constructor(P,R){super(),this.strategyType=P,this.viewType=R}getClassName(){return"InheritanceModeDTO"}}r([(0,i.XV)(),o("design:type",String)],c.prototype,"strategyType",void 0),r([(0,i.XV)(),o("design:type",String)],c.prototype,"viewType",void 0);var m=e(30252),h=e(13617),u=e(2421),d=e(83155),g=e(65531),T=e(71726),y=e(84046),s=e(11531),v=e(83950);let _=(()=>{class B extends d.a{constructor(R,L){super(R),this.environmentService=L}cloneView(R,L,J){return this.post(`${this.interpolateViewUrl(R,L)}/clone`,J).pipe((0,u.W)(l.L))}deleteView(R,L){return this.delete(this.interpolateViewUrl(R,L)).pipe((0,g.E)("HttpBoxTypeViewResource"))}getInheritanceMode(R,L){return this.get(`${R.toString()}/inheritance/view-type/${L}`).pipe((0,u.W)(c),(0,T.U)(J=>J.strategyType))}getTaskPreview(R,L,J){return this.get(`${this.interpolateViewUrl(R,J)}/task/${L}`).pipe((0,u.W)(h.Y))}restoreToOrigin(R,L){return this.post(`${this.interpolateViewUrl(R,L)}/restore-to-origin`).pipe((0,u.W)(m._))}saveAsNew(R,L,J){return this.post(`${this.interpolateViewUrl(R,L)}/save-as-new-view`,J).pipe((0,u.W)(l.L))}saveToOrigin(R,L){return this.post(`${this.interpolateViewUrl(R,L)}/save-to-origin`).pipe((0,u.W)(m._))}setInheritanceMode(R,L){return this.post(`${R.toString()}/inheritance`,L).pipe((0,u.W)(c),(0,T.U)(J=>J.strategyType))}update(R,L,J){return this.put(`${this.interpolateViewUrl(R,L)}`,J).pipe((0,u.W)(l.L))}getRestUrl(R){return`${this.environmentService.getRestBaseUrl()}ppm/boxarea-task/view/box-type/${R}`}interpolateViewUrl(R,L){return`${R.toString()}/view/${L}`}}return B.\u0275fac=function(R){return new(R||B)(y.LFG(s.O),y.LFG(v.L))},B.\u0275prov=y.Yz7({token:B,factory:B.\u0275fac}),B})();var f=e(90187);let I=(()=>{class B{fromSetInheritanceModeRequest(R){return new c(R.strategyType,R.viewType)}}return B.\u0275fac=function(R){return new(R||B)},B.\u0275prov=y.Yz7({token:B,factory:B.\u0275fac}),B})();var D=e(35460),S=e(88791),M=e(82365),W=e(18207),C=e(98438),E=e(54286);let n=(()=>{class B extends t.${constructor(R,L,J,k,b,U,x){super(),this.httpBoxTypeViewResource=R,this.boxTypeViewConverter=L,this.viewChangedConverter=J,this.cloneViewRequestDTOConverter=k,this.saveAsNewRequestDTOConverter=b,this.updateViewRequestDTOConverter=U,this.setInheritanceModeRequestDTOConverter=x}cloneView(R,L,J){const k=this.cloneViewRequestDTOConverter.fromCloneViewRequest(J);return this.httpBoxTypeViewResource.cloneView(R.toString(),L,k)}delete(R,L){return this.httpBoxTypeViewResource.deleteView(R.toString(),L)}getInheritanceMode(R,L){return this.httpBoxTypeViewResource.getInheritanceMode(R.toString(),L).pipe((0,T.U)(J=>f.b.of(J)))}getTaskPreview(R,L,J){return this.httpBoxTypeViewResource.getTaskPreview(R.toString(),L,J).pipe((0,T.U)(k=>D.i.fromRaw(k)))}restoreToOrigin(R,L){return this.httpBoxTypeViewResource.restoreToOrigin(R.toString(),L).pipe((0,T.U)(J=>this.viewChangedConverter.fromDto(J)))}saveAsNew(R,L,J){const k=this.saveAsNewRequestDTOConverter.fromSaveAsNewRequest(J);return this.httpBoxTypeViewResource.saveAsNew(R.toString(),L,k).pipe((0,T.U)(b=>this.boxTypeViewConverter.fromDto(b)))}saveToOrigin(R,L){return this.httpBoxTypeViewResource.saveToOrigin(R.toString(),L).pipe((0,T.U)(J=>this.viewChangedConverter.fromDto(J)))}setInheritanceMode(R,L){const J=this.setInheritanceModeRequestDTOConverter.fromSetInheritanceModeRequest(L);return this.httpBoxTypeViewResource.setInheritanceMode(R.toString(),J).pipe((0,T.U)(k=>f.b.of(k)))}update(R,L,J){const k=this.updateViewRequestDTOConverter.fromUpdateViewRequest(J);return this.httpBoxTypeViewResource.update(R.toString(),L,k).pipe((0,T.U)(b=>this.boxTypeViewConverter.fromDto(b)))}}return B.\u0275fac=function(R){return new(R||B)(y.LFG(_),y.LFG(S.t),y.LFG(M.T),y.LFG(W.A),y.LFG(C.Z),y.LFG(E.c),y.LFG(I))},B.\u0275prov=y.Yz7({token:B,factory:B.\u0275fac}),B})();var Z=e(21367);let O=(()=>{class B{}return B.\u0275fac=function(R){return new(R||B)},B.\u0275mod=y.oAB({type:B}),B.\u0275inj=y.cJS({providers:[{provide:t.$,useClass:n},_,S.t,M.T,W.A,C.Z,Z.I,E.c,I]}),B})()},59847:(A,p,e)=>{e.d(p,{Q:()=>S});var t=e(74965),l=e(94600),a=e(30252),i=e(13617),r=e(2421),o=e(83155),c=e(65531),m=e(84046),h=e(11531),u=e(83950);let d=(()=>{class M extends o.a{constructor(C,E){super(C),this.environmentService=E}cloneView(C,E,n){return this.post(`${this.interpolateViewUrl(C,E)}/clone`,n).pipe((0,r.W)(l.q))}deleteView(C,E){return this.delete(this.interpolateViewUrl(C,E)).pipe((0,c.E)("HttpBoxViewResource"))}getTaskPreview(C,E,n,Z){return this.get(`${this.interpolateViewUrl(C,n)}/view-type/${Z}/task/${E}`).pipe((0,r.W)(i.Y))}markViewFavourite(C,E,n){return this.post(`${this.interpolateViewUrl(C,E)}/view-type/${n}/mark-favourite`).pipe((0,c.E)("HttpBoxViewResource"))}restoreToOrigin(C,E){return this.post(`${this.interpolateViewUrl(C,E)}/restore-to-origin`).pipe((0,r.W)(a._))}saveAsNew(C,E,n){return this.post(`${this.interpolateViewUrl(C,E)}/save-as-new-view`,n).pipe((0,r.W)(l.q))}saveToOrigin(C,E){return this.post(`${this.interpolateViewUrl(C,E)}/save-to-origin`).pipe((0,r.W)(a._))}selectView(C,E,n){return this.post(`${this.interpolateViewUrl(C,E)}/view-type/${n}/select`).pipe((0,c.E)("HttpBoxViewResource"))}unmarkViewFavourite(C,E,n){return this.post(`${this.interpolateViewUrl(C,E)}/view-type/${n}/unmark-favourite`).pipe((0,c.E)("HttpBoxViewResource"))}update(C,E,n){return this.put(this.interpolateViewUrl(C,E),n).pipe((0,r.W)(l.q))}getRestUrl(C){return`${this.environmentService.getRestBaseUrl()}ppm/boxarea-task/view/box/${C}`}interpolateViewUrl(C,E){return`${C}/view/${E}`}}return M.\u0275fac=function(C){return new(C||M)(m.LFG(h.O),m.LFG(u.L))},M.\u0275prov=m.Yz7({token:M,factory:M.\u0275fac}),M})();var g=e(35460),T=e(71726),y=e(88791),s=e(82365),v=e(18207),_=e(98438),f=e(54286);let I=(()=>{class M extends t.T{constructor(C,E,n,Z,O,B){super(),this.httpBoxViewResource=C,this.boxViewConverter=E,this.viewChangedConverter=n,this.cloneViewRequestDTOConverter=Z,this.saveAsNewRequestDTOConverter=O,this.updateViewRequestDTOConverter=B}cloneView(C,E,n){const Z=this.cloneViewRequestDTOConverter.fromCloneViewRequest(n);return this.httpBoxViewResource.cloneView(C.toString(),E,Z).pipe((0,T.U)(O=>this.boxViewConverter.fromDto(O)))}delete(C,E){return this.httpBoxViewResource.deleteView(C.toString(),E)}getTaskPreview(C,E,n,Z){return this.httpBoxViewResource.getTaskPreview(C.toString(),E,n,Z).pipe((0,T.U)(O=>g.i.fromRaw(O)))}markViewFavourite(C,E,n){return this.httpBoxViewResource.markViewFavourite(C.toString(),E,n)}restoreToOrigin(C,E){return this.httpBoxViewResource.restoreToOrigin(C.toString(),E).pipe((0,T.U)(n=>this.viewChangedConverter.fromDto(n)))}saveAsNew(C,E,n){const Z=this.saveAsNewRequestDTOConverter.fromSaveAsNewRequest(n);return this.httpBoxViewResource.saveAsNew(C.toString(),E,Z).pipe((0,T.U)(O=>this.boxViewConverter.fromDto(O)))}saveToOrigin(C,E){return this.httpBoxViewResource.saveToOrigin(C.toString(),E).pipe((0,T.U)(n=>this.viewChangedConverter.fromDto(n)))}selectView(C,E,n){return this.httpBoxViewResource.selectView(C.toString(),E,n)}unmarkViewFavourite(C,E,n){return this.httpBoxViewResource.unmarkViewFavourite(C.toString(),E,n)}update(C,E,n){const Z=this.updateViewRequestDTOConverter.fromUpdateViewRequest(n);return this.httpBoxViewResource.update(C.toString(),E,Z).pipe((0,T.U)(O=>this.boxViewConverter.fromDto(O)))}}return M.\u0275fac=function(C){return new(C||M)(m.LFG(d),m.LFG(y.t),m.LFG(s.T),m.LFG(v.A),m.LFG(_.Z),m.LFG(f.c))},M.\u0275prov=m.Yz7({token:M,factory:M.\u0275fac}),M})();var D=e(21367);let S=(()=>{class M{}return M.\u0275fac=function(C){return new(C||M)},M.\u0275mod=m.oAB({type:M}),M.\u0275inj=m.cJS({providers:[{provide:t.T,useClass:I},d,y.t,s.T,v.A,_.Z,D.I,f.c]}),M})()},89107:(A,p,e)=>{e.d(p,{H:()=>t});class t{constructor(a,i,r,o,c,m){this.id=a,this.summary=i,this.isPrivate=r,this.description=o,this.inheritedFromRefId=c,this.inheritedFromType=m}static fromViewDTO(a){return new t(a.id,a.name,a.prv,a.description,a.inheritedFromRefId,a.inheritedFromType)}static fromViewDTOArray(a){return a.map(i=>t.fromViewDTO(i))}static fromView(a){return new t(a.id,a.name,a.prv,a.description,a.inheritedFromRefId,a.inheritedFromType)}}},49455:(A,p,e)=>{e.d(p,{k:()=>t});class t{constructor(a,i,r,o,c,m=!1,h=!0,u=!0,d,g,T){this.id=a,this.summary=i,this.isPrivate=r,this.description=o,this.isSelected=c,this.isFavourite=m,this.canEdit=h,this.canDelete=u,this.inheritedFromRefId=d,this.inheritedFromType=g,this.isInherited=T}static getTooltipForDisabledDelete(a,i){if(a.isSelected)return"SPT_BOXCONFIG_COLUMN_VIEWS_TABLE_BUTTON_DELETE_DISABLED_TOOLTIP_SELECTED";if(i){if(1===i.length)return"SPT_BOXCONFIG_COLUMN_VIEWS_TABLE_BUTTON_DELETE_DISABLED_TOOLTIP_LAST";if(!a.isPrivate&&1===i.filter(o=>!o.isPrivate).length)return"SPT_BOXCONFIG_COLUMN_VIEWS_TABLE_BUTTON_DELETE_DISABLED_TOOLTIP_LAST_PUBLIC"}}static fromBoxAreaTaskView(a,i=!1,r=-1,o=!0,c=!0,m){return new t(a.id,a.summary,a.isPrivate,a.description,a.id===r,i,o,c,a.inheritedFromRefId,a.inheritedFromType,m)}static fromViewDTO(a,i=!1,r=-1,o=!0,c=!0){return new t(a.id,a.name,a.prv,a.description,a.id===r,i,o,c,a.inheritedFromRefId,a.inheritedFromType)}static fromCardView(a){return new t(a.id,a.name,a.prv,a.description,!1,!1,!1,!1,a.inheritedFromRefId,a.inheritedFromType)}static fromColumnView(a){return new t(a.id,a.name,a.prv,a.description,!1,!1,!1,!1,a.inheritedFromRefId,a.inheritedFromType)}equals(a){return this.id===a.id}isDeleteDisabled(a){return this.isSelected||!this.canDelete}isEditDisabled(){return!this.canEdit}}},65422:(A,p,e)=>{e.d(p,{E:()=>t});class t{constructor(a,i,r){this.views=a,this.selectedViewId=i,this.favouriteViewIds=r}}},7668:(A,p,e)=>{e.d(p,{Q:()=>t});class t{}},51540:(A,p,e)=>{e.d(p,{x:()=>t});class t{}},34420:(A,p,e)=>{e.d(p,{O:()=>t});class t{constructor(a,i,r){this.views=a,this.selectedViewId=i,this.favouriteViewIds=r}}},98499:(A,p,e)=>{e.d(p,{G:()=>t});class t{constructor(a,i,r,o,c,m,h,u,d){this.id=a,this.name=i,this.description=r,this.prv=o,this.config=c,this.fieldConfigs=m,this.inheritedFromRefId=h,this.inheritedFromType=u,this.inEditMode=d}}},42738:(A,p,e)=>{e.d(p,{$:()=>t});class t{}},74965:(A,p,e)=>{e.d(p,{T:()=>t});class t{}},60218:(A,p,e)=>{e.d(p,{Q:()=>t});class t{constructor(a){this.boxAreTaskViewContextTypeService=a}static convertDashesToUnderscore(a){return a.replace("-","_")}}},68319:(A,p,e)=>{e.d(p,{T:()=>a});var t=e(18840),l=e(84046);let a=(()=>{class i{constructor(){this.contextType$=new t.X(void 0)}get(){return this.contextType}set(o){this.contextType=o}select(){return this.contextType$.asObservable()}isInBoxContext(){return this.contextType===i.BOX}isInBoxTypeContext(){return this.contextType===i.BOX_TYPE}}return i.BOX="box",i.BOX_TYPE="boxType",i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},96263:(A,p,e)=>{e.d(p,{B:()=>S});var t=e(98274),l=e(71726),a=e(47722),i=e(11206),r=e(89107),o=e(49455),c=e(65422),m=e(54779),h=e(48485),u=e(29827),d=e(84046),g=e(68319),T=e(60218),y=e(21367),s=e(19283),v=e(28523),_=e(74965),f=e(42738),I=e(51540),D=e(7668);let S=(()=>{class M extends m.j{constructor(C,E,n,Z,O,B,P,R,L,J){super(C,E,n,P,R),this.addViewRequestConverter=Z,this.columnViewFetchService=O,this.fieldConfigConverter=B,this.boxColumnViewResource=L,this.boxTypeColumnViewResource=J}createView(C){return this.getContextId().pipe((0,t.w)(E=>{const n=this.addViewRequestConverter.fromCrudItem(C,this.getViewType());return this.isInBoxContext()?this.boxColumnViewResource.addColumnView(new i.A(E),n):this.boxTypeColumnViewResource.addColumnView(new a.n(E),n)}),(0,l.U)(E=>(this.columnViewFetchService.addOrUpdateColumnView(E,this.fieldConfigConverter.fromDTOs(E.fieldConfigs)),o.k.fromColumnView(E))))}fetchViews(){return this.getContextId().pipe((0,t.w)(C=>{const E=this.getViewType();return this.isInBoxContext()?this.fetchBoxColumnViews(new i.A(C),E):this.fetchBoxTypeColumnViews(new a.n(C),E)}))}moveViewItem(C,E){const n=new h.K(C,E);return this.getContextId().pipe((0,t.w)(Z=>this.isInBoxContext()?this.boxColumnViewResource.reorderColumnViews(new i.A(Z),n):this.boxTypeColumnViewResource.reorderColumnViews(new a.n(Z),n)))}fetchBoxColumnViews(C,E){return this.boxColumnViewResource.getViewsByBoxId(C,E).pipe((0,l.U)(n=>new c.E(n.views.map(Z=>r.H.fromView(Z)),n.selectedViewId,n.favouriteViewIds)))}fetchBoxTypeColumnViews(C,E){return this.boxTypeColumnViewResource.getViews(C,E).pipe((0,l.U)(n=>n.map(Z=>r.H.fromView(Z))),(0,l.U)(n=>new c.E(n,null,[])))}}return M.\u0275fac=function(C){return new(C||M)(d.LFG(g.T),d.LFG(T.Q),d.LFG(y.I),d.LFG(s.V),d.LFG(u.a),d.LFG(v.q),d.LFG(_.T,8),d.LFG(f.$,8),d.LFG(I.x,8),d.LFG(D.Q,8))},M.\u0275prov=d.Yz7({token:M,factory:M.\u0275fac}),M})()},47789:(A,p,e)=>{e.d(p,{x:()=>l});var t=e(48718);class l extends t.q{getClassName(){return"ColumnViewDTO"}}},18e3:(A,p,e)=>{e.d(p,{u:()=>a});class t{constructor(r,o){this.columns=r,this.saveToOrigin=o}}var l=e(84046);let a=(()=>{class i{fromAddColumnViewRequest(o){return new t(o.columns,o.saveToOrigin)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},86684:(A,p,e)=>{e.d(p,{L:()=>a});class t{constructor(r,o,c){this.startingPosition=r,this.endingPosition=o,this.saveToOrigin=c}}var l=e(84046);let a=(()=>{class i{fromReorderColumnsRequest(o){return new t(o.startingPosition,o.endingPosition,o.saveToOrigin)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},67174:(A,p,e)=>{e.d(p,{L:()=>a});class t{constructor(r,o){this.columns=r,this.saveToOrigin=o}}var l=e(84046);let a=(()=>{class i{fromUpdateColumnViewFieldsRequest(o){return new t(o.columns,o.saveToOrigin)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},78563:(A,p,e)=>{e.d(p,{D:()=>t});class t{constructor(a,i){this.columns=a,this.saveToOrigin=i}}},48485:(A,p,e)=>{e.d(p,{K:()=>l});class t{constructor(i,r){this.viewId=i,this.siblingViewId=r}}class l{constructor(i,r){this.viewId=i,this.siblingViewId=r}static toDTO(i){return new t(i.viewId,i.siblingViewId)}}},29051:(A,p,e)=>{e.d(p,{U:()=>t});class t{constructor(a,i,r){this.startingPosition=a,this.endingPosition=i,this.saveToOrigin=r}}},54896:(A,p,e)=>{e.d(p,{v:()=>t});class t{constructor(a,i){this.columns=a,this.saveToOrigin=i}}},54779:(A,p,e)=>{e.d(p,{j:()=>M});var t=e(84046),l=e(64865),a=e(53339),i=e(98274),r=e(71726),o=e(70822),c=e(63833),m=e(47722),h=e(11206),u=e(89107),d=e(42738);class g{constructor(C,E){this.strategyType=C,this.viewType=E}}var T=e(74965),y=e(60218),s=e(68319),v=e(90187);class _{constructor(C,E){this.summary=C,this.description=E}}var f=e(21367),S=function(W,C){return function(E,n){C(E,n,W)}};let M=class{constructor(C,E,n,Z,O){this.boxAreaTaskViewContextTypeService=C,this.boxAreaTaskViewContextRepository=E,this.updateViewRequestConverter=n,this.boxViewResource=Z,this.boxTypeViewResource=O}clone(C){return this.getContextId().pipe((0,i.w)(E=>{const n=new _(C.summary,C.description);return this.isInBoxContext()?this.boxViewResource.cloneView(new h.A(E),C.id,n):this.boxTypeViewResource.cloneView(new m.n(E),C.id,n)}),(0,r.U)(E=>u.H.fromView(E)))}getInheritanceMode(C,E){return E===l.I.OVERVIEW_HIERARCHY_COLUMN||E===l.I.OVERVIEW_TIMELINE_COLUMN?(0,a.of)(v.b.of("OWN_AND_INHERITED")):this.boxTypeViewResource.getInheritanceMode(C,E)}markViewAsFavourite(C){return this.getContextId().pipe((0,o.h)(()=>this.isInBoxContext()),(0,i.w)(E=>this.boxViewResource.markViewFavourite(new h.A(E),C,this.getViewType())))}removeView(C){return this.getContextId().pipe((0,i.w)(E=>this.isInBoxContext()?this.boxViewResource.delete(new h.A(E),C.id):this.boxTypeViewResource.delete(new m.n(E),C.id)))}selectView(C){return this.getContextId().pipe((0,o.h)(()=>this.isInBoxContext()),(0,i.w)(E=>this.boxViewResource.selectView(new h.A(E),C,this.boxAreaTaskViewContextRepository.getViewType())))}setInheritanceMode(C,E){return this.boxTypeViewResource.setInheritanceMode(C,new g(E.getType(),this.getViewType()))}unmarkViewFavourite(C){return this.getContextId().pipe((0,o.h)(()=>this.isInBoxContext()),(0,i.w)(E=>this.boxViewResource.unmarkViewFavourite(new h.A(E),C,this.getViewType())))}updateView(C,E=!1){return this.getContextId().pipe((0,i.w)(n=>{const Z=this.updateViewRequestConverter.fromBoxAreaTaskView(C,E);return this.isInBoxContext()?this.boxViewResource.update(new h.A(n),C.id,Z):this.boxTypeViewResource.update(new m.n(n),C.id,Z)}),(0,r.U)(n=>u.H.fromView(n)))}getContextId(){return this.boxAreaTaskViewContextRepository.getContextId().pipe((0,c.q)(1),(0,o.h)(()=>this.isInBoxContext()||this.isInBoxTypeContext()))}getViewType(){const C=this.boxAreaTaskViewContextRepository.getViewType(),E=y.Q.convertDashesToUnderscore(C.toUpperCase());return this.boxAreaTaskViewContextRepository.getModuleType()+"_"+E}isInBoxContext(){return this.boxAreaTaskViewContextTypeService.isInBoxContext()}isInBoxTypeContext(){return this.boxAreaTaskViewContextTypeService.isInBoxTypeContext()}};M=function(W,C,E,n){var B,Z=arguments.length,O=Z<3?C:null===n?n=Object.getOwnPropertyDescriptor(C,E):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(W,C,E,n);else for(var P=W.length-1;P>=0;P--)(B=W[P])&&(O=(Z<3?B(O):Z>3?B(C,E,O):B(C,E))||O);return Z>3&&O&&Object.defineProperty(C,E,O),O}([S(3,(0,t.FiY)()),S(4,(0,t.FiY)()),function(W,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:paramtypes",C)}(0,[s.T,y.Q,f.I,T.T,d.$])],M)},74594:(A,p,e)=>{e.d(p,{L:()=>s});var _,t=e(15380),l=e(41085),o=e(60903),c=e(50870),m=e(34373),h=e(40813),u=e(85847),d=e(58519),g=e(17542),T=function(v,_,f,I){var M,D=arguments.length,S=D<3?_:null===I?I=Object.getOwnPropertyDescriptor(_,f):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)S=Reflect.decorate(v,_,f,I);else for(var W=v.length-1;W>=0;W--)(M=v[W])&&(S=(D<3?M(S):D>3?M(_,f,S):M(_,f))||S);return D>3&&S&&Object.defineProperty(_,f,S),S},y=function(v,_){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,_)};class s extends g.M{getClassName(){return"BoxTypeViewDTO"}}T([(0,o.qA)(),y("design:type",Number)],s.prototype,"id",void 0),T([(0,c.XV)(),y("design:type",String)],s.prototype,"name",void 0),T([(0,c.XV)(),y("design:type",String)],s.prototype,"description",void 0),T([(0,m.si)(),y("design:type",Boolean)],s.prototype,"prv",void 0),T([(0,t.Y)({name:"isNotEmptyObject",constraints:[undefined],validator:{validate:(f,I)=>function(v,_){if(!(0,l.Kn)(v))return!1;if(!0===(null==_?void 0:_.nullable))return!Object.values(v).every(f=>null==f);for(const f in v)if(v.hasOwnProperty(f))return!0;return!1}(f,I.constraints[0]),defaultMessage:(0,t.l)(f=>f+"$property must be a non-empty object",_)}},_),y("design:type",Object)],s.prototype,"config",void 0),T([(0,u.D)(()=>d.s),(0,h.j)({each:!0}),y("design:type",Array)],s.prototype,"fieldConfigs",void 0),T([(0,c.XV)(),y("design:type",String)],s.prototype,"inheritedFromRefId",void 0),T([(0,c.XV)(),y("design:type",String)],s.prototype,"inheritedFromType",void 0),T([(0,m.si)(),y("design:type",Boolean)],s.prototype,"inEditMode",void 0)},94600:(A,p,e)=>{e.d(p,{q:()=>l});var t=e(48718);class l extends t.q{getClassName(){return"BoxViewDTO"}}},19283:(A,p,e)=>{e.d(p,{V:()=>a});var t=e(47106),l=e(84046);let a=(()=>{class i{fromCrudItem(o,c){return new t.V(o.summary,o.description,c,o.isPrivate)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},40951:(A,p,e)=>{e.d(p,{K:()=>a});class t{constructor(r,o,c,m){this.name=r,this.description=o,this.viewType=c,this.prv=m}}var l=e(84046);let a=(()=>{class i{fromAddViewRequest(o){return new t(o.name,o.description,o.viewType,o.prv)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},18207:(A,p,e)=>{e.d(p,{A:()=>a});class t{constructor(r,o){this.newName=r,this.newDescription=o}}var l=e(84046);let a=(()=>{class i{fromCloneViewRequest(o){return new t(this.getClonedViewName(o),o.description||"")}getClonedViewName(o){return`Copy of ${o.summary}`.substring(0,255)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},98438:(A,p,e)=>{e.d(p,{Z:()=>a});var t=e(43308),l=e(84046);let a=(()=>{class i{fromSaveAsNewRequest(o){return new t.m(o.name,o.description,o.prv)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},21367:(A,p,e)=>{e.d(p,{I:()=>a});var t=e(42675),l=e(84046);let a=(()=>{class i{fromBoxAreaTaskView(o,c=!1){return new t.m(o.summary,o.description,o.isPrivate,c)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},54286:(A,p,e)=>{e.d(p,{c:()=>a});var t=e(42675),l=e(84046);let a=(()=>{class i{fromUpdateViewRequest(o){return new t.m(o.name,o.description,o.prv,o.saveToOrigin)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},82365:(A,p,e)=>{e.d(p,{T:()=>a});class t{constructor(r,o){this.current=r,this.previous=o}}var l=e(84046);let a=(()=>{class i{fromDto(o){return new t(o.current,o.previous)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},88791:(A,p,e)=>{e.d(p,{t:()=>a});var t=e(98499),l=e(84046);let a=(()=>{class i{fromDto(o){return new t.G(o.id,o.name,o.description,o.prv,o.config,o.fieldConfigs,o.inheritedFromRefId,o.inheritedFromType,o.inEditMode)}fromDtoArray(o){return o.map(c=>this.fromDto(c))}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},47106:(A,p,e)=>{e.d(p,{V:()=>t});class t{constructor(a,i,r,o){this.name=a,this.description=i,this.viewType=r,this.prv=o}}},43308:(A,p,e)=>{e.d(p,{m:()=>t});class t{constructor(a,i,r){this.name=a,this.description=i,this.prv=r}}},42675:(A,p,e)=>{e.d(p,{m:()=>t});class t{constructor(a,i,r,o){this.name=a,this.description=i,this.prv=r,this.saveToOrigin=o}static fromCrudItem(a,i=!1){return new t(a.summary,a.description,a.isPrivate,i)}}},30252:(A,p,e)=>{e.d(p,{_:()=>r});var t=e(60903),l=e(17542),a=function(o,c,m,h){var g,u=arguments.length,d=u<3?c:null===h?h=Object.getOwnPropertyDescriptor(c,m):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(o,c,m,h);else for(var T=o.length-1;T>=0;T--)(g=o[T])&&(d=(u<3?g(d):u>3?g(c,m,d):g(c,m))||d);return u>3&&d&&Object.defineProperty(c,m,d),d},i=function(o,c){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,c)};class r extends l.M{getClassName(){return"ViewChangedDTO"}}a([(0,t.qA)(),i("design:type",Number)],r.prototype,"current",void 0),a([(0,t.qA)(),i("design:type",Number)],r.prototype,"previous",void 0)},48718:(A,p,e)=>{e.d(p,{q:()=>g});var t=e(58519),l=e(17542),a=e(60903),i=e(50870),r=e(34373),o=e(41085),c=e(77816),m=e(40813),h=e(85847),u=function(T,y,s,v){var I,_=arguments.length,f=_<3?y:null===v?v=Object.getOwnPropertyDescriptor(y,s):v;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(T,y,s,v);else for(var D=T.length-1;D>=0;D--)(I=T[D])&&(f=(_<3?I(f):_>3?I(y,s,f):I(y,s))||f);return _>3&&f&&Object.defineProperty(y,s,f),f},d=function(T,y){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(T,y)};class g extends l.M{getClassName(){return"ViewDTO"}}u([(0,a.qA)(),d("design:type",Number)],g.prototype,"id",void 0),u([(0,i.XV)(),d("design:type",String)],g.prototype,"name",void 0),u([(0,i.XV)(),d("design:type",String)],g.prototype,"description",void 0),u([(0,r.si)(),d("design:type",Boolean)],g.prototype,"prv",void 0),u([(0,o.ci)(),d("design:type",Object)],g.prototype,"config",void 0),u([(0,h.D)(()=>t.s),(0,c.Yl)(),(0,m.j)({each:!0}),d("design:type",Array)],g.prototype,"fieldConfigs",void 0),u([(0,i.XV)(),d("design:type",String)],g.prototype,"inheritedFromRefId",void 0),u([(0,i.XV)(),d("design:type",String)],g.prototype,"inheritedFromType",void 0),u([(0,r.si)(),d("design:type",Boolean)],g.prototype,"inEditMode",void 0)},14391:(A,p,e)=>{e.d(p,{$:()=>a});var t=e(95336);class a{constructor(r,o,c,m){this.extPlatformId=r,this.taskType=o,this.extTaskId=c,this.taskKey=m}static fromTaskKey(r){if("string"==typeof r){const[o,c,m]=r.split("@");return new a(o,c,m,r)}if("object"==typeof r)return Object.assign(new a(null,null,null,null),r);throw new TypeError("TaskKey should be typeof 'string' or 'object' but got: "+typeof r)}getType(){return class{static parse(r){return t.U[this.getEnumString(r)]}static getTaskTypeFromExternalTaskId(r){const o=r.split("@")[1];return t.U[this.getEnumString(o)]||(console.error("Task Type is unknown."),null)}static getEnumString(r){return t.U[r]}}.parse(this.taskType)}toString(){return this.taskKey}equals(r){return this.taskKey===r.taskKey}}},95336:(A,p,e)=>{e.d(p,{U:()=>t});var t=(()=>{return(l=t||(t={}))[l.REGULAR_ISSUE=1]="REGULAR_ISSUE",l[l.JIRA_VERSION=2]="JIRA_VERSION",l[l.JIRA_COMPONENT=3]="JIRA_COMPONENT",l[l.AGILE_SPRINT=4]="AGILE_SPRINT",l[l.JIRA_PROJECT=5]="JIRA_PROJECT",l[l.BASIC_TASK=9]="BASIC_TASK",l[l.BASIC_GROUP_TASK=7]="BASIC_GROUP_TASK",l[l.AGILE_BACKLOG=8]="AGILE_BACKLOG",t;var l})()},17084:(A,p,e)=>{e.d(p,{f:()=>h});var t=e(55331),l=e(70335),a=e(41001),r=(e(88553),e(84974)),o=e(68890),c=e(84046);let h=(()=>{class u{}return u.\u0275fac=function(g){return new(g||u)},u.\u0275mod=c.oAB({type:u}),u.\u0275inj=c.cJS({imports:[[t.ez,o.z8,l.UX,r.A,a.J]]}),u})()},65235:(A,p,e)=>{e.d(p,{M:()=>u});var t=e(55331),l=e(771),a=e(38429),r=(e(48082),e(51637)),o=e(84974),c=e(84046);const h=[r.J];let u=(()=>{class d{static forRoot(T,y){return{ngModule:d,providers:[...h,{provide:a.g,useClass:T},{provide:l.W,useClass:y}]}}}return d.\u0275fac=function(T){return new(T||d)},d.\u0275mod=c.oAB({type:d}),d.\u0275inj=c.cJS({providers:h,imports:[[t.ez,o.A]]}),d})()},8858:(A,p,e)=>{e.d(p,{f:()=>k});var t=e(55331),l=e(45669);const a="app/common/assets/images/default-avatar.svg";var i=e(84046),r=e(68890),o=e(51127),c=e(94944);function m(b,U){if(1&b&&(i.TgZ(0,"div",1),i.ALo(1,"spRichTextString"),i._UZ(2,"img",2),i.TgZ(3,"div",3),i._uU(4),i.qZA(),i.qZA()),2&b){const x=i.oxw();i.Q6J("spTooltipEnabled",x.tooltipEnabled)("spTooltip",i.lcZ(1,4,x.getTooltipText())),i.xp6(2),i.Q6J("spLazyImg",x.getAvatarIcon()),i.xp6(2),i.hij(" ",x.getDisplayName()," ")}}let h=(()=>{class b extends l.D{getAvatarIcon(){var x,H;return(null===(H=null===(x=this.dataValue)||void 0===x?void 0:x.data)||void 0===H?void 0:H.avatar_url_normal)?this.dataValue.data.avatar_url_normal:a}getDisplayName(){var x,H;return(null===(H=null===(x=this.dataValue)||void 0===x?void 0:x.data)||void 0===H?void 0:H.displayName)?this.dataValue.data.displayName:""}}return b.\u0275fac=function(){let U;return function(H){return(U||(U=i.n5z(b)))(H||b)}}(),b.\u0275cmp=i.Xpm({type:b,selectors:[["sp-display-individual-resource-avatar-and-name"]],features:[i.qOj],decls:1,vars:1,consts:[["class","sp-flex sp-items-center sp-overflow-hidden sp-dt-display-tooltip sp-w-full sp-h-full",3,"spTooltipEnabled","spTooltip",4,"ngIf"],[1,"sp-flex","sp-items-center","sp-overflow-hidden","sp-dt-display-tooltip","sp-w-full","sp-h-full",3,"spTooltipEnabled","spTooltip"],[1,"sp-individual-resource-avatar","sp-flex","sp-items-center","sp-circle",3,"spLazyImg"],[1,"sp-whitespace-nowrap","sp-pl-1","sp-flex"]],template:function(x,H){1&x&&i.YNc(0,m,5,6,"div",0),2&x&&i.Q6J("ngIf",H.dataValue)},directives:[t.O5,r.i9,o.$],pipes:[c.C],styles:["sp-display-individual-resource-avatar-and-name .sp-individual-resource-avatar{min-height:16px;height:16px;min-width:16px;width:16px;object-fit:cover}\n"],encapsulation:2,changeDetection:0}),b})();function u(b,U){if(1&b&&(i.TgZ(0,"div",1),i.ALo(1,"spRichTextString"),i._UZ(2,"img",2),i.qZA()),2&b){const x=i.oxw();i.Q6J("spTooltipEnabled",x.tooltipEnabled)("spTooltip",i.lcZ(1,3,x.getTooltipText())),i.xp6(2),i.Q6J("spLazyImg",x.getAvatarIcon())}}let d=(()=>{class b extends l.D{getAvatarIcon(){var x,H;return(null===(H=null===(x=this.dataValue)||void 0===x?void 0:x.data)||void 0===H?void 0:H.avatar_url_normal)?this.dataValue.data.avatar_url_normal:a}getHostClasses(){return[...super.getHostClasses(),"sp-display-individual-resource-avatar"]}}return b.\u0275fac=function(){let U;return function(H){return(U||(U=i.n5z(b)))(H||b)}}(),b.\u0275cmp=i.Xpm({type:b,selectors:[["sp-display-individual-resource-avatar"]],features:[i.qOj],decls:1,vars:1,consts:[["class","sp-display-field sp-w-full sp-h-full sp-overflow-hidden sp-dt-display-tooltip sp-flex sp-items-center",3,"spTooltipEnabled","spTooltip",4,"ngIf"],[1,"sp-display-field","sp-w-full","sp-h-full","sp-overflow-hidden","sp-dt-display-tooltip","sp-flex","sp-items-center",3,"spTooltipEnabled","spTooltip"],["loading","lazy",1,"sp-individual-resource-avatar","sp-flex","sp-items-center","sp-circle",3,"spLazyImg"]],template:function(x,H){1&x&&i.YNc(0,u,3,5,"div",0),2&x&&i.Q6J("ngIf",H.dataValue)},directives:[t.O5,r.i9,o.$],pipes:[c.C],styles:["sp-display-individual-resource-avatar .sp-individual-resource-avatar{min-height:16px;height:16px;min-width:16px;width:16px;object-fit:cover}\n"],encapsulation:2,changeDetection:0}),b})();function g(b,U){if(1&b&&(i.TgZ(0,"div",1),i.ALo(1,"spRichTextString"),i.TgZ(2,"span",2),i._uU(3),i.qZA(),i.qZA()),2&b){const x=i.oxw();i.Q6J("spTooltipEnabled",x.tooltipEnabled)("spTooltip",i.lcZ(1,3,x.getTooltipText())),i.xp6(3),i.Oqu(x.dataValue.data.displayName)}}let T=(()=>{class b extends l.D{}return b.\u0275fac=function(){let U;return function(H){return(U||(U=i.n5z(b)))(H||b)}}(),b.\u0275cmp=i.Xpm({type:b,selectors:[["sp-display-individual-resource-name"]],features:[i.qOj],decls:1,vars:1,consts:[["class","sp-w-full sp-h-full sp-overflow-hidden sp-dt-display-tooltip sp-flex sp-items-center",3,"spTooltipEnabled","spTooltip",4,"ngIf"],[1,"sp-w-full","sp-h-full","sp-overflow-hidden","sp-dt-display-tooltip","sp-flex","sp-items-center",3,"spTooltipEnabled","spTooltip"],[1,"sp-text-wrapper"]],template:function(x,H){1&x&&i.YNc(0,g,4,5,"div",0),2&x&&i.Q6J("ngIf",H.dataValue&&H.dataValue.data&&H.dataValue.data.displayName)},directives:[t.O5,r.i9],pipes:[c.C],encapsulation:2,changeDetection:0}),b})();var y=e(45856),s=e(15493),v=e(47868),_=e(4742),f=e(99609),I=e(14228),D=e(71118);const S=new v.r("INDIVIDUAL_RESOURCE");class M extends I.G{constructor(U,x,H){super(),this.id=U,this.isActive=x,this.data=H,this.dataTypeId=S}clone(){return Object.freeze(M.of(D.l.deepClone(this)))}isEmpty(){var U;return!(null===(U=this.id)||void 0===U?void 0:U.length)&&!D.l.isDefined(this.isActive)&&!D.l.isDefined(this.data)}static of(U){return U&&new M(U.id,U.isActive,W.of(U.data))}}class W{constructor(U,x,H,te,ae,ue){this.email=U,this.profile_url=x,this.displayName=H,this.avatar_url_small=te,this.avatar_url_normal=ae,this.avatar_url_large=ue}static of(U){return U&&new W(U.email,U.profile_url,U.displayName,U.avatar_url_small,U.avatar_url_normal,U.avatar_url_large)}}var C=e(57011);class E extends _.p{constructor(U,x,H,te=f.J.AVATAR_AND_NAME,ae=!1,ue="Individual resource"){super(ue,H,x,te,ae),this.dataType=U}static BUILDER(U,x){return new C.I(E,U,x)}getDataType(){return this.dataType}getTextValue(U){return U?U.data.displayName:""}}var n=e(19589);class Z extends n.R{constructor(){super(...arguments),this.name="display name"}getName(){return this.name}compareNotNullDataValues(U,x){return this.compareStrings(U.data.displayName,x.data.displayName)}}class O extends s.g{constructor(){super(...arguments),this.dataTypeId=O.ID,this.comparator=new Z}getFieldBuilder(U){return E.BUILDER(U,this)}getCustomFieldBuilder(U){return E.BUILDER(_._,this).withFieldName(U)}getDefaultDecorator(){return f.J.AVATAR_AND_NAME}getAvailableDecorators(){return[f.J.AVATAR_AND_NAME,f.J.AVATAR,f.J.TEXT]}getDefaultComparator(){return this.comparator}getDisplayComponent(U){return U===f.J.AVATAR_AND_NAME?h:U===f.J.AVATAR?d:U===f.J.TEXT?T:h}buildDataValue(U){return M.of(U)}}O.ID=new v.r("INDIVIDUAL_RESOURCE");var B=e(26566),P=e(74111),R=e(28579);const J=[(0,y.E)(O)];let k=(()=>{class b{static forRoot(){return{ngModule:b,providers:[...J]}}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275mod=i.oAB({type:b}),b.\u0275inj=i.cJS({imports:[[t.ez,R.X,r.z8,B.n,P.Y]]}),b})()},81890:(A,p,e)=>{e.d(p,{S:()=>l});var t=e(99609);class l{constructor(i=null,r=t.J.NONE,o="",c="",m=2,h=1,u,d,g,T){this.fieldId=i,this.decoratorType=r,this.fieldName=o,this.fieldLabel=c,this.columnMultiplier=m,this.rowMultiplier=h,this.aggregation=u,this.distribute=d,this.fieldType=g,this.omitAggregation=T}static emptyLeftRightDecorator(i=2,r=1){return new l(null,t.J.NONE,"","",i,r)}static emptyMainColumnRow(i=2,r=1){return new l(null,t.J.NONE,"","",i,r)}static emptyAdditionalColumnRow(i=0,r=1){return new l(null,t.J.NONE,"","",i,r)}}},35460:(A,p,e)=>{e.d(p,{i:()=>l});var t=e(14391);class l{constructor(i,r,o,c,m,h){this.editable=i,this.fields=r,this.taskKey=o,this.taskId=c,this.uri=m,this.fieldsEditability=h}static fromRaw(i){return new l(i.editable,i.fields,i.taskKey?t.$.fromTaskKey(i.taskKey):null,i.taskId,i.uri,i.fieldsEditability)}static fromRawArray(i){return i.map(r=>l.fromRaw(r))}static fromSimpleTaskDTO(i){return new l(i.editable,i.fields,null,i.taskId,i.uri,i.fieldsEditability)}static fromSimpleTaskArrayDTO(i){return i.map(r=>l.fromSimpleTaskDTO(r))}clone(){return new l(this.editable,this.fields,this.taskKey,this.taskId,this.uri,this.fieldsEditability)}}},53669:(A,p,e)=>{e.d(p,{v:()=>l});var t=e(17190);class l{constructor(i,r,o,c){this.taskFieldId=i,this.fieldDefinition=r,this.isGlobal=o,this.extPlatformId=c}isDefined(){return!this.fieldDefinition.getDataType().getDataTypeId().equals(t.O.ID)}}},45464:(A,p,e)=>{e.d(p,{d:()=>t});class t{}},771:(A,p,e)=>{e.d(p,{W:()=>t});class t{}},38429:(A,p,e)=>{e.d(p,{g:()=>t});class t{}},51637:(A,p,e)=>{e.d(p,{J:()=>i});var t=e(84046),l=e(38429),a=e(48816);let i=(()=>{class r{constructor(c,m){this.taskPickerPreviewResource=c,this.taskPickerSearchTasksResource=m}getTaskForView(c,m){return this.taskPickerPreviewResource.getTaskPreview(c,m)}searchTasksByQuery(c){return this.taskPickerSearchTasksResource.searchTasksByQuery(c)}}return r.\u0275fac=function(c){return new(c||r)(t.LFG(l.g),t.LFG(a.c))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})()},48816:(A,p,e)=>{e.d(p,{c:()=>t});class t{}},17578:(A,p,e)=>{e.d(p,{T:()=>h});var t=e(53669),l=e(69417),a=e(53975),i=e(25337),r=e(94615),o=e(75596),c=e(47868),m=e(84046);let h=(()=>{class u{constructor(g,T){this.dataTypes=g,this.fieldDefinitionFactory=T,this.UNKNOWN_TASK_FIELD_ID=l.Z.fromNumber(-1)}parseExtPlatformFields(g,T){let y=[];return Object.keys(g).forEach(s=>{const v=T.find(_=>`${_.id}`===s);y=y.concat(g[s].filter(_=>this.dataTypes.isDefined(_.dataType)).map(_=>new t.v(this.UNKNOWN_TASK_FIELD_ID,this.createExtPlatformField(_,v),!1,Number(s))))}),y}parseExtPlatformFieldsDTO(g,T){let y=[];return Object.keys(g).forEach(s=>{const v=T.find(_=>`${_.id}`===s);y=y.concat(g[s].filter(_=>this.dataTypes.isDefined(c.r.of(_.dataType))).map(_=>new t.v(this.UNKNOWN_TASK_FIELD_ID,this.createExtPlatformField(_,v),!1,Number(s))))}),y}parseGlobalFields(g){return g.filter(T=>this.dataTypes.isDefined(T.dataType)).map(T=>new t.v(l.Z.fromNumber(T.fieldId),this.fieldDefinitionFactory.fromAvailableField({dataType:T.dataType,name:T.fieldName,label:T.fieldName,origin:i.B.create()}),!0,r.n))}parseGlobalFieldsDTO(g){return g.filter(T=>this.dataTypes.isDefined(c.r.of(T.dataType))).map(T=>new t.v(l.Z.fromNumber(T.fieldId),this.fieldDefinitionFactory.fromAvailableField({dataType:T.dataType,name:T.fieldName,label:T.fieldName,origin:i.B.create()}),!0,r.n))}createExtPlatformField(g,T){return this.fieldDefinitionFactory.fromAvailableField(Object.assign(Object.assign({},g),{name:g.extPlatformFieldId,origin:{id:T.id,name:T.name,type:T.extPlatformType.name}}))}}return u.\u0275fac=function(g){return new(g||u)(m.LFG(o.v),m.LFG(a.a))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})()},13745:(A,p,e)=>{e.d(p,{bn:()=>l,fk:()=>a,jW:()=>i});const t="[AvailableFields]",l={FetchAvailableFieldsAction:`${t}FetchAvailableFieldsAction`,FetchAvailableFieldsSuccessAction:`${t}FetchAvailableFieldsSuccessAction`,FetchAvailableFieldsFailureAction:`${t}FetchAvailableFieldsFailureAction`};class a{constructor(c){this.payload=c,this.type=l.FetchAvailableFieldsAction}}class i{constructor(c){this.payload=c,this.type=l.FetchAvailableFieldsSuccessAction}}},10488:(A,p,e)=>{e.d(p,{f:()=>i});var t=e(13745),l=e(84046),a=e(25468);let i=(()=>{class r{constructor(c){this.store=c}fetchAvailableFields(c=!1){this.store.dispatch(new t.fk({includeInternalFields:c}))}}return r.\u0275fac=function(c){return new(c||r)(l.LFG(a.yh))},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac}),r})()},5605:(A,p,e)=>{e.d(p,{q:()=>B});var t=e(55331),l=e(25468),a=e(43786),i=e(88317),r=e(10488),o=e(2859),c=e(17578),m=e(13745),h=e(61921),u=e(83155),d=e(2421),g=e(84046),T=e(11531),y=e(83950);let s=(()=>{class P extends u.a{constructor(L,J){super(L),this.environmentService=J}getAllAvailableFields(L=!1){return this.get(`fields/available/?includeInternal=${L}`).pipe((0,d.W)(h.M))}getRestUrl(L){return`${this.environmentService.getRestBaseUrl()}ppm/task/${L}`}}return P.\u0275fac=function(L){return new(L||P)(g.LFG(T.O),g.LFG(y.L))},P.\u0275prov=g.Yz7({token:P,factory:P.\u0275fac}),P})();var v=e(55757),_=e(71726),f=e(98274),I=e(32271),D=e(88945);class W{constructor(R,L,J,k){this.actions$=R,this.availableFieldsParser=L,this.availableFieldsResource=J,this.extPlatformRepository=k,this.fetchSortStrategy$=this.actions$.pipe((0,a.l4)(m.bn.FetchAvailableFieldsAction),(0,_.U)(b=>b.payload),(0,f.w)(b=>(0,v.D)([this.availableFieldsResource.getAllAvailableFields(null==b?void 0:b.includeInternalFields),this.extPlatformRepository.select().pipe((0,I.n)(U=>!U||!U.length),(0,D.P)())]).pipe((0,_.U)(([U,x])=>new m.jW(this.getFieldsDefinition(U,x))))))}getFieldsDefinition(R,L){return[...this.availableFieldsParser.parseExtPlatformFieldsDTO(R.allFieldsForExtPlatforms,L),...this.availableFieldsParser.parseGlobalFieldsDTO(R.globalFieldDefinitions)]}}W.\u0275fac=function(R){return new(R||W)(g.LFG(a.eX),g.LFG(c.T),g.LFG(s),g.LFG(o.G))},W.\u0275prov=g.Yz7({token:W,factory:W.\u0275fac}),function(P,R,L,J){var U,k=arguments.length,b=k<3?R:null===J?J=Object.getOwnPropertyDescriptor(R,L):J;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)b=Reflect.decorate(P,R,L,J);else for(var x=P.length-1;x>=0;x--)(U=P[x])&&(b=(k<3?U(b):k>3?U(R,L,b):U(R,L))||b);k>3&&b&&Object.defineProperty(R,L,b)}([(0,a.Qm)(),function(P,R){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],W.prototype,"fetchSortStrategy$",void 0);var C=e(73877);class E extends C.Z{constructor(){super(...arguments),this.fields=[],this.includeInternalFields=!1,this.fetched=!1}}const n=new E;function Z(P=n,R){switch(R.type){case m.bn.FetchAvailableFieldsSuccessAction:return Object.assign(new E,P,{fields:R.payload,fetched:!0});default:return P}}var O=e(86392);let B=(()=>{class P{}return P.\u0275fac=function(L){return new(L||P)},P.\u0275mod=g.oAB({type:P}),P.\u0275inj=g.cJS({providers:[i.U,r.f,s,c.T],imports:[[t.ez,t.ez,l.Aw.forFeature(i._,Z),a.sQ.forFeature([W]),O.D]]}),P})()},88317:(A,p,e)=>{e.d(p,{_:()=>c,U:()=>m});var t=e(25468),l=e(10488),a=e(45635),i=e(71726),r=e(70822),o=e(84046);const c="AVAILABLE_FIELDS";let m=(()=>{class h{constructor(d,g){this.store=d,this.commandDispatcher=g,this.createStoreSelector()}selectFields(d=!1){return this.store.pipe((0,t.Ys)(this.getAvailableFields),(0,a.b)(g=>{(!g.fetched||g.includeInternalFields!==d)&&this.commandDispatcher.fetchAvailableFields(d)}),(0,i.U)(g=>g.fields),(0,r.h)(g=>g.length>0))}createStoreSelector(){const d=(0,t.ZF)(c),g=(0,t.P1)(d,T=>T);this.getAvailableFields=(0,t.P1)(g,T=>T)}}return h.\u0275fac=function(d){return new(d||h)(o.LFG(t.yh),o.LFG(l.f))},h.\u0275prov=o.Yz7({token:h,factory:h.\u0275fac}),h})()},13617:(A,p,e)=>{e.d(p,{Y:()=>d});class t{}var l=e(60903),a=e(88401),i=e(34373),r=e(40813),o=e(50870),c=e(85847),m=e(17542),h=function(g,T,y,s){var f,v=arguments.length,_=v<3?T:null===s?s=Object.getOwnPropertyDescriptor(T,y):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(g,T,y,s);else for(var I=g.length-1;I>=0;I--)(f=g[I])&&(_=(v<3?f(_):v>3?f(T,y,_):f(T,y))||_);return v>3&&_&&Object.defineProperty(T,y,_),_},u=function(g,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,T)};class d extends m.M{getClassName(){return"SimpleTaskDTO"}}h([(0,l.qA)(),u("design:type",Number)],d.prototype,"taskId",void 0),h([(0,a.X)(),u("design:type",Boolean)],d.prototype,"accessible",void 0),h([(0,i.si)(),u("design:type",Boolean)],d.prototype,"editable",void 0),h([(0,i.si)(),u("design:type",Boolean)],d.prototype,"doNotFitFilter",void 0),h([(0,c.D)(()=>t),(0,r.j)({each:!0}),u("design:type",Object)],d.prototype,"fields",void 0),h([(0,o.XV)(),u("design:type",String)],d.prototype,"uri",void 0)},53498:(A,p,e)=>{e.d(p,{y:()=>a});var t=e(27609),l=e(84046);let a=(()=>{class i extends t.V{constructor(){super()}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},29827:(A,p,e)=>{e.d(p,{a:()=>T});var t=e(66134),l=e(37289),a=e(32389),i=e(26123),r=e(4816),o=e(80358),c=e(53339),m=e(98274),h=e(63833),u=e(71118),d=e(84046),g=e(9274);let T=(()=>{class y{constructor(v,_,f,I,D,S,M){this.columnViewService=v,this.columnViewStorageService=_,this.configRepositoryService=f,this.fieldConfigResource=I,this.allAvailableFieldsStorage=D,this.favouriteViewsStorageService=S,this.selectColumnViewIdStorageService=M}fetchColumnViewsAndAvailableFields(v){!u.l.isDefined(v)||v===this.prevCode||(this.prevCode=v,this.fetchColumnViews().pipe((0,m.w)(()=>this.fieldConfigResource.fetchAllAvailableFields()),(0,h.q)(1)).subscribe(_=>this.allAvailableFieldsStorage.set(_)))}fetchColumnViews(){return this.columnViewService.fetchViews().pipe((0,h.q)(1),(0,m.w)(v=>(this.columnViewStorageService.set(v.views),this.favouriteViewsStorageService.set(v.favouriteViewIds),this.selectColumnViewIdStorageService.set(v.selectedViewId),v.fieldConfigs.forEach((_,f)=>{_.sort((I,D)=>I.columnIndex<D.columnIndex?-1:1),this.configRepositoryService.set(f,_)}),(0,c.of)(v))))}addOrUpdateColumnView(v,_){const f=this.columnViewStorageService.get().filter(I=>I.id!==v.id);f.push(v),this.columnViewStorageService.set(f),this.configRepositoryService.set(v.id,_)}}return y.\u0275fac=function(v){return new(v||y)(d.LFG(t.u),d.LFG(l.H),d.LFG(i.F),d.LFG(g.Q),d.LFG(o.h),d.LFG(a.$),d.LFG(r.Z))},y.\u0275prov=d.Yz7({token:y,factory:y.\u0275fac}),y})()},66134:(A,p,e)=>{e.d(p,{u:()=>l});var t=e(62628);class l extends t.b{}},37289:(A,p,e)=>{e.d(p,{H:()=>a});var t=e(27609),l=e(84046);let a=(()=>{class i extends t.V{constructor(){super()}getById(o){return this.get().find(c=>c.id===o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},32389:(A,p,e)=>{e.d(p,{$:()=>a});var t=e(27609),l=e(84046);let a=(()=>{class i extends t.V{constructor(){super()}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},26123:(A,p,e)=>{e.d(p,{F:()=>a});var t=e(94062),l=e(84046);let a=(()=>{class i extends t._{constructor(){super()}compare(o,c){return o===c}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},8164:(A,p,e)=>{e.d(p,{X:()=>T});var t=e(53498),l=e(29827),a=e(37289),i=e(32389),r=e(26123),o=e(4816),c=e(37625),m=e(28523),h=e(24298),u=e(35226),d=e(84046);const g=[c.t,m.q,l.a,i.$,o.Z,a.H,r.F,t.y,h.z,u.R];let T=(()=>{class y{static forChild(){return{ngModule:y,providers:g}}}return y.\u0275fac=function(v){return new(v||y)},y.\u0275mod=d.oAB({type:y}),y.\u0275inj=d.cJS({}),y})()},4816:(A,p,e)=>{e.d(p,{Z:()=>a});var t=e(27609),l=e(84046);let a=(()=>{class i extends t.V{constructor(){super()}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},35226:(A,p,e)=>{e.d(p,{R:()=>i});var t=e(71079),l=e(53339),a=e(84046);let i=(()=>{class r{constructor(c){this.columnViewCommandService=c}canActivate(c,m){return this.removeQueryParams(m.url)!==this.removeQueryParams(this.prevComponent)&&(this.columnViewCommandService.truncate(),this.prevComponent=m.url),(0,l.of)(!0)}removeQueryParams(c){return c&&c.split("?")[0]}}return r.\u0275fac=function(c){return new(c||r)(a.LFG(t.J))},r.\u0275prov=a.Yz7({token:r,factory:r.\u0275fac}),r})()},80065:(A,p,e)=>{e.d(p,{L:()=>St,X:()=>Fe});var t=e(55331),l=e(70335),a=e(27358),i=e(17084),r=e(65235),o=e(5605),c=e(28693),m=e(59999),h=e(12701),u=e(8154),d=e(30293),g=e(8650),T=e(79510),y=e(53339),s=e(84046);let v=(()=>{class N{markAsFavourite(w){return console.warn("Mark as favourite not implemented"),(0,y.of)()}unmarkFromFavourite(w){return console.warn("Unmark from favourite not implemented"),(0,y.of)()}}return N.\u0275fac=function(w){return new(w||N)},N.\u0275prov=s.Yz7({token:N,factory:N.\u0275fac}),N})(),_=(()=>{class N{selectView(w){return console.warn("Select view not implemented"),(0,y.of)()}}return N.\u0275fac=function(w){return new(w||N)},N.\u0275prov=s.Yz7({token:N,factory:N.\u0275fac}),N})();e(38651);var I=e(38009),D=e(18709),S=e(54561),M=e(43349),W=e(63833),C=e(71726),E=e(22521);let n=(()=>{class N{constructor(w){this.commandRepository=w,this.TREE_RENDER_TIME=150}selectColumnViewPending(){return(0,I.T)(this.commandRepository.selectForCommandByType("AddFieldConfigToWorkingAreaCommand"),this.commandRepository.selectForCommandByType("RemoveFieldConfigFromWorkingAreaCommand")).pipe((0,D.zg)(()=>this.selectFetchAllColumnViewsSuccessCommand()),(0,S.g)(this.TREE_RENDER_TIME))}selectFetchAllColumnViewsSuccessCommand(){return this.commandRepository.selectForCommandByType("FetchAllColumnViewsSuccessCommand").pipe((0,M.O)(null),(0,W.q)(2),(0,C.U)(w=>!w))}}return N.\u0275fac=function(w){return new(w||N)(s.LFG(E.F))},N.\u0275prov=s.Yz7({token:N,factory:N.\u0275fac}),N})();e(70115),e(83043),e(60143),e(90578),e(599),e(28819),e(29186),e(92574),e(67743),e(62546),e(48245),e(98222),e(70989),e(43939),e(81171);var ne=e(68890);e(2884),e(33769),e(65799),e(18217),e(13503);var ee=e(98274);e(44938),e(43234),e(38768),e(53488),e(83941),e(14650),e(83372),e(7321),e(66319),e(19446),e(74482),e(2100),e(29893),e(38663),e(65521),e(58915);var Je=e(35227),je=(e(30516),e(98169)),ze=e(28579),Xe=e(96554),$e=e(19537),ke=e(51545),qe=e(12002),et=e(79047),tt=e(84974),it=e(62807),ot=e(48876),nt=e(28722),st=e(85013),rt=e(92944),at=e(37869),dt=(e(81915),e(85137),e(88816)),ct=e(8164),Me=e(66134),ut=e(48002),pt=e(97809),mt=e(78563),vt=e(29051),ft=e(54896),ht=e(47106),gt=e(43308),xe=e(37081),Ct=e(37391),Tt=e(35981),_t=e(7685),Et=e(66706),yt=e(7668),xt=e(42738),It=e(37625),Dt=e(28523);let Ot=(()=>{class N extends Me.u{constructor(w,G,q,le,oe,me){super(),this.columnViewModuleCode=w,this.boxTypeColumnViewResource=G,this.boxTypeViewResource=q,this.boxTypeContainerService=le,this.columnViewConverter=oe,this.fieldConfigConverter=me,this.boxTypeId=null,this.boxTypesLoaded$=new pt.t(1),le.selectBoxTypeId().pipe(this.takeUntilDestroy()).subscribe(Te=>{this.boxTypeId=Te,this.boxTypesLoaded$.next()})}fetchViews(){return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeColumnViewResource.getViews(this.boxTypeId,this.getViewType())),(0,C.U)(w=>this.convertFetchResponse(w)))}deleteView(w){return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeViewResource.delete(this.boxTypeId,w)))}addView(w,G,q,le){const oe=new ht.V(w,G,q,le);return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeColumnViewResource.addColumnView(this.boxTypeId,oe)),(0,C.U)(me=>me),(0,C.U)(me=>new xe.Y(this.columnViewConverter.fromDTO(me),this.fieldConfigConverter.fromDTOs(me.fieldConfigs))))}addColumnInView(w,G,q){const le=new mt.D(G,q);return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeColumnViewResource.addColumnInColumnView(this.boxTypeId,w,le)),(0,C.U)(oe=>oe),(0,C.U)(oe=>new xe.Y(this.columnViewConverter.fromDTO(oe),this.fieldConfigConverter.fromDTOs(oe.fieldConfigs))))}deleteColumnInView(w,G,q,le){return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeColumnViewResource.deleteColumnInColumnView(this.boxTypeId,w,G,q,le)),(0,C.U)(oe=>oe),(0,C.U)(oe=>new xe.Y(this.columnViewConverter.fromDTO(oe),this.fieldConfigConverter.fromDTOs(oe.fieldConfigs))))}reorderViewFields(w,G,q,le){const oe=new vt.U(G,q,le);return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeColumnViewResource.reorderColumnViewFields(this.boxTypeId,w,oe)),(0,C.U)(me=>me),(0,C.U)(me=>new xe.Y(this.columnViewConverter.fromDTO(me),this.fieldConfigConverter.fromDTOs(me.fieldConfigs))))}restoreToOrigin(w){return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeViewResource.restoreToOrigin(this.boxTypeId,w)))}saveAsNew(w,G,q,le){const oe=new gt.m(G,q,le);return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeViewResource.saveAsNew(this.boxTypeId,w,oe)),(0,C.U)(me=>me),(0,C.U)(me=>new xe.Y(this.columnViewConverter.fromDTO(me),this.fieldConfigConverter.fromDTOs(me.fieldConfigs))))}saveToOrigin(w){return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeViewResource.saveToOrigin(this.boxTypeId,w)))}updateColumnInView(w,G,q){const le=new ft.v(G,q);return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeColumnViewResource.updateColumnInColumnView(this.boxTypeId,w,le)),(0,C.U)(oe=>oe),(0,C.U)(oe=>new xe.Y(this.columnViewConverter.fromDTO(oe),this.fieldConfigConverter.fromDTOs(oe.fieldConfigs))))}updateView(w,G,q,le,oe){const me=new Tt.G(G,q,le,oe);return this.waitForBoxTypeId().pipe((0,ee.w)(()=>this.boxTypeViewResource.update(this.boxTypeId,w,me)),(0,C.U)(Te=>Te),(0,C.U)(Te=>new xe.Y(this.columnViewConverter.fromDTO(Te),this.fieldConfigConverter.fromDTOs(Te.fieldConfigs))))}waitForBoxTypeId(){return this.boxTypesLoaded$.pipe((0,W.q)(1))}convertFetchResponse(w){const G=new Map;for(const q of w)G.set(q.id,this.fieldConfigConverter.fromDTOs(q.fieldConfigs));return new Ct.O([],null,this.columnViewConverter.fromDTOs(w),G)}getViewType(){return`${this.columnViewModuleCode.getCode()}_COLUMN`}}return N.\u0275fac=function(w){return new(w||N)(s.LFG(Et.L),s.LFG(yt.Q),s.LFG(xt.$),s.LFG(_t.PB),s.LFG(It.t),s.LFG(Dt.q))},N.\u0275prov=s.Yz7({token:N,factory:N.\u0275fac}),N})();var wt=e(21937),At=e(41001),Rt=e(26566),Pt=e(85046),Vt=e(8858);e(7503);const Bt=[t.ez,l.u5,o.q,l.UX,$e.Z.forRoot(),it.nv.forRoot(),ke.F,ne.z8,et.C,nt.v.forRoot(),st.D.forRoot(),at.o,qe.K,rt.$,ze.X,Vt.f,a.i,ot.y,wt.lK.forRoot()],Ne=[n,v,_,je.O,Je.T,dt.q];let Fe=(()=>{class N{}return N.\u0275fac=function(w){return new(w||N)},N.\u0275mod=s.oAB({type:N}),N.\u0275inj=s.cJS({imports:[[...Bt,c.z,tt.A,i.f,r.M,At.J,ct.X,Xe.gF.forStyle(e.e(8347).then(e.t.bind(e,8347,17))),Rt.n,Pt.x]]}),N})(),St=(()=>{class N{static forBox(w,G,q,le,oe=T.x){return{ngModule:Fe,providers:[...Ne,{provide:Me.u,useClass:ut.c},{provide:g.X,useClass:w},{provide:h.X,useClass:G},{provide:m.u,useClass:q},{provide:u.E,useClass:le},{provide:d.S,useClass:oe}]}}static forBoxType(w,G,q=T.x){return{ngModule:Fe,providers:[...Ne,{provide:Me.u,useClass:Ot},{provide:g.X,useClass:w},{provide:h.X,useClass:G},{provide:m.u,useClass:v},{provide:u.E,useClass:_},{provide:d.S,useClass:q}]}}}return N.\u0275fac=function(w){return new(w||N)},N.\u0275mod=s.oAB({type:N}),N.\u0275inj=s.cJS({}),N})()},16130:(A,p,e)=>{e.d(p,{R:()=>y});var t=e(81890),l=e(35460),a=e(48058),i=e(75596),r=e(56509),o=e(53770),c=e(88983),m=e(70204),h=e(99609),u=e(5498),d=e(16),g=e(16599),T=e(84046);let y=(()=>{class s extends g.R{constructor(_,f){super(),this.dataTypes=_,this.fieldCollectionFactory=f}create(_,f,I){const D=super.create(_,f,I);return D.entity=this.toEntity(this.createTask(f)),D.fieldDefinition=this.toFieldDefinition(this.createDecorator(_,f)),"TEXT"===_.id&&(D.config={showDots:!0}),D}createDecorator(_,f){const I=!f&&f.isGroupChild&&!f.getIsGroup();return new t.S(_.fieldId,h.J[`${_.decoratorType.value}`],_.name,this.createFieldLabelName(_.header,_.origin),1,1,_.aggregation?_.aggregation.value:null,_.distribute?_.distribute.value:null,_.type,I)}createFieldLabelName(_,f){return d.r.resolve(_,f)}createTask(_){const f=_.getData().data.key+"",I=_.getData().data.editable;return l.i.fromRaw({editable:void 0===I||I,fields:_.data.columns,taskKey:f,taskId:_.getId(),uri:_.data.uri})}toFieldDefinition(_){const f=_.fieldType,I=_.distribute,D=_.aggregation,S=I&&I!==o.H.toString(),M=D&&D!==o.H.toString(),W=r.I.of(S?I:M?D:o.H.toString()),C=this.dataTypes.get(f).getFieldBuilder(_.fieldId).withFieldName(_.fieldName).withDecorator(_.decoratorType).withLabelName(d.r.resolve(_.fieldLabel,_.origin)).withAggregation(W).withEditable(!0).build();return f.equals(c.E)&&C.align(u.x.RIGHT),C}toEntity(_){const f=_.taskId?String(_.taskId):_.taskKey.taskKey;return new m.J(f,this.fieldCollectionFactory.fromRaw(_.fields),_.editable,!0,_.fieldsEditability)}}return s.\u0275fac=function(_){return new(_||s)(T.LFG(i.v),T.LFG(a.b))},s.\u0275prov=T.Yz7({token:s,factory:s.\u0275fac}),s})()},37391:(A,p,e)=>{e.d(p,{O:()=>t});class t{constructor(a,i,r,o){this.favouriteViewIds=a,this.selectedViewId=i,this.views=r,this.fieldConfigs=o}}},37081:(A,p,e)=>{e.d(p,{Y:()=>t});class t{constructor(a,i){this.columnView=a,this.fieldConfigs=i}}},88816:(A,p,e)=>{e.d(p,{q:()=>u});var t=e(79411),l=e(85703);class a{constructor(g,T,y,s,v,_){this.fieldId=g,this.name=T,this.type=y,this.originId=s,this.label=v,this.extPlatformFieldId=_,this.id=(0,l.Hu)()}getFieldId(){return this.fieldId}getName(){return this.name}getType(){return this.type}getOriginId(){return this.originId}getLabel(){return this.label}getExtPlatformFieldId(){return this.extPlatformFieldId}}var i=e(94615),r=e(75596),o=e(16519),c=e(47868),m=e(53770),h=e(84046);let u=(()=>{class d{constructor(T){this.dataTypes=T}fromAllAvailableFieldsDTO(T){const _=[...T.globalFieldDefinitions.map(I=>new a(I.fieldId,I.fieldName,c.r.of(I.dataType),i.n,I.fieldName)),...Object.keys(T.allFieldsForExtPlatforms).map(I=>T.allFieldsForExtPlatforms[I].map(S=>new a(null,S.label,c.r.of(S.dataType),Number(I),S.label,S.extPlatformFieldId))).reduce((I,D)=>[...I,...D],[])].filter(I=>this.dataTypes.isDefined(I.getType())),f=(0,o.B)(I=>I.getOriginId(),i.n,I=>I.getName());return _.sort(f)}toColumnViewField(T,y){return new t.$(T.getFieldId(),T.getName(),this.getDefaultDisplay(T),m.H.toString(),m.H.toString(),"",!1,T.getOriginId()===i.n,y,T.getType().toString(),T.getOriginId(),T.getExtPlatformFieldId())}getDefaultDisplay(T){return this.dataTypes.get(T.getType()).getDefaultDecorator()}}return d.\u0275fac=function(T){return new(T||d)(h.LFG(r.v))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac}),d})()},37625:(A,p,e)=>{e.d(p,{t:()=>a});class t{constructor(r,o,c,m,h,u,d){this.description=r,this.id=o,this.inEditMode=c,this.inheritedFromRefId=m,this.inheritedFromType=h,this.name=u,this.prv=d}}var l=e(84046);let a=(()=>{class i{fromDTO(o){return new t(o.description,o.id,o.inEditMode,o.inheritedFromRefId,o.inheritedFromType,o.name,o.prv)}fromDTOs(o){return o.map(c=>this.fromDTO(c))}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},28523:(A,p,e)=>{e.d(p,{q:()=>a});class t{constructor(r,o,c,m,h,u,d,g,T,y,s,v,_,f,I,D,S,M,W){this.aggregation=r,this.aggregations=o,this.align=c,this.columnIndex=m,this.decoratorType=h,this.flex=u,this.resize=d,this.root=g,this.width=T,this.dataType=y,this.distribute=s,this.distributes=v,this.isGlobal=_,this.isSortable=f,this.label=I,this.name=D,this.taskFieldId=S,this.extPlatformId=M,this.isEditable=W}}var l=e(84046);let a=(()=>{class i{fromDTO(o){const c=o.configuration;return new t(o.aggregation,o.aggregations,c.align,c.columnIndex,c.decoratorType,c.flex,c.resize,c.root,c.width,o.dataType,o.distribute,o.distributes,o.isGlobal,o.isSortable,o.label,o.name,o.taskFieldId,o.extPlatformId,o.isEditable)}fromDTOs(o){return o.map(c=>this.fromDTO(c))}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},8650:(A,p,e)=>{e.d(p,{X:()=>t});class t{}},58519:(A,p,e)=>{e.d(p,{s:()=>h});var t=e(50870),l=e(34373),a=e(88401),i=e(60903),r=e(17542),o=function(u,d,g,T){var v,y=arguments.length,s=y<3?d:null===T?T=Object.getOwnPropertyDescriptor(d,g):T;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(u,d,g,T);else for(var _=u.length-1;_>=0;_--)(v=u[_])&&(s=(y<3?v(s):y>3?v(d,g,s):v(d,g))||s);return y>3&&s&&Object.defineProperty(d,g,s),s},c=function(u,d){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,d)};class m extends r.M{getClassName(){return"SimpleFieldConfigDTO"}}o([(0,t.XV)(),c("design:type",String)],m.prototype,"name",void 0),o([(0,t.XV)(),c("design:type",String)],m.prototype,"label",void 0),o([(0,t.XV)(),c("design:type",String)],m.prototype,"dataType",void 0),o([(0,t.XV)({each:!0}),c("design:type",Array)],m.prototype,"aggregations",void 0),o([(0,t.XV)({each:!0}),c("design:type",Array)],m.prototype,"distributes",void 0);class h extends m{getClassName(){return"FieldConfigDTO"}}o([(0,l.si)(),c("design:type",Boolean)],h.prototype,"customField",void 0),o([(0,a.X)(),c("design:type",Object)],h.prototype,"configuration",void 0),o([(0,t.XV)(),c("design:type",String)],h.prototype,"aggregation",void 0),o([(0,t.XV)({each:!0}),c("design:type",Array)],h.prototype,"aggregations",void 0),o([(0,t.XV)({each:!0}),c("design:type",Array)],h.prototype,"distributes",void 0),o([(0,t.XV)(),c("design:type",String)],h.prototype,"distribute",void 0),o([(0,t.XV)({each:!0}),c("design:type",Array)],h.prototype,"availableAggregations",void 0),o([(0,i.qA)(),c("design:type",Number)],h.prototype,"taskFieldId",void 0),o([(0,i.qA)(),c("design:type",Number)],h.prototype,"extPlatformId",void 0),o([(0,a.X)(),(0,t.XV)(),c("design:type",String)],h.prototype,"extPlatformFieldId",void 0),o([(0,l.si)(),c("design:type",Boolean)],h.prototype,"isGlobal",void 0),o([(0,l.si)(),c("design:type",Boolean)],h.prototype,"isSortable",void 0),o([(0,l.si)(),c("design:type",Boolean)],h.prototype,"isGroupable",void 0),o([(0,a.X)(),c("design:type",String)],h.prototype,"defaultAggregation",void 0),o([(0,a.X)(),c("design:type",Boolean)],h.prototype,"isEditable",void 0)},38651:(A,p,e)=>{e.d(p,{b:()=>o});var t=e(84046),l=e(55331),a=e(68890),i=e(18217);function r(c,m){if(1&c&&(t._UZ(0,"i",1),t.ALo(1,"spRichTextI18n")),2&c){const h=t.oxw();t.Q6J("spTooltip",t.lcZ(1,1,h.tooltipText))}}let o=(()=>{class c{ngOnChanges(){this.setTooltipText()}setTooltipText(){this.tooltipText="Inherited from "+this.getInheritedBoxName()}getInheritedBoxName(){return this.inheritedBoxQuery?this.inheritedBoxQuery.getName().value:""}}return c.\u0275fac=function(h){return new(h||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["sp-column-view-inheritance-indicator"]],inputs:{inheritedBoxQuery:"inheritedBoxQuery",isInherited:"isInherited"},features:[t.TTD],decls:1,vars:1,consts:[["class","fas fa-level-up-alt sp-column-view-selected",3,"spTooltip",4,"ngIf"],[1,"fas","fa-level-up-alt","sp-column-view-selected",3,"spTooltip"]],template:function(h,u){1&h&&t.YNc(0,r,2,3,"i",0),2&h&&t.Q6J("ngIf",u.isInherited)},directives:[l.O5,a.i9],pipes:[i.d],encapsulation:2,changeDetection:0}),c})()},70115:(A,p,e)=>{e.d(p,{e:()=>de,B:()=>j});var t=e(84046),l=e(45432),a=e(97809),i=e(71726),r=e(96105),o=e(8163);let c=(()=>{class Q extends o.Q{constructor(){super(...arguments),this.entityIdToEntity=new Map,this.changes$=new a.t(1)}setEntities(V){for(const K of V)this.entityIdToEntity.set(`${K.id}`,K);this.changes$.next()}selectEntity$(V){return this.changes$.pipe((0,i.U)(()=>this.entityIdToEntity.get(`${V}`)),(0,r.x)())}}return Q.\u0275fac=function(){let se;return function(K){return(se||(se=t.n5z(Q)))(K||Q)}}(),Q.\u0275prov=t.Yz7({token:Q,factory:Q.\u0275fac}),Q})();var m=e(35460),h=e(16130),u=e(75596),d=e(48058);let g=(()=>{class Q extends h.R{constructor(V,K){super(V,K)}createTask(V){const K=V.getData();return new m.i(!1,K.fields,K.taskKey,K.id,K.uri,K.fieldsEditability)}}return Q.\u0275fac=function(V){return new(V||Q)(t.LFG(u.v),t.LFG(d.b))},Q.\u0275prov=t.Yz7({token:Q,factory:Q.\u0275fac}),Q})();var T=e(53339),y=e(98274),s=e(70822),v=e(45635),_=e(91771),f=e(85431),I=e(75962),D=e(37289),S=e(26123),M=e(53498),W=e(66134),C=e(79411),E=e(29827);let n=(()=>{class Q extends I.t{constructor(V,K,$,ce,fe,he,ge){super(),this.columnViewQueryConverter=V,this.treePerspectiveFactory=K,this.columnViewStorageService=$,this.fieldConfigRepositoryService=ce,this.activeColumnViewIdStorageService=fe,this.columnViewService=he,this.columnViewFetchService=ge,this.fields=[]}selectPerspectives$(){return this.activeColumnViewIdStorageService.select().pipe((0,y.w)(V=>this.getColumnViewTreePerspectives(V)))}updatePerspective$(V,K){if(K.type===_.MF.CHANGE_COLUMN_FLEX_STYLES){const $=K.payload.firstColumn.nodeId,ce=K.payload.secondColumn.nodeId,fe=V.getColumnsFromCollection(),he=fe.find(ve=>ve.id===$),ge=fe.find(ve=>ve.id===ce),_e=this.fields.find(ve=>ve.taskFieldId===he.fieldId.toNumber()),Ee=this.fields.find(ve=>ve.taskFieldId===ge.fieldId.toNumber()),ye=[this.getColumnViewField(he,K.payload.firstColumn.flex,_e,fe),this.getColumnViewField(ge,K.payload.secondColumn.flex,Ee,fe)];this.columnViewService.updateColumnInView(this.activeColumnViewId,ye,!1).subscribe(ve=>{this.columnViewFetchService.addOrUpdateColumnView(ve.columnView,ve.fieldConfigs),this.activeColumnViewIdStorageService.set(ve.columnView.id)})}return(0,T.of)(!0)}addColumn$(V){return(0,T.of)(!0)}getColumnViewField(V,K,$,ce){return new C.$(V.fieldId.toNumber(),V.name,V.decoratorType.value,V.aggregation.value,V.distribute.value,K,$.root,$.isGlobal,ce.indexOf(V),V.type.toString(),$.isGlobal?$.extPlatformId:void 0,$.isGlobal?$.name:void 0)}getColumnViewTreePerspectives(V){return this.columnViewStorageService.select().pipe((0,s.h)(K=>!!K.find($=>$.id===V)),(0,i.U)(K=>K.find($=>$.id===V)),(0,s.h)(K=>!!K),(0,v.b)(K=>{this.activeColumnViewId=K.id,this.fields=this.fieldConfigRepositoryService.get(K.id,[])}),(0,i.U)(K=>this.columnViewQueryConverter.fromColumnView(K,this.fields)),(0,i.U)(K=>[this.treePerspectiveFactory.createViewPerspective(K)]))}}return Q.\u0275fac=function(V){return new(V||Q)(t.LFG(l.L),t.LFG(f.h),t.LFG(D.H),t.LFG(S.F),t.LFG(M.y),t.LFG(W.u),t.LFG(E.a))},Q.\u0275prov=t.Yz7({token:Q,factory:Q.\u0275fac}),Q})();var Z=e(18840);let O=(()=>{class Q{constructor(){this.columnViewId$=new Z.X(Q.COLUMN_VIEW_ID_INITIAL_VALUE)}select(){return this.columnViewId$.asObservable()}setColumnViewId(V){this.columnViewId$.next(V)}}return Q.COLUMN_VIEW_ID_INITIAL_VALUE=1,Q.\u0275fac=function(V){return new(V||Q)},Q.\u0275prov=t.Yz7({token:Q,factory:Q.\u0275fac}),Q})();var B=e(70204),P=e(29186),R=e(73790),L=e(81503),J=e(16599),k=e(62546),b=e(22767),U=e(83941),x=e(38768),H=e(45464),te=e(55331),ae=e(92574),ue=e(48082),z=e(380);function ne(Q,se){if(1&Q){const V=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"sp-task-picker",4),t.NdJ("optionSelected",function($){return t.CHM(V),t.oxw().setTaskToDisplay($)}),t.qZA(),t.qZA()}if(2&Q){const V=t.oxw();t.xp6(1),t.Q6J("taskFieldNames",V.taskFieldNames)("viewId",V.columnView.id)}}function F(Q,se){if(1&Q&&t._UZ(0,"sp-splash-screen",5),2&Q){const V=t.oxw();t.Q6J("config",V.splashScreenConfig)}}const j=new t.OlP("DISABLE_COLUMN_VIEW_PREVIEW_TASK_SELECT");let de=(()=>{class Q extends k.H{constructor(V,K,$,ce,fe,he,ge,_e,Ee,ye,ve,X,ee,Y){super(V,K),this.changeDetectorRef=$,this.columnViewQueryRepository=ce,this.columnViewQueryConverter=fe,this.treePerspectiveFactory=he,this.columnViewIdDefinition=ge,this.columnViewPreviewFieldValueRepository=_e,this.activeColumnViewIdStorageService=Ee,this.columnViewStorageService=ye,this.fieldConfigRepositoryService=ve,this.fieldCollectionFactory=X,this.columnViewTaskPickerPreviewResource=ee,this.disableSelect=Y,this.config=P.Z.default(),this.previewNodes=[],this.taskFieldNames=[]}ngOnInit(){this.setSplashScreen(),this.observeColumnViewIdStorage(),this.observeFieldConfigRepositoryService()}setTaskToDisplay(V){this.columnViewTaskPickerPreviewResource.getTask(V.value,this.columnView.id).pipe(this.takeUntilDestroy()).subscribe(K=>{this.previewNodes=[Object.assign(Object.assign({},K),{id:K.taskId})];const $=this.previewNodes.map(ce=>new B.J(ce.id,this.fieldCollectionFactory.fromRaw(ce.fields),ce.editable,!0,ce.fieldsEditability));this.columnViewPreviewFieldValueRepository.setEntities($),this.changeDetectorRef.detectChanges()})}contentLoaded(){return(0,T.of)(null)}getHostClasses(){return["sp-column-view-preview","sp-flex","sp-flex-col","sp-h-full"]}observeColumnViewIdStorage(){this.activeColumnViewIdStorageService.select().pipe((0,i.U)(V=>this.columnViewStorageService.getById(V)),this.takeUntilDestroy()).subscribe(V=>{this.columnView=V,this.changeDetectorRef.detectChanges()})}observeFieldConfigRepositoryService(){this.activeColumnViewIdStorageService.select().pipe((0,y.w)(V=>this.fieldConfigRepositoryService.select(V)),this.takeUntilDestroy()).subscribe(V=>{this.taskFieldNames=V.map(K=>K.name),this.changeDetectorRef.detectChanges()})}setSplashScreen(){this.splashScreenConfig=(new b.V.Builder).withTitle(U.H.i18n("SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_PREVIEW_SPLASH_SCREEN_HEADER")).withDescription(U.H.i18n("SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_PREVIEW_SPLASH_SCREEN_DESCRIPTION")).build()}}return Q.\u0275fac=function(V){return new(V||Q)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(x.s),t.Y36(l.L),t.Y36(f.h),t.Y36(O),t.Y36(o.Q),t.Y36(M.y),t.Y36(D.H),t.Y36(S.F),t.Y36(d.b),t.Y36(H.d),t.Y36(j,8))},Q.\u0275cmp=t.Xpm({type:Q,selectors:[["sp-column-view-preview"]],features:[t._Bn([{provide:L.o,useValue:R.c.VIEW},{provide:I.t,useClass:n},{provide:J.R,useClass:g},{provide:o.Q,useClass:c},{provide:"TASK_CARD_MODULE",useValue:""},O]),t.qOj],decls:3,vars:5,consts:[["class","sp-task-preview-container sp-flex sp-items-center",4,"ngIf"],[3,"config","treeId","nodes"],["class","sp-column-view-preview__splash-screen sp-absolute sp-h-full sp-w-full sp-bg-gray-10",3,"config",4,"ngIf"],[1,"sp-task-preview-container","sp-flex","sp-items-center"],[3,"taskFieldNames","viewId","optionSelected"],[1,"sp-column-view-preview__splash-screen","sp-absolute","sp-h-full","sp-w-full","sp-bg-gray-10",3,"config"]],template:function(V,K){1&V&&(t.YNc(0,ne,2,2,"div",0),t._UZ(1,"sp-treegrid",1),t.YNc(2,F,1,1,"sp-splash-screen",2)),2&V&&(t.Q6J("ngIf",!!K.columnView&&!K.disableSelect),t.xp6(1),t.Q6J("config",K.config)("treeId","column-view-preview-tree")("nodes",K.previewNodes),t.xp6(1),t.Q6J("ngIf",K.disableSelect))},directives:[te.O5,ae.l,ue.$,z.w],styles:[".sp-column-view-preview{overflow-x:auto}.sp-column-view-preview .sp-task-preview-container{width:330px;margin-bottom:20px}.sp-column-view-preview .sp-task-preview-container .sp-task-preview-title{margin-right:10px;font-size:16px}.sp-column-view-preview .sp-task-preview-container sp-task-picker{width:100%}.sp-column-view-preview sp-treegrid{display:flex;flex-direction:column}.sp-column-view-preview__splash-screen{top:40px}\n"],encapsulation:2,changeDetection:0}),Q})()},93733:(A,p,e)=>{e.d(p,{n:()=>a});var t=e(27609),l=e(84046);let a=(()=>{class i extends t.V{constructor(){super()}goBack(){this.set()}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})()},35227:(A,p,e)=>{e.d(p,{T:()=>c});var t=e(2859),l=e(78526),a=e(89630),i=e(53339),r=e(71726),o=e(84046);let c=(()=>{class m{constructor(u){this.extPlatformRepository=u}resolveFieldExtPlatformOrigin(u){if(!u)return(0,i.of)((new a.D.Builder).withName(l.M).build());this.extPlatformRepository.selectAsMap().pipe((0,r.U)(d=>{const g=d.get(u);return(new a.D.Builder).withId(g.id).withName(g.name).withType(g.extPlatformType.name).withIconURL(g.extPlatformType.iconURL).withHomeURL(g.baseURL).build()}))}}return m.\u0275fac=function(u){return new(u||m)(o.LFG(t.G))},m.\u0275prov=o.Yz7({token:m,factory:m.\u0275fac}),m})()},81915:(A,p,e)=>{e.d(p,{L:()=>k});var t=e(84046),l=e(93733),a=e(80358),i=e(98169),r=e(73197),o=e(53339),c=e(62126),m=e(45635),h=e(98274),u=e(71726),d=e(56385),g=e(63833),T=e(62546),y=e(55331),s=e(17314),v=e(37289),_=e(66134),f=e(29827),I=e(26123),D=e(53498),S=e(88816),M=e(27609);let W=(()=>{class b extends M.V{constructor(){super(!1)}}return b.\u0275fac=function(x){return new(x||b)},b.\u0275prov=t.Yz7({token:b,factory:b.\u0275fac}),b})();var C=e(21937),E=e(70115),n=e(95900),Z=e(78609),O=e(16229),B=e(30516),P=e(58915),R=e(85137);const L=["sidebar"];function J(b,U){if(1&b){const x=t.EpF();t.TgZ(0,"sp-new-column-view-details-header",6),t.NdJ("leaveDetailViewClicked",function(){return t.CHM(x),t.oxw().leaveDetailView()})("commitChangesClicked",function(){return t.CHM(x),t.oxw().commitChanges()})("discardChangesClicked",function(){return t.CHM(x),t.oxw().discardChanges()})("removeClicked",function(){return t.CHM(x),t.oxw().removeColumnView()}),t.qZA()}if(2&b){const x=t.oxw();t.Q6J("activeColumnViewId",x.activeColumnViewId)("columnView",x.columnView)("pending",x.operationPending)}}let k=(()=>{class b extends T.H{constructor(x,H,te,ae,ue,z,ne,F,j,de,Q,se,V,K,$,ce,fe,he){super(x,H),this.changeDetectorRef=te,this.columnViewStorageService=ae,this.columnViewService=ue,this.columnViewFetchService=z,this.fieldConfigRepositoryService=ne,this.activeColumnViewIdStorageService=F,this.availableFieldItemConverter=j,this.allAvailableFieldsStorage=de,this.columnViewFieldItemConverter=Q,this.backActionService=se,this.columnViewDetailsFieldItemConverter=V,this.columnViewDetailsPendingService=K,this.messageService=$,this.document=ce,this.window=fe,this.injector=he,this.fieldItems=[],this.operationPending=!1}ngOnInit(){this.selectAllAvailableFieldsStorage(),this.selectColumnViewAndFieldConfig(),this.selectPending(),this.renderer.addClass(this.elementRef.nativeElement,"sp-overflow-hidden")}ngAfterViewInit(){this.setContainerHeight(),(0,r.R)(this.window,"resize").pipe((0,c.b)(250),this.takeUntilDestroy()).subscribe(()=>{this.setContainerHeight()}),this.sidebarContainer.defineSidebar(C.S5.default().withComponent(E.e).withPosition(n.X.SOUTH).withInjector(t.zs3.create({parent:this.injector,providers:[{provide:"TASK_CARD_MODULE",useValue:null}]})).withMode(C.f_.PUSH).withStorageToken("new-column-view-details").withLifecycleStrategy(C.kQ.default().withDestroy(C.RR.NEVER)).withResizeLimits((new C.Z_).withMinHeight(160)).withToggleBar(new C.yw("SPT_BOXCONFIG_COLUMN_VIEWS_PREVIEW").withId("sp-sidebar-toggle")))}selectAllAvailableFieldsStorage(){this.allAvailableFieldsStorage.select().pipe(this.takeUntilDestroy()).subscribe(x=>{this.fieldItems=this.availableFieldItemConverter.fromAllAvailableFieldsDTO(x),this.changeDetectorRef.detectChanges()})}selectColumnViewAndFieldConfig(){this.activeColumnViewIdStorageService.select().pipe((0,m.b)(x=>this.activeColumnViewId=x),(0,h.w)(x=>this.fetchColumnViewsIfNotFetchedYet(x)),(0,m.b)(x=>this.columnView=this.columnViewStorageService.getById(x)),(0,h.w)(x=>this.fieldConfigRepositoryService.select(x)),this.takeUntilDestroy()).subscribe(x=>{this.items=this.columnViewFieldItemConverter.fromFieldConfigs(x),this.changeDetectorRef.detectChanges()})}updateColumnView(x){this.columnViewService.updateColumnInView(this.activeColumnViewId,x,!1).pipe((0,m.b)(()=>this.columnViewDetailsPendingService.set(!0)),this.takeUntilDestroy()).subscribe(H=>{this.handleUpdatedColumnView(H),this.columnViewDetailsPendingService.set(!1)})}removeFieldConfig(x){const H=this.items.find(te=>te.id===x.itemId);H.treeRoot?this.setNewTreeRootField(H).pipe((0,m.b)(()=>this.columnViewDetailsPendingService.set(!0)),(0,h.w)(()=>this.columnViewService.deleteColumnInView(this.activeColumnViewId,x.fieldId,x.columnIndex,!1))).subscribe(te=>{this.handleUpdatedColumnView(te),this.columnViewDetailsPendingService.set(!1)}):this.columnViewService.deleteColumnInView(this.activeColumnViewId,x.fieldId,x.columnIndex,!1).pipe((0,m.b)(()=>this.columnViewDetailsPendingService.set(!0))).subscribe(te=>{this.handleUpdatedColumnView(te),this.columnViewDetailsPendingService.set(!1)})}reorderColumnView(x){this.columnViewService.reorderViewFields(this.activeColumnViewId,x.start,x.end,!1).pipe((0,m.b)(()=>this.columnViewDetailsPendingService.set(!0))).subscribe(H=>{this.handleUpdatedColumnView(H),this.columnViewDetailsPendingService.set(!1)})}onFieldItemAdded(x,H=this.items.length){const te=this.availableFieldItemConverter.toColumnViewField(x,H);this.columnViewService.addColumnInView(this.activeColumnViewId,[te],!1).pipe((0,m.b)(()=>this.columnViewDetailsPendingService.set(!0)),this.takeUntilDestroy()).subscribe(ae=>{this.handleUpdatedColumnView(ae),this.columnViewDetailsPendingService.set(!1)})}leaveDetailView(){this.backActionService.goBack()}commitChanges(){this.columnViewService.saveToOrigin(this.activeColumnViewId).pipe((0,m.b)(()=>this.columnViewDetailsPendingService.set(!0)),(0,h.w)(x=>(this.activeColumnViewId=x.current,this.columnViewFetchService.fetchColumnViews().pipe((0,u.U)(()=>x)))),this.takeUntilDestroy()).subscribe(x=>{this.activeColumnViewIdStorageService.set(x.current),this.columnViewDetailsPendingService.set(!1)})}discardChanges(){this.columnViewService.restoreToOrigin(this.activeColumnViewId).pipe((0,m.b)(()=>this.columnViewDetailsPendingService.set(!0)),(0,h.w)(x=>this.columnViewStorageService.getById(x.current)?(0,o.of)(x):this.columnViewFetchService.fetchColumnViews().pipe((0,u.U)(()=>x))),this.takeUntilDestroy()).subscribe(x=>{this.activeColumnViewIdStorageService.set(x.current),this.columnViewDetailsPendingService.set(!1)})}removeColumnView(){this.columnViewService.deleteView(this.activeColumnViewId).pipe((0,d.K)(x=>(this.messageService.handleError(x.error),(0,o.of)())),(0,m.b)(()=>this.columnViewDetailsPendingService.set(!0)),(0,h.w)(()=>this.columnViewFetchService.fetchColumnViews()),this.takeUntilDestroy()).subscribe(()=>{this.columnViewDetailsPendingService.set(!1),this.backActionService.goBack()})}fetchColumnViewsIfNotFetchedYet(x){return this.columnViewStorageService.getById(x)?(0,o.of)(x):this.columnViewFetchService.fetchColumnViews().pipe((0,g.q)(1),(0,u.U)(()=>x))}selectPending(){this.columnViewDetailsPendingService.select().pipe(this.takeUntilDestroy()).subscribe(x=>{this.operationPending=x,this.changeDetectorRef.detectChanges()})}setContainerHeight(){const x=this.elementRef.nativeElement,H=x.getBoundingClientRect();this.renderer.setStyle(x,"height",this.document.body.offsetHeight-H.y-24+"px")}handleUpdatedColumnView(x){this.columnViewFetchService.addOrUpdateColumnView(x.columnView,x.fieldConfigs),this.activeColumnViewIdStorageService.set(x.columnView.id)}setNewTreeRootField(x){const te=0===this.items.map(ue=>ue.id).indexOf(x.id)?this.items[1]:this.items[0],ae=this.items.map(ue=>this.columnViewDetailsFieldItemConverter.cloneColumnViewFieldItemWithChangedTreeRoot(ue.id===te.id,ue));return this.columnViewService.updateColumnInView(this.activeColumnViewId,this.columnViewDetailsFieldItemConverter.toColumnViewFields(ae),!1)}}return b.\u0275fac=function(x){return new(x||b)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(v.H),t.Y36(_.u),t.Y36(f.a),t.Y36(I.F),t.Y36(D.y),t.Y36(S.q),t.Y36(a.h),t.Y36(i.O),t.Y36(l.n),t.Y36(i.O),t.Y36(W),t.Y36(Z.e),t.Y36(y.K0),t.Y36(s.m),t.Y36(t.zs3))},b.\u0275cmp=t.Xpm({type:b,selectors:[["sp-new-column-view-details"]],viewQuery:function(x,H){if(1&x&&t.Gf(L,7,C.LA),2&x){let te;t.iGM(te=t.CRH())&&(H.sidebarContainer=te.first)}},features:[t._Bn([W]),t.qOj],decls:8,vars:8,consts:[["sidebar",""],[1,"sp-new-column-view","sp-pb-4","sp-grid","sp-absolute","sp-overflow-hidden","sp-top-0","sp-left-0","sp-bottom-0","sp-right-0","sp-whitespace-nowrap","sp-no-select"],["id","sp-new-column-view-details-header",3,"activeColumnViewId","columnView","pending","leaveDetailViewClicked","commitChangesClicked","discardChangesClicked","removeClicked",4,"ngIf"],[1,"sp-overflow-hidden"],[3,"viewId","items","id","availableFieldItems","columnsUpdated","fieldRemoved","fieldsReordered","fieldAdded"],[1,"sp-block","sp-h-full",3,"availableFieldItems","id","activeCvId","fieldItemAdded"],["id","sp-new-column-view-details-header",3,"activeColumnViewId","columnView","pending","leaveDetailViewClicked","commitChangesClicked","discardChangesClicked","removeClicked"]],template:function(x,H){1&x&&(t.TgZ(0,"sp-sidebar-container",null,0),t.TgZ(2,"div",1),t.YNc(3,J,1,3,"sp-new-column-view-details-header",2),t.TgZ(4,"div",3),t.TgZ(5,"sp-column-view-details-view-editor",4),t.NdJ("columnsUpdated",function(ae){return H.updateColumnView(ae)})("fieldRemoved",function(ae){return H.removeFieldConfig(ae)})("fieldsReordered",function(ae){return H.reorderColumnView(ae)})("fieldAdded",function(ae){return H.onFieldItemAdded(ae.field,ae.columnIndex)}),t.qZA(),t.qZA(),t.TgZ(6,"div",3),t.TgZ(7,"sp-new-column-view-details-available-fields",5),t.NdJ("fieldItemAdded",function(ae){return H.onFieldItemAdded(ae)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&x&&(t.xp6(3),t.Q6J("ngIf",H.columnView),t.xp6(2),t.Q6J("viewId",H.activeColumnViewId)("items",H.items)("id","sp-column-view-details-view-editor")("availableFieldItems",H.fieldItems),t.xp6(2),t.Q6J("availableFieldItems",H.fieldItems)("id","sp-column-view-details-available-fields")("activeCvId",H.activeColumnViewId))},directives:[O.L,y.O5,B.x,P.B,R.X],styles:["sp-new-column-view-details sp-sidebar{width:100%!important;background:var(--color-bg)}sp-new-column-view-details sp-sidebar-toggle-bar.rs-horizontal-orientation{margin:0}sp-new-column-view-details sp-sidebar-container .sp-wrapped-content{position:relative}.sp-new-column-view{display:grid;grid-template-columns:1fr 33.3333333333%;grid-column-gap:16px;grid-template-rows:max-content}.sp-new-column-view__header{grid-column:-1/1}.sp-new-column-view__header-title{max-width:60%}.sp-new-column-view__header-desc{max-width:900px}.sp-new-column-view__drag{border:2px dashed transparent}.sp-new-column-view__drag--start{background:var(--lime-green-50);border-color:var(--lime-green-400)}.sp-new-column-view__drag--entry{background:var(--blue-50);border-color:var(--blue-400)}.sp-new-column-view .sp-field-origin-search-container{padding-left:0}.sp-new-column-view .sp-field-origin-search-container .sp-btn{background:var(--gray-10)}.sp-new-column-view sp-treegrid{height:auto}.sp-new-column-view .sp-treegrid-header-row{background:transparent;border-color:var(--gray-30)}.sp-new-column-view .sp-column-view-detail-cog-icon sp-dropdown{font-size:14px;width:var(--element-size);height:var(--element-size);border-radius:var(--border-radius-m);display:inline-flex;align-items:center;justify-content:center}.sp-new-column-view .sp-column-view-detail-cog-icon sp-dropdown .sp-selector-icon{color:var(--gray-100);font-size:var(--font-size-l)}.sp-new-column-view .sp-column-view-detail-cog-icon sp-dropdown.sp-dropdown--is-opened{background:var(--gray-700)}.sp-new-column-view .sp-column-view-detail-cog-icon sp-dropdown.sp-dropdown--is-opened .sp-selector-icon{color:var(--gray-0)}\n"],encapsulation:2,changeDetection:0}),b})()},58915:(A,p,e)=>{e.d(p,{B:()=>Z});var t=e(84046),l=e(2859),a=e(83043),i=e(46908);let r=(()=>{class O extends i.t{fieldLabelMapper(P){return P.getLabel()}fieldDataTypeMapper(P){return P.getType().toString()}fieldOriginMapper(P){const R=P.getOriginId();return this.selectedFieldOriginPlatforms.find(L=>L.id===R)}}return O.\u0275fac=function(){let B;return function(R){return(B||(B=t.n5z(O)))(R||O)}}(),O.\u0275prov=t.Yz7({token:O,factory:O.\u0275fac}),O})();var o=e(36831),c=e(60884),m=e(25337),h=e(29186),u=e(91676),d=e(62546),g=e(55331),T=e(17314),y=e(88553),s=e(92574),v=e(43939),_=e(81171),f=e(2884),I=e(41004),D=e(65799);const S=["treeRef"],M=["gridWrapper"];function W(O,B){if(1&O&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&O){const P=B.data;t.xp6(1),t.Oqu(P.label)}}function C(O,B){if(1&O&&t._UZ(0,"sp-platform-info",14),2&O){const P=B.data,R=t.oxw();t.Q6J("id",P.originId)("dataTypeId",P.type)("configuration",R.fieldPlatformInfoConfiguration)}}function E(O,B){if(1&O&&(t.TgZ(0,"sp-lozenge",15),t._uU(1),t.qZA()),2&O){const P=B.data;t.xp6(1),t.hij(" ",P.type," ")}}function n(O,B){if(1&O){const P=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"button",17),t.NdJ("click",function(){const J=t.CHM(P).rawTreeNode,k=t.oxw();return!k.pending&&k.addFieldItemToWorkingArea(J)}),t._UZ(2,"span",18),t.qZA(),t.qZA()}if(2&O){const P=t.oxw();t.xp6(1),t.ekj("pending",P.pending),t.Q6J("id","sp-cv-available-field-add-icon")}}let Z=(()=>{class O extends d.H{constructor(P,R,L,J,k,b,U,x){super(P,R),this.changeDetectorRef=L,this.availableFieldItemsSearchService=J,this.extPlatformRepository=k,this.fieldConfigOriginPlatformOptionsFactory=b,this.document=U,this.window=x,this.class="sp-self-start sp-w-full sp-h-full",this.availableFieldItems=[],this.pending=!1,this.fieldItemAdded=new t.vpe,this.filteredAvailableFieldItems=[],this.fieldOriginPlatformOptions=[],this.treeConfiguration=h.Z.default().withColumnResize(!1).withDragAndDrop(!0).withDisabledDropZone(!0).withContentScroll(!0).withSelectNode(!1).withDisableMultiselect(!0),this.fieldPlatformInfoConfiguration=(new a.L.Builder).withIcon().withName().withTooltip().withLinkToPlatform().build()}ngOnChanges(P){P.availableFieldItems&&this.initFilteredAvailableFieldItems()}ngOnInit(){this.initFilteredAvailableFieldItems(),this.selectFilteredAvailableFieldItems(),this.selectExtPlatforms()}addFieldItemToWorkingArea(P){this.fieldItemAdded.emit(P)}onOptionChanged(P){this.availableFieldItemsSearchService.searchOptionChanged(P)}onSearchChanged(P){this.availableFieldItemsSearchService.searchValueChanged(P)}initFilteredAvailableFieldItems(){this.availableFieldItemsSearchService.setFields(this.availableFieldItems)}selectFilteredAvailableFieldItems(){this.availableFieldItemsSearchService.selectFilteredFields().pipe(this.takeUntilDestroy()).subscribe(P=>{this.filteredAvailableFieldItems=P,this.changeDetectorRef.detectChanges()})}initFieldOriginPlatformsAndSelectOptions(P){this.availableFieldItemsSearchService.setFieldOriginPlatforms(P),this.fieldOriginPlatformOptions=this.fieldConfigOriginPlatformOptionsFactory.create(P)}selectExtPlatforms(){this.extPlatformRepository.select().pipe(this.takeUntilDestroy()).subscribe(P=>{const R=[m.B.create(),...o.w.fromExtPlatforms(P)];this.initFieldOriginPlatformsAndSelectOptions(R),this.changeDetectorRef.detectChanges()})}}return O.\u0275fac=function(P){return new(P||O)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(r),t.Y36(l.G),t.Y36(c.u),t.Y36(g.K0),t.Y36(T.m))},O.\u0275cmp=t.Xpm({type:O,selectors:[["sp-new-column-view-details-available-fields"]],viewQuery:function(P,R){if(1&P&&(t.Gf(S,7,u.c),t.Gf(M,7,t.SBq)),2&P){let L;t.iGM(L=t.CRH())&&(R.treeEventHandler=L.first),t.iGM(L=t.CRH())&&(R.gridWrapper=L.first)}},hostVars:2,hostBindings:function(P,R){2&P&&t.Tol(R.class)},inputs:{availableFieldItems:"availableFieldItems",activeCvId:"activeCvId",pending:"pending"},outputs:{fieldItemAdded:"fieldItemAdded"},features:[t._Bn([c.u,r]),t.qOj,t.TTD],decls:27,vars:21,consts:[[1,"sp-h-full"],[1,"sp-flex","sp-flex-col","sp-overflow-hidden","sp-border-rounded","sp-bg-gray-20","sp-dark:bg-gray-20","sp-p-4","sp-column-view-available-columns__wrapper"],[1,"sp-flex","sp-justify-between"],[1,"sp-font-medium"],[1,"sp-text-info","sp-ml-2","sp-truncate"],[1,"fas","fa-info-circle","sp-mr-1"],[3,"fieldOriginPlatformOptions","optionChanged","searchChanged"],[1,"sp-flex","sp-relative","sp-overflow-hidden","sp-flex-auto"],["gridWrapper",""],["treeId","sp-tree-available-fields",1,"sp-block",3,"id","nodes","config"],["treeRef",""],["flex","0 1 55%","dragButton","true",3,"header"],["flex","0 1 40%",3,"header"],["header","","flex","0 1 80px"],[3,"id","dataTypeId","configuration"],["color","GRAY","subtle",""],[1,"sp-flex","sp-justify-end"],[1,"sp-btn","sp-btn-subtle",3,"id","click"],[1,"fas","fa-plus-circle"]],template:function(P,R){1&P&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"spL10nText"),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"i",5),t._uU(8),t.ALo(9,"spL10nText"),t.qZA(),t.qZA(),t.TgZ(10,"sp-field-origin-search",6),t.NdJ("optionChanged",function(J){return R.onOptionChanged(J)})("searchChanged",function(J){return R.onSearchChanged(J)}),t.qZA(),t.TgZ(11,"div",7,8),t.TgZ(13,"sp-treegrid",9,10),t.TgZ(15,"sp-tree-column-collection"),t.TgZ(16,"sp-tree-column",11),t.ALo(17,"spL10nText"),t.YNc(18,W,2,1,"ng-template"),t.qZA(),t.TgZ(19,"sp-tree-column",12),t.ALo(20,"spL10nText"),t.YNc(21,C,1,3,"ng-template"),t.qZA(),t.TgZ(22,"sp-tree-column",12),t.ALo(23,"spL10nText"),t.YNc(24,E,2,1,"ng-template"),t.qZA(),t.TgZ(25,"sp-tree-column",13),t.YNc(26,n,3,3,"ng-template"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&P&&(t.xp6(4),t.Oqu(t.lcZ(5,11,"SPT_BOXCONFIG_COLUMN_VIEWS_AVAILABLE_FIELDS_HEADER_TITLE")),t.xp6(4),t.hij(" ",t.lcZ(9,13,"SPT_BOXCONFIG_COLUMN_VIEWS_AVAILABLE_FIELDS_HEADER_DESCRIPTION")," "),t.xp6(2),t.Tol("sp-block sp-mb-3"),t.Q6J("fieldOriginPlatformOptions",R.fieldOriginPlatformOptions),t.xp6(3),t.Q6J("id","sp-tree-available-fields")("nodes",R.filteredAvailableFieldItems)("config",R.treeConfiguration),t.xp6(3),t.Q6J("header",t.lcZ(17,15,"SPT_BOXCONFIG_COLUMN_VIEWS_AVAILABLE_FIELDS_TABLE_HEADER_NAME")),t.xp6(3),t.Q6J("header",t.lcZ(20,17,"SPT_BOXCONFIG_COLUMN_VIEWS_AVAILABLE_FIELDS_TABLE_HEADER_ORIGIN")),t.xp6(3),t.Q6J("header",t.lcZ(23,19,"SPT_BOXCONFIG_COLUMN_VIEWS_AVAILABLE_FIELDS_TABLE_HEADER_TYPE")))},directives:[y.U,s.l,v.$,_.F,f.k,I.H],pipes:[D.L],styles:[".sp-column-view-available-columns__wrapper[_ngcontent-%COMP%]{max-height:100%}"],changeDetection:0}),O})()},85137:(A,p,e)=>{e.d(p,{X:()=>M});var t=e(84046),l=e(37289),a=e(32389),i=e(4816),r=e(95938),o=e(62546),c=e(95900),m=e(49549),h=e(55331),u=e(41004),d=e(21002),g=e(68890),T=e(43796),y=e(34909),s=e(9400),v=e(65799),_=e(18217);function f(W,C){1&W&&t._UZ(0,"i",15)}function I(W,C){1&W&&(t.TgZ(0,"sp-lozenge",6),t._uU(1),t.ALo(2,"spL10nText"),t.qZA()),2&W&&(t.Q6J("color","GREEN"),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_MODIFIED_INDICATOR")," "))}function D(W,C){1&W&&(t.TgZ(0,"div",16),t._UZ(1,"i",17),t._uU(2),t.ALo(3,"spL10nText"),t.qZA()),2&W&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_MODIFIED_MESSAGE")," "))}function S(W,C){if(1&W&&(t.TgZ(0,"div",18),t._uU(1),t.ALo(2,"spL10nText"),t.qZA()),2&W){const E=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,E.columnView.description),"\n")}}let M=(()=>{class W extends o.H{constructor(E,n,Z,O,B,P){super(E,n),this.changeDetectorRef=Z,this.favouriteViewsStorageService=O,this.selectColumnViewIdStorageService=B,this.columnViewStorageService=P,this.pending=!1,this.leaveDetailViewClicked=new t.vpe,this.discardChangesClicked=new t.vpe,this.commitChangesClicked=new t.vpe,this.removeClicked=new t.vpe,this.class="sp-new-column-view__header",this.gravity=c.X,this.waitForSave=!1,this.SAVE_BUTTON_STATUS=r.o,this.columnViews=[]}ngOnChanges(E){E.pending&&!this.pending&&this.waitForSave?(this.updateSaveBtnStatus(r.o.SUCCESS),this.waitForSave=!1,(0,m.H)(3e3).pipe(this.takeUntilDestroy()).subscribe(()=>{this.updateSaveBtnStatus(this.columnView.inEditMode?r.o.NORMAL:r.o.DISABLED),this.changeDetectorRef.detectChanges()})):E.columnView&&this.updateSaveBtnStatus(this.columnView.inEditMode?r.o.NORMAL:r.o.DISABLED)}ngOnInit(){this.selectFavouriteColumnViews(),this.selectSelectedColumnViews(),this.selectColumnViews()}leaveDetailView(){this.leaveDetailViewClicked.emit()}getOriginColor(){return this.columnView.prv?"MEDIUM_GRAY":"PURPLE"}commitChanges(){this.waitForSave=!0,this.updateSaveBtnStatus(r.o.PENDING),this.changeDetectorRef.detectChanges(),this.commitChangesClicked.emit()}discardChanges(){this.discardChangesClicked.emit()}removeColumnView(){this.removeClicked.emit()}getColumnViewOrigin(){return this.columnView.prv?"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_ORIGIN_PRIVATE":"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_ORIGIN_PUBLIC"}isDeleteDisabled(){return this.isActive()||this.isSingleAvailableCV()||this.isSinglePublicCV()}isActive(){return this.activeColumnViewId===this.selectedCVId}updateSaveBtnStatus(E){this.saveBtnStatus=E}selectFavouriteColumnViews(){this.favouriteViewsStorageService.select().pipe(this.takeUntilDestroy()).subscribe(E=>{this.isCVFavourite=-1!==E.indexOf(this.activeColumnViewId),this.changeDetectorRef.detectChanges()})}selectSelectedColumnViews(){this.selectColumnViewIdStorageService.select().pipe(this.takeUntilDestroy()).subscribe(E=>{this.selectedCVId=E,this.changeDetectorRef.detectChanges()})}selectColumnViews(){this.columnViewStorageService.select().pipe(this.takeUntilDestroy()).subscribe(E=>{this.columnViews=E,this.changeDetectorRef.detectChanges()})}isSingleAvailableCV(){return this.columnViews&&1===this.columnViews.length}isSinglePublicCV(){const E=this.columnViews.filter(n=>!n.prv);return!this.columnView.prv&&1===E.length}}return W.\u0275fac=function(E){return new(E||W)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(a.$),t.Y36(i.Z),t.Y36(l.H))},W.\u0275cmp=t.Xpm({type:W,selectors:[["sp-new-column-view-details-header"]],hostVars:2,hostBindings:function(E,n){2&E&&t.Tol(n.class)},inputs:{activeColumnViewId:"activeColumnViewId",columnView:"columnView",pending:"pending"},outputs:{leaveDetailViewClicked:"leaveDetailViewClicked",discardChangesClicked:"discardChangesClicked",commitChangesClicked:"commitChangesClicked",removeClicked:"removeClicked"},features:[t.qOj,t.TTD],decls:30,vars:41,consts:[[1,"sp-mb-4","sp-flex-row","sp-flex","sp-justify-between","sp-items-center"],[1,"sp-flex","col-9","sp-items-center"],["type","button",1,"sp-btn","sp-btn-radius","sp-mr-2",3,"id","click"],[1,"far","fa-angle-left","sp-h2"],[1,"sp-new-column-view__header-title","sp-mb-0","sp-font-medium","sp-mr-2","sp-truncate","sp-h2","sp-block",3,"id"],["class","fas fa-star sp-text-warning sp-mr-2",4,"ngIf"],["subtle","",1,"sp-mr-2",3,"color"],["subtle","","class","sp-mr-2",3,"color",4,"ngIf"],[1,"sp-flex","col-3","sp-justify-end","sp-items-center"],["id","sp-column-view-modified-indicator",4,"ngIf"],[3,"spTooltipEnabled","spTooltipGravity","spTooltip"],[1,"sp-column-view-crud-button-group","sp-block",3,"status","click"],["sp-button","",1,"sp-column-view-discard-changes-btn",3,"id","disabled","click"],["sp-button","",3,"id","spConfirmDialog","spConfirmDialogConfirmButtonTitle","spConfirmDialogMessage","spConfirmDialogGravity","disabled","spConfirmDialogOnSubmit"],["class","sp-mb-4 sp-new-column-view__header-desc",4,"ngIf"],[1,"fas","fa-star","sp-text-warning","sp-mr-2"],["id","sp-column-view-modified-indicator"],[1,"fas","fa-exclamation-triangle","sp-text-warning","sp-mr-1"],[1,"sp-mb-4","sp-new-column-view__header-desc"]],template:function(E,n){1&E&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return n.leaveDetailView()}),t._UZ(3,"i",3),t.qZA(),t.TgZ(4,"span",4),t._uU(5),t.ALo(6,"spL10nText"),t.qZA(),t.YNc(7,f,1,0,"i",5),t.TgZ(8,"sp-lozenge",6),t._uU(9),t.ALo(10,"spL10nText"),t.qZA(),t.YNc(11,I,3,4,"sp-lozenge",7),t.qZA(),t.TgZ(12,"div",8),t.YNc(13,D,4,3,"div",9),t.TgZ(14,"sp-button-group"),t.TgZ(15,"div",10),t.ALo(16,"spRichTextI18n"),t.TgZ(17,"sp-save-button",11),t.NdJ("click",function(){return n.saveBtnStatus===n.SAVE_BUTTON_STATUS.NORMAL&&n.commitChanges()}),t.qZA(),t.qZA(),t.TgZ(18,"div",10),t.ALo(19,"spRichTextI18n"),t.TgZ(20,"button",12),t.NdJ("click",function(){return n.discardChanges()}),t._uU(21),t.ALo(22,"spL10nText"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"sp-button-group"),t.TgZ(24,"button",13),t.NdJ("spConfirmDialogOnSubmit",function(){return n.removeColumnView()}),t.ALo(25,"spL10nText"),t.ALo(26,"spL10nText"),t._uU(27),t.ALo(28,"spL10nText"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(29,S,3,3,"div",14)),2&E&&(t.xp6(2),t.Q6J("id","sp-column-view-panel-header-back-button"),t.xp6(2),t.Q6J("id","sp-column-view-header-title"),t.xp6(1),t.hij(" ",t.lcZ(6,25,n.columnView.name)," "),t.xp6(2),t.Q6J("ngIf",n.isCVFavourite),t.xp6(1),t.Q6J("color",n.getOriginColor()),t.xp6(1),t.hij(" ",t.lcZ(10,27,n.getColumnViewOrigin())," "),t.xp6(2),t.Q6J("ngIf",n.isActive()),t.xp6(2),t.Q6J("ngIf",n.columnView.inEditMode),t.xp6(2),t.Q6J("spTooltipEnabled",!n.columnView.inEditMode||n.pending)("spTooltipGravity",n.gravity.NORTH)("spTooltip",t.lcZ(16,29,"SPT_BOXCONFIG_COLUMN_VIEWS_BUTTON_SAVE_TOOLTIP_DISABLED")),t.xp6(2),t.Q6J("status",n.saveBtnStatus),t.xp6(1),t.Q6J("spTooltipEnabled",!n.columnView.inEditMode||n.pending)("spTooltipGravity",n.gravity.NORTH)("spTooltip",t.lcZ(19,31,"SPT_BOXCONFIG_COLUMN_VIEWS_BUTTON_DISCARD_CHANGES_TOOLTIP_DISABLED")),t.xp6(2),t.Q6J("id","sp-column-view-discard-changes-btn")("disabled",!n.columnView.inEditMode||n.pending),t.xp6(1),t.hij(" ",t.lcZ(22,33,"SPT_BOXCONFIG_COLUMN_VIEWS_BUTTON_DISCARD_CHANGES_TITLE")," "),t.xp6(3),t.Q6J("id","sp-column-view-delete-button")("spConfirmDialogConfirmButtonTitle",t.lcZ(25,35,"SPT_BOXCONFIG_COLUMN_VIEWS_BUTTON_DELETE_TITLE"))("spConfirmDialogMessage",t.lcZ(26,37,"SPT_BOXCONFIG_COLUMN_VIEWS_BUTTON_DELETE_CONFIRM_MESSAGE"))("spConfirmDialogGravity",n.gravity.WEST)("disabled",n.isDeleteDisabled()||n.pending),t.xp6(3),t.hij(" ",t.lcZ(28,39,"SPT_BOXCONFIG_COLUMN_VIEWS_BUTTON_DELETE_LABEL")," "),t.xp6(2),t.Q6J("ngIf",n.columnView.description))},directives:[h.O5,u.H,d.K,g.i9,T.t,y.r,s.b],pipes:[v.L,_.d],encapsulation:2,changeDetection:0}),W})()},98169:(A,p,e)=>{e.d(p,{O:()=>g});var t=e(80257),l=e(79411);class a{constructor(y,s,v,_,f,I,D,S,M,W,C,E,n,Z,O,B){this.id=y,this.fieldId=s,this.name=v,this.treeRoot=_,this.origin=f,this.extPlatformId=I,this.label=D,this.decoratorType=S,this.flex=M,this.isGlobal=W,this.columnIndex=C,this.dataType=E,this.aggregation=n,this.aggregations=Z,this.distribute=O,this.distributes=B}}var i=e(69417),r=e(25337),o=e(85703),c=e(47868),m=e(53770),h=e(56509),u=e(31270),d=e(84046);let g=(()=>{class T{constructor(s){this.fieldConfigOriginService=s}fromFieldConfig(s){return new a((0,o.Hu)(),i.Z.fromNumber(s.taskFieldId),s.name,s.root,this.getOrigin(s),s.extPlatformId,s.label,s.decoratorType,s.flex,s.isGlobal,s.columnIndex,c.r.of(s.dataType),h.I.of(s.aggregation),s.aggregations.map(v=>h.I.of(v)),u.c.of(s.distribute),s.distributes.map(v=>u.c.of(v)))}fromFieldConfigs(s){return s.map(v=>this.fromFieldConfig(v))}toColumnViewField(s){const v=new l.$(s.fieldId&&s.fieldId.toNumber(),s.label,s.decoratorType,s.aggregation.toString(),s.distribute.toString(),s.flex,s.treeRoot,s.isGlobal,s.columnIndex,s.dataType.toString());return v.isGlobal?v:v.withExtPlatformData(s.extPlatformId,s.name)}toColumnViewFields(s){return s.map(v=>this.toColumnViewField(v))}cloneColumnViewFieldItemWithChangedTreeRoot(s,v){return new a(v.id,v.fieldId,v.name,s,v.origin,v.extPlatformId,v.label,v.decoratorType,v.flex,v.isGlobal,v.columnIndex,v.dataType,v.aggregation,v.aggregations,v.distribute,v.distributes)}cloneColumnViewFieldItemWithChangedAggregation(s,v){return new a(v.id,v.fieldId,v.name,v.treeRoot,v.origin,v.extPlatformId,v.label,v.decoratorType,v.flex,v.isGlobal,v.columnIndex,v.dataType,s,v.aggregations,m.H,v.distributes)}cloneColumnViewFieldItemWithChangedDistribute(s,v){return new a(v.id,v.fieldId,v.name,v.treeRoot,v.origin,v.extPlatformId,v.label,v.decoratorType,v.flex,v.isGlobal,v.columnIndex,v.dataType,m.H,v.aggregations,s,v.distributes)}cloneColumnViewFieldItemWithChangedDisplay(s,v){return new a(v.id,v.fieldId,v.name,v.treeRoot,v.origin,v.extPlatformId,v.label,s,v.flex,v.isGlobal,v.columnIndex,v.dataType,v.aggregation,v.aggregations,v.distribute,v.distributes)}getOrigin(s){return s.isGlobal?r.B.create():this.fieldConfigOriginService.create(s.extPlatformId)}}return T.\u0275fac=function(s){return new(s||T)(d.LFG(t.B))},T.\u0275prov=d.Yz7({token:T,factory:T.\u0275fac}),T})()},30516:(A,p,e)=>{e.d(p,{x:()=>ue});var t=e(84046),l=e(83043),a=e(24298),i=e(35227),r=e(98169),o=e(27609);let c=(()=>{class z extends o.V{constructor(){super()}}return z.\u0275fac=function(F){return new(F||z)},z.\u0275prov=t.Yz7({token:z,factory:z.\u0275fac}),z})();var m=e(53498),h=e(29827),u=e(66134),d=e(53339),g=e(75596),T=e(67489),y=e(19448),s=e(25069),v=e(92520);let _=(()=>{class z extends s.H{constructor(F,j,de,Q,se,V){super(),this.columnViewService=F,this.activeColumnViewIdStorageService=j,this.columnViewDetailsFieldItemConverter=de,this.columnViewDetailsFieldItemStorageService=Q,this.columnViewFetchService=se,this.dataTypes=V,this.fieldConfigAggregationPipe=new a.z}changeAggregation(F,j,de,Q){const se=this.activeColumnViewIdStorageService.get(),K=this.columnViewDetailsFieldItemStorageService.get().find($=>$.id===j);if(!K)throw new Error("Field does not exist");{const $=this.columnViewDetailsFieldItemConverter.cloneColumnViewFieldItemWithChangedAggregation(Q,K);this.columnViewService.updateColumnInView(se,[this.columnViewDetailsFieldItemConverter.toColumnViewField($)],!1).subscribe(ce=>{this.handleUpdatedColumnView(ce)})}}changeDisplay(F,j,de){const Q=this.activeColumnViewIdStorageService.get(),V=this.columnViewDetailsFieldItemStorageService.get().find(K=>K.id===j);if(!V)throw new Error("Field does not exist");{const K=this.columnViewDetailsFieldItemConverter.cloneColumnViewFieldItemWithChangedDisplay(de,V);this.columnViewService.updateColumnInView(Q,[this.columnViewDetailsFieldItemConverter.toColumnViewField(K)],!1).subscribe($=>{this.handleUpdatedColumnView($)})}}changeDistribute(F,j,de,Q){const se=this.activeColumnViewIdStorageService.get(),K=this.columnViewDetailsFieldItemStorageService.get().find($=>$.id===j);if(!K)throw new Error("Field does not exist");{const $=this.columnViewDetailsFieldItemConverter.cloneColumnViewFieldItemWithChangedDistribute(Q,K);this.columnViewService.updateColumnInView(se,[this.columnViewDetailsFieldItemConverter.toColumnViewField($)],!1).subscribe(ce=>{this.handleUpdatedColumnView(ce)})}}getAvailableColumnConfig$(F){const j=new y.W(F.id,this.convertAggregations(F.aggregations),this.createDecorators(F),this.convertAggregations(F.distributes));return(0,d.of)(j)}createDecorators(F){const j=this.dataTypes.get(F.dataType).getAvailableDecorators();return this.convertDecoratorType(j)}convertDecoratorType(F){return F.map(j=>new v.d(j,T.Q.transformDecoratorType(j)))}convertAggregations(F){return F.map(j=>new v.d(j.toString(),this.fieldConfigAggregationPipe.transform(j)))}handleUpdatedColumnView(F){this.columnViewFetchService.addOrUpdateColumnView(F.columnView,F.fieldConfigs),this.activeColumnViewIdStorageService.set(F.columnView.id)}}return z.\u0275fac=function(F){return new(F||z)(t.LFG(u.u),t.LFG(m.y),t.LFG(r.O),t.LFG(c),t.LFG(h.a),t.LFG(g.v))},z.\u0275prov=t.Yz7({token:z,factory:z.\u0275fac}),z})();var f=e(9046),I=e(29186),D=e(48245),S=e(62546),M=e(92574),W=e(43939),C=e(81171),E=e(76617),n=e(68890),Z=e(2884),O=e(55331),B=e(33769),P=e(65799),R=e(18217);function L(z,ne){if(1&z){const F=t.EpF();t.TgZ(0,"sp-form-control-radio",8),t.NdJ("valueChanged",function(){const Q=t.CHM(F).rawTreeNode;return t.oxw().changeTreeRoot(Q.id)}),t.qZA()}if(2&z){const F=ne.rawTreeNode,j=t.oxw();t.Q6J("checked",F.treeRoot)("disabled",j.pending)}}function J(z,ne){if(1&z&&(t.TgZ(0,"span",9),t.ALo(1,"spRichTextI18n"),t._uU(2),t.qZA()),2&z){const F=ne.rawTreeNode;t.Q6J("spTooltip",t.lcZ(1,2,F.label)),t.xp6(2),t.hij(" ",F.label," ")}}function k(z,ne){if(1&z&&t._UZ(0,"sp-platform-info",10),2&z){const F=ne.rawTreeNode,j=t.oxw();t.Q6J("id",F.origin.id)("dataTypeId",F.type)("configuration",j.fieldPlatformInfoConfiguration)}}function b(z,ne){if(1&z&&(t.ynx(0),t.TgZ(1,"span",9),t.ALo(2,"spRichTextI18n"),t._uU(3),t.qZA(),t.BQk()),2&z){const F=t.oxw().rawTreeNode,j=t.oxw();t.xp6(1),t.Q6J("spTooltip",t.lcZ(2,2,j.displayText(F))),t.xp6(2),t.hij(" ",j.displayText(F)," ")}}function U(z,ne){1&z&&(t.TgZ(0,"span",13),t._uU(1),t.ALo(2,"spL10nText"),t.qZA()),2&z&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_CREATOR_TABLE_DISPLAY_DEFAULT")," "))}function x(z,ne){if(1&z&&(t.YNc(0,b,4,4,"ng-container",11),t.YNc(1,U,3,3,"ng-template",null,12,t.W1O)),2&z){const F=ne.rawTreeNode,j=t.MAs(2);t.Q6J("ngIf","NONE"===F.distribute.toString())("ngIfElse",j)}}function H(z,ne){if(1&z&&(t.TgZ(0,"span",9),t.ALo(1,"spRichTextI18n"),t._uU(2),t.qZA()),2&z){const F=ne.rawTreeNode,j=t.oxw();t.Q6J("spTooltip",t.lcZ(1,2,j.getAggregation(F))),t.xp6(2),t.hij(" ",j.getAggregation(F)," ")}}function te(z,ne){if(1&z){const F=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(F);const de=t.oxw().rawTreeNode,Q=t.oxw();return!Q.pending&&Q.removeField(de)}),t._UZ(1,"span",19),t.qZA()}if(2&z){const F=t.oxw(2);t.ekj("pending",F.pending),t.Q6J("id","sp-tree-working-area-remove-btn")}}function ae(z,ne){if(1&z&&(t.TgZ(0,"div",14),t.TgZ(1,"div",15),t._UZ(2,"sp-tree-column-config-selector",16),t.qZA(),t.YNc(3,te,2,3,"button",17),t.qZA()),2&z){const F=ne.data,j=t.oxw();t.xp6(2),t.Q6J("column",F)("aggregation",F.aggregation)("distribute",F.distribute)("decoratorType",F.decoratorType)("columnViewId",j.viewId),t.xp6(1),t.Q6J("ngIf",j.items.length>1)}}let ue=(()=>{class z extends S.H{constructor(F,j,de,Q,se,V){super(F,j),this.columnViewExtPlatformService=de,this.fieldItemConverter=Q,this.draggedItemsStorageService=se,this.columnViewDetailsFieldItemStorageService=V,this.class="sp-self-start",this.items=[],this.availableFieldItems=[],this.pending=!1,this.columnsUpdated=new t.vpe,this.fieldRemoved=new t.vpe,this.fieldAdded=new t.vpe,this.fieldsReordered=new t.vpe,this.fieldConfigAggregationPipe=new a.z}ngOnInit(){this.setTreeConfig(),this.setTreeActions(),this.setFieldPlatformConfig()}ngOnChanges(F){F.items&&this.columnViewDetailsFieldItemStorageService.set(this.items)}changeTreeRoot(F){const j=this.items.map(de=>this.fieldItemConverter.cloneColumnViewFieldItemWithChangedTreeRoot(de.id===F,de));this.columnsUpdated.emit(this.fieldItemConverter.toColumnViewFields(j))}removeField(F){this.fieldRemoved.emit({itemId:F.id,fieldId:F.fieldId,columnIndex:F.columnIndex})}getAggregation(F){return F.distribute&&!F.distribute.isNone()?this.fieldConfigAggregationPipe.transform(F.distribute):F.aggregation?this.fieldConfigAggregationPipe.transform(F.aggregation):""}displayText(F){const j=T.Q.transformDecoratorType(F.decoratorType);return`${F.label} (${j})`}setTreeConfig(){this.treeConfiguration=I.Z.default().withColumnResize(!1).withDragAndDrop(!0).withDropZones({topZone:!0,centerZone:!1,bottomZone:!0}).withDisabledDropZone(!1).withContentScroll(!0).withNodesExternalDropZone(!0).withExternalDropZoneHeight(200).withSelectNode(!1)}setTreeActions(){this.treeActions=(new f.k).withMove((F,j,de)=>new Promise(Q=>{const se=this.draggedItemsStorageService.get().find($=>$.getId()===F[0]),V=F[0],K=this.getItemPosition(V);-1===K?this.addField(V,de):this.reorderField(K,de>se.nodeIndex?de-=1:de),Q(!0)}))}reorderField(F,j){this.fieldsReordered.emit({start:F,end:j})}addField(F,j){const de=this.availableFieldItems.find(Q=>Q.id===F);this.fieldAdded.emit({field:de,columnIndex:j})}setFieldPlatformConfig(){this.fieldPlatformInfoConfiguration=(new l.L.Builder).withIcon().withName().withTooltip().withLinkToPlatform().build()}getItemPosition(F){return this.items.map(j=>j.id).indexOf(F)}}return z.\u0275fac=function(F){return new(F||z)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(i.T),t.Y36(r.O),t.Y36(D.k),t.Y36(c))},z.\u0275cmp=t.Xpm({type:z,selectors:[["sp-column-view-details-view-editor"]],hostVars:2,hostBindings:function(F,j){2&F&&t.Tol(j.class)},inputs:{items:"items",availableFieldItems:"availableFieldItems",viewId:"viewId",pending:"pending"},outputs:{columnsUpdated:"columnsUpdated",fieldRemoved:"fieldRemoved",fieldAdded:"fieldAdded",fieldsReordered:"fieldsReordered"},features:[t._Bn([c,{provide:s.H,useClass:_}]),t.qOj,t.TTD],decls:24,vars:19,consts:[[1,"sp-h-full"],[1,"sp-flex","sp-flex-col","sp-border-rounded","sp-bg-gray-20","sp-dark:bg-gray-20","sp-p-4","sp-column-view-editor__wrapper"],[1,"sp-font-medium"],[1,"sp-relative","sp-flex","sp-overflow-hidden","sp-flex-auto"],["treeId","sp-tree-working-area",3,"id","config","actions","nodes"],["flex","0 1 88px","dragButton","true",3,"header"],["flex","0 1 22%",3,"header"],["header","","flex","0 1 1"],["id","sp-tree-working-area-tree-root-input",3,"checked","disabled","valueChanged"],[3,"spTooltip"],[3,"id","dataTypeId","configuration"],[4,"ngIf","ngIfElse"],["defaultDistribute",""],[1,"sp-default-distribute"],[1,"sp-flex","sp-items-center","sp-justify-end","sp-w-full"],[1,"sp-column-view-editor__config-wrapper"],[1,"sp-column-view-detail-cog-icon",3,"column","aggregation","distribute","decoratorType","columnViewId"],["class","sp-btn sp-btn-subtle sp-column-view-detail-trash-icon",3,"id","pending","click",4,"ngIf"],[1,"sp-btn","sp-btn-subtle","sp-column-view-detail-trash-icon",3,"id","click"],[1,"fa","fa-trash"]],template:function(F,j){1&F&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3,"Selected fields"),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"sp-treegrid",4),t.TgZ(6,"sp-tree-column-collection"),t.TgZ(7,"sp-tree-column",5),t.ALo(8,"spL10nText"),t.YNc(9,L,1,2,"ng-template"),t.qZA(),t.TgZ(10,"sp-tree-column",6),t.ALo(11,"spL10nText"),t.YNc(12,J,3,4,"ng-template"),t.qZA(),t.TgZ(13,"sp-tree-column",6),t.ALo(14,"spL10nText"),t.YNc(15,k,1,3,"ng-template"),t.qZA(),t.TgZ(16,"sp-tree-column",6),t.ALo(17,"spL10nText"),t.YNc(18,x,3,2,"ng-template"),t.qZA(),t.TgZ(19,"sp-tree-column",6),t.ALo(20,"spL10nText"),t.YNc(21,H,3,4,"ng-template"),t.qZA(),t.TgZ(22,"sp-tree-column",7),t.YNc(23,ae,4,6,"ng-template"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&F&&(t.xp6(5),t.Q6J("id","sp-tree-working-area")("config",j.treeConfiguration)("actions",j.treeActions)("nodes",j.items),t.xp6(2),t.Q6J("header",t.lcZ(8,9,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_CREATOR_TABLE_HEADER_TREE_ROOT")),t.xp6(3),t.Q6J("header",t.lcZ(11,11,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_CREATOR_TABLE_HEADER_NAME")),t.xp6(3),t.Q6J("header",t.lcZ(14,13,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_CREATOR_TABLE_HEADER_ORIGIN")),t.xp6(3),t.Q6J("header",t.lcZ(17,15,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_CREATOR_TABLE_HEADER_DISPLAY")),t.xp6(3),t.Q6J("header",t.lcZ(20,17,"SPT_BOXCONFIG_COLUMN_VIEWS_VIEW_CREATOR_TABLE_HEADER_AGGREGATION")))},directives:[M.l,W.$,C.F,E.x,n.i9,Z.k,O.O5,B.o],pipes:[P.L,R.d],styles:[".sp-column-view-editor__wrapper[_ngcontent-%COMP%]{max-height:100%}.sp-column-view-editor__config-wrapper[_ngcontent-%COMP%]{width:32px}"]}),z})()},46908:(A,p,e)=>{e.d(p,{t:()=>i});var t=e(97809),l=e(25337),a=e(94615);class i{constructor(){this.fieldOriginPlatforms=[],this.selectedFieldOriginPlatforms=[],this.fields=[],this.filteredFieldsByPlatform=[],this.filteredFields$=new t.t(1),this.searchedValue="",this.selectedFieldOriginPlatformIds=new Set}searchOptionChanged(o){this.resolveAvailablePlatforms(o),this.filteredFieldsByPlatform=this.filterFieldsByPlatform();const c=this.filterFieldsByQuery();this.filteredFields$.next(c)}searchValueChanged(o){this.resolveSearchValue(o);const c=this.filterFieldsByQuery();this.filteredFields$.next(c)}selectFilteredFields(){return this.filteredFields$.asObservable()}setFields(o){this.fields=o,this.filteredFieldsByPlatform=o,this.filteredFields$.next(this.filteredFieldsByPlatform)}setFieldOriginPlatforms(o){this.fieldOriginPlatforms=o}addSelectedFieldOriginPlatformFromOption(o){const c=o.value!==a.n?this.fieldOriginPlatforms.find(m=>m.id===o.value):l.B.create();this.selectedFieldOriginPlatformIds.add(c.id),this.selectedFieldOriginPlatforms=[...this.selectedFieldOriginPlatforms,c]}fieldLabelNameIncludes(o,c){return this.fieldLabelMapper(o).toLowerCase().includes(c.toLowerCase())}fieldDataTypeTypeIncludes(o,c){return this.fieldDataTypeMapper(o).toLowerCase().includes(c.toLowerCase())}filterByOriginPlatform(o,c=""){const m=this.fieldOriginMapper(o);if(!m)return!1;const h=c.trim().toLowerCase();return m.name.toLowerCase().includes(h)||m.type.toLowerCase().includes(h)}filterByDataTypeOrByLabelName(o){return this.fieldLabelNameIncludes(o,this.searchedValue)||this.fieldDataTypeTypeIncludes(o,this.searchedValue)}filterFieldsByQuery(){return this.searchedValue.length?this.filteredFieldsByPlatform.filter(o=>this.filterByDataTypeOrByLabelName(o)||this.filterByOriginPlatform(o,this.searchedValue)):this.filteredFieldsByPlatform}filterFieldsByPlatform(){return this.fields.filter(o=>this.filterByOriginPlatform(o))}handleSelectedOption(o){this.isAnyPlatformOptionSelected()?this.addSelectedFieldOriginPlatformFromOption(o):this.turnOnPlatformFiltering(o)}handleDeselectedOption(o){this.isAnyPlatformOptionSelected()&&(1===this.selectedFieldOriginPlatformIds.size?this.turnOffPlatformFiltering():this.removeSelectedFieldOriginPlatformOption(o))}isAnyPlatformOptionSelected(){return!!this.selectedFieldOriginPlatformIds.size}removeSelectedFieldOriginPlatformOption(o){this.selectedFieldOriginPlatformIds.delete(o.value),this.selectedFieldOriginPlatforms=this.selectedFieldOriginPlatforms.filter(c=>c.id!==o.value)}resolveAvailablePlatforms(o){o.selected?this.handleSelectedOption(o):this.handleDeselectedOption(o)}resolveSearchValue(o){this.searchedValue=(o||"").trim().toLowerCase()}turnOnPlatformFiltering(o){this.selectedFieldOriginPlatforms=[],this.selectedFieldOriginPlatformIds.clear(),this.addSelectedFieldOriginPlatformFromOption(o)}turnOffPlatformFiltering(){this.selectedFieldOriginPlatforms=this.fieldOriginPlatforms,this.selectedFieldOriginPlatformIds.clear()}}},36831:(A,p,e)=>{e.d(p,{w:()=>a});var t=e(85105);let l=(()=>{class i{constructor(){}}return i.Builder=class extends t.I{withId(o){return this.id=o,this}withName(o){return this.name=o,this}withType(o){return this.type=o,this}withIconURL(o){return this.iconURL=o,this}withHomeURL(o){return this.homeURL=o,this}build(){const o=new i;return o.id=this.id,o.name=this.name,o.type=this.type,o.iconURL=this.iconURL,o.homeURL=this.homeURL,o}},i})();class a{static fromExtPlatform(r){return(new l.Builder).withId(r.id).withName(r.name).withType(r.extPlatformType.typeId).withIconURL(r.extPlatformType.iconURL).withHomeURL(r.baseURL).build()}static fromExtPlatforms(r){return r.map(a.fromExtPlatform)}}},60884:(A,p,e)=>{e.d(p,{u:()=>d});var t=e(2338),l=e(51086);const a=new Map([[t.G.JIRA_SERVER_REST,l.z.JIRASERVER],[t.G.JIRA_SERVER,l.z.JIRASERVER],[t.G.JIRA_CLOUD,l.z.JIRACLOUD],[t.G.TRELLO,l.z.TRELLO],[t.G.AZURE_DEV_OPS,l.z.AZUREDEVOPS]]);var i=e(71265),r=e(27277),o=e(89744),c=e(83941),m=e(14650),h=e(66795),u=e(84046);let d=(()=>{class g{create(y){return y.map(s=>this.createOption(s))}createOption(y){return new m.W(y.id,c.H.string(y.name)).withOptionsText(this.resolveOptionsText(y)).withCssClass(this.resolveOptionCssClass(y))}resolveOptionsText(y){const{name:s,type:v}=y;if(o.c.isBuiltIn(y))return this.getBuiltInOptionText(s);{const _=this.getPlatformImage(v).get();return this.getExternalOptionText(`${s}-${v}`,s,_)}}getPlatformImage(y){return h.bq.ofNullable(a.get(y))}getBuiltInOptionText(y){return c.H.component(i.E,{name:y},null,y)}getExternalOptionText(y,s,v){return c.H.component(r.i,{name:s,platformType:v},null,y)}resolveOptionCssClass(y){return`sp-field-origin-search-filter-option-${y.type.toLocaleLowerCase()}`}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=u.Yz7({token:g,factory:g.\u0275fac}),g})()},71265:(A,p,e)=>{e.d(p,{E:()=>l});var t=e(84046);let l=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["sp-built-in-field-option"]],inputs:{name:"name"},decls:3,vars:1,consts:[[1,"far","fa-window","sp-w-4","sp-mr-1","sp-text-primary"]],template:function(r,o){1&r&&(t.TgZ(0,"span"),t._UZ(1,"i",0),t._uU(2),t.qZA()),2&r&&(t.xp6(2),t.hij(" ",o.name,"\n"))},encapsulation:2,changeDetection:0}),a})()},27277:(A,p,e)=>{e.d(p,{i:()=>o});var t=e(62546),l=e(84046),a=e(55331),i=e(74874);function r(c,m){if(1&c&&l._UZ(0,"sp-platform-icon",2),2&c){const h=l.oxw();l.Q6J("platformType",h.platformType)}}let o=(()=>{class c extends t.H{constructor(h,u){super(h,u)}getHostClasses(){return["sp-external-field-option","sp-flex","sp-items-center"]}}return c.\u0275fac=function(h){return new(h||c)(l.Y36(l.SBq),l.Y36(l.Qsj))},c.\u0275cmp=l.Xpm({type:c,selectors:[["sp-external-field-option"]],inputs:{name:"name",platformType:"platformType"},features:[l.qOj],decls:3,vars:2,consts:[["class","sp-mr-2",3,"platformType",4,"ngIf"],[1,"sp-w-auto"],[1,"sp-mr-2",3,"platformType"]],template:function(h,u){1&h&&(l.YNc(0,r,1,1,"sp-platform-icon",0),l.TgZ(1,"span",1),l._uU(2),l.qZA()),2&h&&(l.Q6J("ngIf",u.platformType),l.xp6(2),l.Oqu(u.name))},directives:[a.O5,i.R],encapsulation:2,changeDetection:0}),c})()},88553:(A,p,e)=>{e.d(p,{U:()=>h});var t=e(84046),l=e(70335),a=e(62126),i=e(96105),r=e(83372),o=e(62546),c=e(97265),m=e(65799);let h=(()=>{class u extends o.H{constructor(g,T){super(g,T),this.optionChanged=new t.vpe,this.searchChanged=new t.vpe,this.fieldOriginPlatformOptions=[],this.searchControl=new l.NI,this.SEARCH_DEBOUNCE_TIME=250,this.OPTIONS_MAX_MENU_WIDTH=500,this.BUTTON_WIDTH=51}ngOnInit(){this.initSelect(),this.observeSearchValueChange()}onOptionChanged(g){this.optionChanged.emit(g)}initSelect(){this.selectConfiguration=(new r.w).withMultiSelect().withOptionsMenuWidth("auto").withMaxOptionsMenuWidth(this.OPTIONS_MAX_MENU_WIDTH).withCustomButton().withButtonWidthStyle(this.BUTTON_WIDTH).withPrefixForId("sp-field-origin-search-filter").withSearchFieldAvailable()}observeSearchValueChange(){this.searchControl.valueChanges.pipe((0,a.b)(this.SEARCH_DEBOUNCE_TIME),(0,i.x)(),this.takeUntilDestroy()).subscribe(g=>{this.searchChanged.emit(g)})}}return u.\u0275fac=function(g){return new(g||u)(t.Y36(t.SBq),t.Y36(t.Qsj))},u.\u0275cmp=t.Xpm({type:u,selectors:[["sp-field-origin-search"]],inputs:{fieldOriginPlatformOptions:"fieldOriginPlatformOptions"},outputs:{optionChanged:"optionChanged",searchChanged:"searchChanged"},features:[t.qOj],decls:9,vars:6,consts:[[1,"sp-field-origin-search-container"],[1,"sp-field-origin-search-input-container"],["type","text","id","sp-field-origin-search-input",1,"sp-form-control",3,"formControl","placeholder"],[1,"fa","fa-search","sp-magnifier","sp-absolute","sp-block"],[1,"sp-field-origin-search-select-container"],[3,"configuration","options","selectedOptionChanged"],[1,"fas","fa-filter","sp-select-custom-button"],[1,"fas","fa-chevron-down","sp-select-custom-button"]],template:function(g,T){1&g&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"input",2),t.ALo(3,"spL10nText"),t._UZ(4,"span",3),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"sp-select",5),t.NdJ("selectedOptionChanged",function(s){return T.onOptionChanged(s)}),t._UZ(7,"div",6),t._UZ(8,"div",7),t.qZA(),t.qZA(),t.qZA()),2&g&&(t.xp6(2),t.Q6J("formControl",T.searchControl)("placeholder",t.lcZ(3,4,"SPT_BOXCONFIG_COLUMN_VIEWS_AVAILABLE_FIELDS_HEADER_SEARCHBAR_PLACEHOLDER")),t.xp6(4),t.Q6J("configuration",T.selectConfiguration)("options",T.fieldOriginPlatformOptions))},directives:[l.Fj,l.JJ,l.oH,c.Hr],pipes:[m.L],styles:[".sp-field-origin-search-container{width:100%;position:relative;height:30px;padding-left:20px;display:flex;align-items:center}.sp-field-origin-search-input-container{display:flex;position:relative;flex-grow:1}.sp-field-origin-search-select-container{padding-left:8px;color:var(--primary)}.sp-magnifier{position:absolute;top:50%;right:8px;display:block;width:16px;transform:translateY(-50%);color:var(--gray-50)}\n"],encapsulation:2,changeDetection:0}),u})()},48082:(A,p,e)=>{e.d(p,{$:()=>s});var t=e(84046),l=e(90850),a=e(96105),i=e(62126),r=e(71726),o=e(83941),c=e(14650),m=e(83372),h=e(62546),u=e(11534),d=e(48058);class g{constructor(_,f){this.query=_,this.limit=f}}var T=e(51637),y=e(97265);let s=(()=>{class v extends h.H{constructor(f,I,D,S,M){super(f,I),this.taskPickerResource=D,this.domainFieldsRepository=S,this.fieldCollectionFactory=M,this.taskFieldNames=[],this.optionSelected=new t.vpe,this.fetchTaskQueue$=new l.xQ}ngOnChanges(f){f.taskFieldNames&&this.taskToPreviewOption&&this.fetchTaskQueue$.next()}ngOnInit(){this.initTaskPicker(),this.observeFetchTaskQueue()}observeTaskFetching(f){this.taskToPreviewOption=f,this.optionSelected.emit(f)}initTaskPicker(){this.selectConfiguration=(new m.w).withPrefixForId("sp-task-picker").withSearchFieldAvailable().withSelectButtonPlaceholder("SPT_COMMON_TASK_PICKER_PLACEHOLDER").withNumberOfMenuVisibleOptions(v.TASK_PICKER_NUMBER_OF_MENU_VISIBLE_OPTIONS).withTermQuery(this.getTermQueryForSelect.bind(this))}getTermQueryForSelect(f){return this.taskPickerResource.searchTasksByQuery(new g(f,v.TASK_PICKER_TASK_LIMIT)).pipe(this.takeUntilDestroy(),(0,a.x)(),(0,i.b)(v.SEARCH_DEBOUNCE_TIME),(0,r.U)(I=>{const S=I.tasks.filter(W=>W.editable),M=this.getTasksOptions(S);return I.allTasksNumber>v.TASK_PICKER_TASK_LIMIT&&M.push(this.createMoreTasksAvailableInfoOption(I.allTasksNumber)),M}))}getTasksOptions(f){return f.map(I=>{const D=this.domainFieldsRepository.getMapper(),S=this.fieldCollectionFactory.getDataValueFromRaw(I.fields,D.getKeyId()),M=this.fieldCollectionFactory.getDataValueFromRaw(I.fields,D.getSummaryId());return new c.W(I.taskId,o.H.string(`${S.value} ${M.summary}`))})}createMoreTasksAvailableInfoOption(f){return new c.W("info",o.H.i18n("SPT_COMMON_TASK_PICKER_TOO_MANY_RESULTS",{tasksLength:v.TASK_PICKER_TASK_LIMIT,allTasksNumber:f})).withDisabled(!0)}observeFetchTaskQueue(){this.fetchTaskQueue$.pipe((0,i.b)(v.FETCH_TASK_DEBOUNCE_TIME),this.takeUntilDestroy()).subscribe(()=>{this.observeTaskFetching(this.taskToPreviewOption)})}}return v.FETCH_TASK_DEBOUNCE_TIME=200,v.SEARCH_DEBOUNCE_TIME=250,v.TASK_PICKER_NUMBER_OF_MENU_VISIBLE_OPTIONS=4,v.TASK_PICKER_TASK_LIMIT=50,v.\u0275fac=function(f){return new(f||v)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(T.J),t.Y36(u.m),t.Y36(d.b))},v.\u0275cmp=t.Xpm({type:v,selectors:[["sp-task-picker"]],inputs:{taskFieldNames:"taskFieldNames",viewId:"viewId"},outputs:{optionSelected:"optionSelected"},features:[t.qOj,t.TTD],decls:1,vars:2,consts:[[1,"sp-task-picker",3,"configuration","selectedOption","selectedOptionChanged"]],template:function(f,I){1&f&&(t.TgZ(0,"sp-select",0),t.NdJ("selectedOptionChanged",function(S){return I.observeTaskFetching(S)}),t.qZA()),2&f&&t.Q6J("configuration",I.selectConfiguration)("selectedOption",I.taskToPreviewOption)},directives:[y.Hr],encapsulation:2,changeDetection:0}),v})()},77717:(A,p,e)=>{e.d(p,{k:()=>t});class t{constructor(a,i,r){this.description=a,this.action=i,this.type=r}setIndex(a){this.index=a}getDescription(){return this.description}getAction(){return this.action}getType(){return this.type}getIndex(){return this.index}}},6961:(A,p,e)=>{e.d(p,{d:()=>_});var t=e(84046),l=e(55331),a=e(98223),r=(e(8560),e(62546)),o=e(74386),c=e(68890),h=(e(75779),e(26463)),u=e(65799);let d=(()=>{class f extends r.H{constructor(D,S,M,W){super(D,S),this.injector=M,this.verticalTabMenuRouter=W,this.customIdSelector="",this.visibilityChanged=new t.vpe,this.navigationFn=()=>this.verticalTabMenuRouter.navigate(this.tab.url)}ngOnChanges(D){D.activeTabId&&(this.domManipulator.setHostAttribute("id",this.activeTabId),this.updateActiveStatus())}ngOnInit(){this.observeSelfVisibility()}markActive(){this.domManipulator.setHostAttribute(f.ACTIVE_ATTR,"")}unmarkActive(){this.domManipulator.removeHostAttribute(f.ACTIVE_ATTR)}observeSelfVisibility(){this.tab.visibilityGuard?this.injector.get(this.tab.visibilityGuard).isVisible(this.tab).pipe(this.takeUntilDestroy()).subscribe(D=>this.setVisibility(D)):this.visibilityChanged.emit(!0)}setVisibility(D){const S="sp-hidden";D?D&&this.domManipulator.removeHostClass(S):this.domManipulator.addHostClass(S),this.visibilityChanged.emit(D)}updateActiveStatus(){this.tab.id===this.activeTabId?this.markActive():this.unmarkActive()}}return f.ACTIVE_ATTR="sp-current",f.\u0275fac=function(D){return new(D||f)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.zs3),t.Y36(o.$))},f.\u0275cmp=t.Xpm({type:f,selectors:[["sp-vertical-tab"]],inputs:{tab:"tab",customIdSelector:"customIdSelector",activeTabId:"activeTabId"},outputs:{visibilityChanged:"visibilityChanged"},features:[t.qOj,t.TTD],decls:5,vars:5,consts:[[1,"sp-tab-link",3,"spNavigationLink"],[1,"sp-tab-selection-indicator","sp-border-rounded","sp-bg-primary"],[1,"sp-tab-name"]],template:function(D,S){1&D&&(t.TgZ(0,"a",0),t._UZ(1,"i",1),t.TgZ(2,"span",2),t._uU(3),t.ALo(4,"spL10nText"),t.qZA(),t.qZA()),2&D&&(t.Q6J("spNavigationLink",S.navigationFn),t.uIk("id","sp-vertical-tab-group-"+S.customIdSelector),t.xp6(3),t.Oqu(t.lcZ(4,3,S.tab.text)))},directives:[h.k],pipes:[u.L],styles:["sp-vertical-tab{display:flex}sp-vertical-tab:not([sp-current]) .sp-tab-selection-indicator{display:none}sp-vertical-tab[sp-current] .sp-tab-selection-indicator{display:initial}sp-vertical-tab .sp-tab-selection-indicator{height:100%}sp-vertical-tab .sp-tab-link{display:flex;align-items:center;text-decoration:none}\n"],encapsulation:2,changeDetection:0}),f})();var g=e(18217);function T(f,I){if(1&f&&t._UZ(0,"i",6),2&f){const D=t.oxw();t.Q6J("ngClass",D.group.icon)}}function y(f,I){if(1&f){const D=t.EpF();t.ynx(0),t.TgZ(1,"sp-vertical-tab",7),t.NdJ("visibilityChanged",function(M){const C=t.CHM(D).index;return t.oxw().onChildTabVisibilityChange(C,M)}),t.qZA(),t.BQk()}if(2&f){const D=I.$implicit,S=t.oxw();t.xp6(1),t.Q6J("tab",D)("activeTabId",S.activeTabId)("customIdSelector",S.generateId(S.group.name)+"-"+S.generateId(D.text))}}let s=(()=>{class f extends r.H{constructor(D,S,M,W,C,E){super(D,S),this.injector=M,this.changeDetectorRef=W,this.verticalTabMenuRouter=C,this.l10nTextService=E,this.active=!1,this.groupVisible=!1,this.childTabVisibility=[],this.TAB_TRACK_FN=(n,Z)=>Z.url}ngOnChanges(D){D.group&&this.domManipulator.setHostAttribute("id",this.group.id)}ngOnInit(){this.childTabVisibility=new Array(this.group.tabs.length).fill(!1),this.setupHandlerForActiveRouteChange(),this.observeSelfVisibility()}onGroupClick(){this.expanded?this.collapse():this.expand(),this.changeDetectorRef.detectChanges()}onChildTabVisibilityChange(D,S){this.childTabVisibility[D]=S,this.updateGroupVisibility()}generateId(D){return this.l10nTextService.translate(D).trim().replace(/\s+/g,"-").toLowerCase()}expand(){this.expanded=!0,this.domManipulator.setHostAttribute(f.EXPANDED_ATTR,"")}collapse(){this.expanded=!1,this.domManipulator.removeHostAttribute(f.EXPANDED_ATTR)}markActive(){this.active=!0,this.domManipulator.setHostAttribute(f.CURRENT_ATTR,"")}unmarkActive(){this.active=!1,this.domManipulator.removeHostAttribute(f.CURRENT_ATTR)}getHostClasses(){return["sp-flex","sp-flex-col","sp-items-start","sp-hidden"]}observeSelfVisibility(){if(!this.group.visibilityGuard)return this.groupVisible=!0,void this.updateGroupVisibility();this.injector.get(this.group.visibilityGuard).isVisible().pipe(this.takeUntilDestroy()).subscribe(D=>{this.groupVisible=D,this.updateGroupVisibility()})}updateGroupVisibility(){const D=this.childTabVisibility.includes(!0);this.groupVisible&&D?this.domManipulator.removeHostClass(f.HIDDEN_CLASS_NAME):this.domManipulator.addHostClass(f.HIDDEN_CLASS_NAME)}setupHandlerForActiveRouteChange(){this.verticalTabMenuRouter.observeRouteChange().pipe(this.takeUntilDestroy()).subscribe(D=>{const S=this.getChildTabMatchingUrl(D);S?(!this.active&&this.markActive(),!this.expanded&&this.expand(),this.activeTabId=S.id):(this.active&&this.unmarkActive(),this.activeTabId=null),this.changeDetectorRef.detectChanges()})}getChildTabMatchingUrl(D){return this.group.tabs.find(M=>this.verticalTabMenuRouter.isActiveTab(D,M.url))}}return f.EXPANDED_ATTR="sp-expanded",f.CURRENT_ATTR="sp-current",f.HIDDEN_CLASS_NAME="sp-hidden",f.\u0275fac=function(D){return new(D||f)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.zs3),t.Y36(t.sBO),t.Y36(o.$),t.Y36(a.e))},f.\u0275cmp=t.Xpm({type:f,selectors:[["sp-vertical-tab-group"]],inputs:{group:"group"},features:[t.qOj,t.TTD],decls:9,vars:15,consts:[[1,"sp-group-header","sp-flex","sp-items-center","sp-w-full",3,"click"],[1,"fas","fa-chevron-right","sp-group-chevron"],["class","sp-mr-2",3,"ngClass",4,"ngIf"],[1,"sp-group-name","sp-truncate","sp-flex-1",3,"spTooltipOnOverflow","spTooltip"],[1,"sp-group-tabs"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"sp-mr-2",3,"ngClass"],[3,"tab","activeTabId","customIdSelector","visibilityChanged"]],template:function(D,S){1&D&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return S.onGroupClick()}),t._UZ(1,"i",1),t.YNc(2,T,1,1,"i",2),t.TgZ(3,"span",3),t.ALo(4,"spRichTextI18n"),t._uU(5),t.ALo(6,"spL10nText"),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,y,2,3,"ng-container",5),t.qZA()),2&D&&(t.uIk("id","sp-vertical-tab-group-"+S.generateId(S.group.name)),t.xp6(1),t.ekj("fa-chevron-down",S.expanded)("fa-chevron-right",!S.expanded),t.xp6(1),t.Q6J("ngIf",S.group.icon),t.xp6(1),t.Q6J("spTooltipOnOverflow",!0)("spTooltip",t.lcZ(4,11,S.group.name)),t.xp6(2),t.Oqu(t.lcZ(6,13,S.group.name)),t.xp6(3),t.Q6J("ngForOf",S.group.tabs)("ngForTrackBy",S.TAB_TRACK_FN))},directives:[l.O5,c.i9,l.sg,l.mk,d],pipes:[g.d,u.L],styles:["sp-vertical-tab-group:not([sp-expanded]) .sp-group-tabs{display:none}\n"],encapsulation:2,changeDetection:0}),f})();function v(f,I){if(1&f&&(t.ynx(0),t._UZ(1,"sp-vertical-tab-group",1),t.BQk()),2&f){const D=I.$implicit;t.xp6(1),t.Q6J("group",D)}}let _=(()=>{class f{constructor(){this.TAB_GROUP_TRACK_FN=(D,S)=>S.id}}return f.\u0275fac=function(D){return new(D||f)},f.\u0275cmp=t.Xpm({type:f,selectors:[["sp-vertical-tab-menu"]],inputs:{items:"items"},decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"group"]],template:function(D,S){1&D&&t.YNc(0,v,2,1,"ng-container",0),2&D&&t.Q6J("ngForOf",S.items)("ngForTrackBy",S.TAB_GROUP_TRACK_FN)},directives:[l.sg,s],styles:["sp-vertical-tab-menu{display:block}sp-vertical-tab-menu sp-vertical-tab-group .sp-group-header,sp-vertical-tab-menu sp-vertical-tab{height:32px;padding:8px 0}sp-vertical-tab-menu sp-vertical-tab-group{font-size:16px;margin-bottom:8px}sp-vertical-tab-menu sp-vertical-tab-group .sp-group-chevron{width:16px;margin:0 8px;font-size:14px;text-align:center}sp-vertical-tab-menu sp-vertical-tab-group sp-vertical-tab{font-size:14px}sp-vertical-tab-menu sp-vertical-tab:not([sp-current]){margin-left:32px}sp-vertical-tab-menu sp-vertical-tab .sp-tab-selection-indicator{width:2px;margin:0 15px}sp-vertical-tab-menu sp-vertical-tab-group .sp-group-header,sp-vertical-tab-menu sp-vertical-tab .sp-tab-name{cursor:pointer}\n"],encapsulation:2,changeDetection:0}),f})()},16171:(A,p,e)=>{e.d(p,{n:()=>h});var t=e(55331),l=e(41001),a=e(51805),i=e(84046);let r=(()=>{class u{}return u.\u0275fac=function(g){return new(g||u)},u.\u0275mod=i.oAB({type:u}),u.\u0275inj=i.cJS({imports:[[t.ez,a.$,l.J]]}),u})();var o=e(68890),c=e(26566);let m=(()=>{class u{}return u.\u0275fac=function(g){return new(g||u)},u.\u0275mod=i.oAB({type:u}),u.\u0275inj=i.cJS({imports:[[t.ez,r,l.J,o.z8,c.n]]}),u})(),h=(()=>{class u{}return u.\u0275fac=function(g){return new(g||u)},u.\u0275mod=i.oAB({type:u}),u.\u0275inj=i.cJS({imports:[[t.ez,m]]}),u})()}}]);