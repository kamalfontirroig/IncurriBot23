"use strict";(self.webpackChunkppm=self.webpackChunkppm||[]).push([[8807],{13843:(P,C,s)=>{s.d(C,{M:()=>l,h:()=>r});const l={SET_BOXES:"[WBS Backlog ScheduleItems]SET_BOXES"};class r{constructor(h,A){this.wbsId=h,this.payload=A,this.type=l.SET_BOXES}}},13519:(P,C,s)=>{s.d(C,{MF:()=>l,UA:()=>r,SC:()=>d,u2:()=>h,hY:()=>A,lF:()=>p,bR:()=>R,Hj:()=>E});const u="[WBS Backlog User Settings]",l={PERSIST_SETTINGS:`${u} PERSIST_SETTINGS`,LOAD_SETTINGS:`${u} LOAD_SETTINGS`,LOAD_SETTINGS_SUCCESS:`${u} LOAD_SETTINGS_SUCCESS`,SET_FLAT_TASKS_MODE:`${u} SET_FLAT_TASKS_MODE`,SET_PLANNED_TASKS_MODE:`${u} SET_PLANNED_TASKS_MODE`,SET_FILTER_QUERY:`${u} SET_FILTER_QUERY`,SET_UPPER_LEVEL_TASK_MODE:`${u} SET_PROGRAM_TASK_MODE`};class r{constructor(_,O){this.wbsId=_,this.payload=O,this.type=l.SET_FLAT_TASKS_MODE}}class d{constructor(_,O){this.wbsId=_,this.payload=O,this.type=l.SET_PLANNED_TASKS_MODE}}class h{constructor(_,O){this.wbsId=_,this.payload=O,this.type=l.SET_UPPER_LEVEL_TASK_MODE}}class A{constructor(_,O){this.wbsId=_,this.payload=O,this.type=l.SET_FILTER_QUERY}}class p{constructor(_){this.wbsId=_,this.type=l.PERSIST_SETTINGS}}class R{constructor(_){this.wbsId=_,this.type=l.LOAD_SETTINGS}}class E{constructor(_,O){this.wbsId=_,this.payload=O,this.type=l.LOAD_SETTINGS_SUCCESS}}},36828:(P,C,s)=>{s.d(C,{H:()=>u});class u{constructor(){}}},42377:(P,C,s)=>{s.d(C,{H:()=>l});class l{constructor(d,h,A,p,R,E,f){this.catalogIds=d,this.externalTaskTypeIds=h,this.isEnabledForAllCatalogs=A,this.isEnabledForAllExternalTaskTypes=p,this.isEnabledForTaskWithoutProgram=R,this.isModuleEnabled=E,this.maxNumberOfTasks=f}static fromRaw(d){return new l(d.catalogIds,d.externalTaskTypeIds,d.isEnabledForAllCatalogs,d.isEnabledForAllExternalTaskTypes,d.isEnabledForTaskWithoutProgram,d.isModuleEnabled,d.maxNumberOfTasks)}}l.default=new l([],[],!0,!0,!0,!0,50)},30087:(P,C,s)=>{s.d(C,{b:()=>u});class u{}},77099:(P,C,s)=>{s.d(C,{bk:()=>l,RG:()=>r,ie:()=>d,mD:()=>h});const u="[WBS Configuration]",l={FETCH_CONFIGURATION:`${u}FETCH_CONFIGURATION`,FETCH_CONFIGURATION_SUCCESS:`${u}FETCH_CONFIGURATION_SUCCESS`,FETCH_CONFIGURATION_FAILURE:`${u}FETCH_CONFIGURATION_FAILURE`};class r{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.FETCH_CONFIGURATION}}class d{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.FETCH_CONFIGURATION_SUCCESS}}class h{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.FETCH_CONFIGURATION_FAILURE}}},49344:(P,C,s)=>{s.d(C,{x:()=>x});var u=s(71726),l=s(42377),r=s(83155),d=s(2421),h=s(17542),A=s(60903),p=s(77816),R=s(40813),E=s(34373),f=s(85847),_=function(N,B,w,I){var z,g=arguments.length,H=g<3?B:null===I?I=Object.getOwnPropertyDescriptor(B,w):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)H=Reflect.decorate(N,B,w,I);else for(var Z=N.length-1;Z>=0;Z--)(z=N[Z])&&(H=(g<3?z(H):g>3?z(B,w,H):z(B,w))||H);return g>3&&H&&Object.defineProperty(B,w,H),H},O=function(N,B){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(N,B)};class U{}_([(0,A.qA)(),O("design:type",Number)],U.prototype,"id",void 0);class M extends h.M{constructor(){super()}getClassName(){return"WbsConfigurationDTO"}}_([(0,p.Yl)(),(0,R.j)({each:!0}),(0,f.D)(()=>U),O("design:type",Array)],M.prototype,"catalogIds",void 0),_([(0,p.Yl)(),(0,R.j)({each:!0}),(0,f.D)(()=>U),O("design:type",Array)],M.prototype,"externalTaskTypeIds",void 0),_([(0,E.si)(),O("design:type",Boolean)],M.prototype,"isEnabledForAllCatalogs",void 0),_([(0,E.si)(),O("design:type",Boolean)],M.prototype,"isEnabledForAllExternalTaskTypes",void 0),_([(0,E.si)(),O("design:type",Boolean)],M.prototype,"isEnabledForTaskWithoutProgram",void 0),_([(0,E.si)(),O("design:type",Boolean)],M.prototype,"isModuleEnabled",void 0),_([(0,A.qA)(),O("design:type",Number)],M.prototype,"maxNumberOfTasks",void 0);var i=s(65531),$=s(84046),V=s(11531),j=s(83950);let x=(()=>{class N extends r.a{constructor(w,I){super(w),this.environmentService=I}getRestUrl(w=""){return this.environmentService.getRestBaseUrl()+"ppm/program/wbs/configuration"}fetchConfiguration(){return this.get("").pipe((0,d.W)(M),(0,u.U)(w=>l.H.fromRaw(w)))}save(w){return this.put("",w).pipe((0,i.E)("HttpWbsConfigurationResource"))}}return N.\u0275fac=function(w){return new(w||N)($.LFG(V.O),$.LFG(j.L))},N.\u0275prov=$.Yz7({token:N,factory:N.\u0275fac}),N})()},99228:(P,C,s)=>{s.d(C,{_:()=>d});var u=s(30087),l=s(49344),r=s(84046);let d=(()=>{class h extends u.b{constructor(p){super(),this.httpWbsConfigurationResource=p}fetchConfiguration(){return this.httpWbsConfigurationResource.fetchConfiguration()}save(p){return this.httpWbsConfigurationResource.save(p)}}return h.\u0275fac=function(p){return new(p||h)(r.LFG(l.x))},h.\u0275prov=r.Yz7({token:h,factory:h.\u0275fac}),h})()},89251:(P,C,s)=>{s.d(C,{T:()=>E});var u=s(89554),l=s(83941),r=s(88004),d=s(84046),h=s(68319),A=s(83950),p=s(30293),R=s(25673);let E=(()=>{class f extends u.r{constructor(O,U,M,i){super(O),this.environmentService=U,this.columnViewBoxRepository=M,this.boxHierarchyService=i}getContextId(){return this.columnViewBoxRepository.getBoxId()}getModuleType(){return"SCOPE"}getModuleName(){return this.boxHierarchyService.getContextBox().getModule(r._.SCOPE).getName()}getListHeaderTitle(){return"SPT_BOXCONFIG_SCOPE_COLUMN_VIEWS_HEADER_TITLE"}getDocumentationLink(){return this.environmentService.getHelpURL("ppm/box-module/scope/box/column-views")}getListViewDescription(){return l.H.i18n("SPT_BOXCONFIG_SCOPE_COLUMN_VIEWS_DESCRIPTION",{moduleName:this.getModuleName()})}getViewType(){return"column"}getDetailsHeaderTitle(){return""}getDetailsViewDescription(){return l.H.string("")}getSingleViewName(){return"SPT_BOXCONFIG_SCOPE_COLUMN_VIEWS_SINGLE_VIEW_NAME"}getReadMoreLink(){return""}}return f.\u0275fac=function(O){return new(O||f)(d.LFG(h.T),d.LFG(A.L),d.LFG(p.S),d.LFG(R.T))},f.\u0275prov=d.Yz7({token:f,factory:f.\u0275fac}),f})()},5789:(P,C,s)=>{s.d(C,{$:()=>ls});var u=s(55331),l=s(70335),r=s(43786),d=s(41001),h=s(68269),A=s(81813),p=s(36828),R=s(30087),E=s(53339),f=s(98274),_=s(71726),O=s(56385),U=s(77099),M=s(64993),i=s(84046);class j{constructor(e,t){this.actions$=e,this.wbsConfigurationResource=t,this.fetchConfiguration$=this.actions$.pipe((0,r.l4)(U.bk.FETCH_CONFIGURATION),(0,f.w)(o=>this.wbsConfigurationResource.fetchConfiguration().pipe((0,_.U)(c=>new U.ie(o.wbsId,c)),(0,O.K)(c=>(0,E.of)(new U.mD(o.wbsId,{errorType:M.N.ERROR,actionType:o.type,restResponse:c}))))))}}j.\u0275fac=function(e){return new(e||j)(i.LFG(r.eX),i.LFG(R.b))},j.\u0275prov=i.Yz7({token:j,factory:j.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],j.prototype,"fetchConfiguration$",void 0);var x=s(49344);const w=n=>n?n.userSettings:null,I=n=>n?n.tasks:null,g=n=>n?n.configuration:null;var H=s(41619),z=s(25468);let Z=(()=>{class n extends p.H{constructor(t,o){super(),this.store=t,this.feature=o}selectConfigurationState(t){return this.store.select(o=>g(o[this.feature][t]))}selectConfiguration(t){return this.store.select(o=>g(o[this.feature][t])).pipe((0,_.U)(o=>o.configuration))}fetchConfiguration(t){this.store.dispatch(new U.RG(t))}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(z.yh),i.LFG(H.dj))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var be=s(99228),W=s(97706),v=s(94003),m=s(1263),xe=s(24896),$e=s(10549),fe=s(4764),q=s(40731),oe=s(3291),Ne=s(23110),je=s(88485),J=s(52432),De=s(49472),He=s(70414),re=s(7840),b=s(4738),y=s(50906),F=s(99429),D=function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);return c>3&&a&&Object.defineProperty(e,t,a),a},G=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};class X{constructor(e,t,o,c,a){this.actions$=e,this.configurationRepository=t,this.tasksRepository=o,this.wbsResource=c,this.wbsService=a,this.collapseAllTasks$=this.actions$.pipe((0,r.l4)(re.o0.COLLAPSE_ALL_TASK),(0,f.w)(S=>this.wbsService.getFetchParams(S.wbsId).pipe((0,f.w)(L=>this.wbsResource.collapseAll(L.options.boxId).pipe((0,_.U)(()=>new re.Av(S.wbsId)),(0,O.K)(k=>409===k.status?y.E:(0,E.of)(new re.$S(S.wbsId,{type:"error",text:k})))))))),this.reloadTasks$=this.actions$.pipe((0,r.l4)(re.o0.COLLAPSE_ALL_TASK_SUCCESS),(0,f.w)(S=>this.wbsService.getFetchParams(S.wbsId).pipe((0,f.w)(L=>(0,E.of)(new b.Uy(S.wbsId,L)))))),this.collapseTask$=this.actions$.pipe((0,r.l4)(re.o0.COLLAPSE_TASK),(0,f.w)(S=>{const L=S.payload;return this.wbsService.getFetchParams(S.wbsId).pipe((0,f.w)(()=>this.wbsResource.collapseTask(L).pipe((0,_.U)(()=>new re.TC(S.wbsId)),(0,O.K)(k=>409===k.status?y.E:(0,E.of)(new re.$3(S.wbsId,{type:"error",text:k}))))))}))}}X.\u0275fac=function(e){return new(e||X)(i.LFG(r.eX),i.LFG(p.H),i.LFG(q.i),i.LFG(J.D),i.LFG(F.B))},X.\u0275prov=i.Yz7({token:X,factory:X.\u0275fac}),D([(0,r.Qm)(),G("design:type",Object)],X.prototype,"collapseAllTasks$",void 0),D([(0,r.Qm)(),G("design:type",Object)],X.prototype,"reloadTasks$",void 0),D([(0,r.Qm)(),G("design:type",Object)],X.prototype,"collapseTask$",void 0);var K=s(18019);let Ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["sp-wbs-delete-lack-task-message-body"]],inputs:{removableNodesCount:"removableNodesCount",taskWord:"taskWord",beWord:"beWord",taskIds:"taskIds"},decls:3,vars:4,template:function(t,o){1&t&&(i._uU(0),i._UZ(1,"br"),i._uU(2)),2&t&&(i.lnq(" ",o.removableNodesCount," ",o.taskWord," ",o.beWord,"deleted due to the lack of permission or being out of scope: "),i.xp6(2),i.hij(" ",o.taskIds," "))},encapsulation:2,changeDetection:0}),n})(),he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["sp-wbs-delete-task-bad-request-message-body"]],inputs:{errorMessage:"errorMessage"},decls:1,vars:1,template:function(t,o){1&t&&i._uU(0),2&t&&i.hij("",o.errorMessage,"\n")},encapsulation:2,changeDetection:0}),n})();var me=s(45635),Le=s(48058),pe=s(11534),Te=s(83941),it=s(67761),ct=s(14878),we=s(46902),Qe=s(78609),dt=s(75904),ce=s(683);class _e extends dt.Q{constructor(e,t,o,c,a,S,T){super(e),this.actions$=t,this.wbsResource=o,this.wbsService=c,this.selectedItemsRepository=a,this.domainFieldsRepository=S,this.fieldCollectionFactory=T,this.deleteTask$=this.actions$.pipe((0,r.l4)(b.MF.DELETE_TASK),(0,f.w)(L=>{const k=L.payload;return this.wbsService.getFetchParams(L.wbsId).pipe((0,f.w)(Y=>{const te=this.selectedItemsRepository.get(new ct.H(k)),se=te.filter(ee=>!ee.getData().removable||ee.getData().faded),Me=se.map(ee=>ee.id),Ue=se.length;if(0!==Ue){const ee=this.getTaskIds(se),us=this.getInfoMessageOptions(Ue,ee);this.messageService.info(us)}const Be=te.filter(ee=>-1===Me.indexOf(ee.id)).map(ee=>ee.id);return this.deleteTasks(Y,Be,L.wbsId)}))}))}getTaskIds(e){return e.map(t=>{const o=t.getData().columns,c=this.domainFieldsRepository.getKeyId();return this.fieldCollectionFactory.getDataValueFromRaw(o,c).value}).join(", ")}getInfoMessageOptions(e,t){const o=this.getInfoMessageTitle(e),c=this.getInfoMessageBody(e,t);return(new we.P).withTitle(o).withBody(c)}getInfoMessageBody(e,t){const o=this.getTaskWordVariant(e),c=this.getBeWordVariant(e);return Te.H.component(Ee,{removableNodesCount:e,taskWord:o,beWord:c,taskIds:t})}deleteTasks(e,t,o){return this.wbsResource.deleteTasks(e.options.boxId,t).pipe((0,me.b)(c=>{const a=c.getUndeletedTasks();a.length>0&&this.showUndeletedTasksMessage(a)}),(0,_.U)(()=>new b.VD(o)),(0,O.K)(c=>c.status===ce.o.CONFLICT?(0,E.of)(new K.qd(o)):c.status===ce.o.BAD_REQUEST?(this.showFailedMessage(c.error,t.length),(0,E.of)(new K.js(o))):(0,E.of)(new b.z_(o,{type:"error",text:c}))))}showUndeletedTasksMessage(e){const t=this.getInfoMessageTitle(e.length),o=this.getMessageBodyForUndeletedTasks(e),c=(new we.P).withTitle(t).withBody(Te.H.component(he,{errorMessage:o})).withDownloadLogsButton(!1);this.messageService.error(c)}showFailedMessage(e,t){const o=this.getInfoMessageTitle(t),c=(new we.P).withTitle(o).withBody(Te.H.component(he,{errorMessage:e})).withDownloadLogsButton(!1);this.messageService.error(c)}getInfoMessageTitle(e){return"Failed to delete "+this.getTaskWordVariant(e)}getTaskWordVariant(e,t=!1){const o=1===e?"task":"tasks";return t?`${o.charAt(0).toUpperCase()}${o.slice(1)}`:o}getBeWordVariant(e){return 1===e?"wasn't":"weren't"}getMessageBodyForUndeletedTasks(e){return`${this.getTaskWordVariant(e.length,!0)} ${e.join(", ")} cannot be removed. Other tasks have been removed.`}}_e.\u0275fac=function(e){return new(e||_e)(i.LFG(Qe.e),i.LFG(r.eX),i.LFG(J.D),i.LFG(F.B),i.LFG(it.G),i.LFG(pe.m),i.LFG(Le.b))},_e.\u0275prov=i.Yz7({token:_e,factory:_e.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],_e.prototype,"deleteTask$",void 0);var de=s(27591),Xe=function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);return c>3&&a&&Object.defineProperty(e,t,a),a},Ve=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};class ae{constructor(e,t,o,c,a){this.actions$=e,this.configurationRepository=t,this.tasksRepository=o,this.wbsResource=c,this.wbsService=a,this.expandAllTasks$=this.actions$.pipe((0,r.l4)(de.x3.EXPAND_ALL_TASK),(0,f.w)(S=>this.wbsService.getFetchParams(S.wbsId).pipe((0,f.w)(L=>this.wbsResource.expandAll(L.options.boxId).pipe((0,_.U)(()=>new de.Dr(S.wbsId)),(0,O.K)(k=>{if(409!==k.status)return(0,E.of)(new de.m3(S.wbsId,{type:"error",text:k}));new K.qd(S.wbsId)})))))),this.reloadTasks$=this.actions$.pipe((0,r.l4)(de.x3.EXPAND_ALL_TASK_SUCCESS),(0,f.w)(S=>this.wbsService.getFetchParams(S.wbsId).pipe((0,f.w)(L=>(0,E.of)(new b.Uy(S.wbsId,L)))))),this.expandTask$=this.actions$.pipe((0,r.l4)(de.x3.EXPAND_TASK),(0,f.w)(S=>this.expandTask(S).pipe((0,_.U)(()=>new de.YW(S.wbsId)),(0,O.K)(T=>{if(409!==T.status)return(0,E.of)(new de.ph(S.wbsId,{type:"error",text:T}));new K.qd(S.wbsId)}))))}expandTask(e){const o=e.payload;return this.wbsService.getFetchParams(e.wbsId).pipe((0,f.w)(()=>this.wbsResource.expandTask(o)))}}ae.\u0275fac=function(e){return new(e||ae)(i.LFG(r.eX),i.LFG(p.H),i.LFG(q.i),i.LFG(J.D),i.LFG(F.B))},ae.\u0275prov=i.Yz7({token:ae,factory:ae.\u0275fac}),Xe([(0,r.Qm)(),Ve("design:type",Object)],ae.prototype,"expandAllTasks$",void 0),Xe([(0,r.Qm)(),Ve("design:type",Object)],ae.prototype,"reloadTasks$",void 0),Xe([(0,r.Qm)(),Ve("design:type",Object)],ae.prototype,"expandTask$",void 0);class Ae{constructor(e,t){this.actions$=e,this.wbsResource=t,this.fetchNodesChildren$=this.actions$.pipe((0,r.l4)(b.MF.FETCH_NODES_CHILDREN),(0,f.w)(o=>this.fetchChildrenForTask(o.payload,o)))}fetchChildrenForTask(e,t){return this.wbsResource.fetchChildrenForTask(e.boxId,e.nodeId,e.maxNumberOfTasks).pipe((0,_.U)(o=>new b.TD(t.wbsId,{tasks:o,nodeId:e.nodeId})),(0,O.K)(o=>(0,E.of)(o.status===ce.o.CONFLICT?new K.qd(t.wbsId):new b.Ss(t.wbsId,{errorType:M.N.ERROR,actionType:t.type,restResponse:o}))))}}Ae.\u0275fac=function(e){return new(e||Ae)(i.LFG(r.eX),i.LFG(J.D))},Ae.\u0275prov=i.Yz7({token:Ae,factory:Ae.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],Ae.prototype,"fetchNodesChildren$",void 0);var Et=s(70162),ht=s(81015),pt=s(69498),Tt=s(4218),Re=s(63833);class Ce{constructor(e,t,o,c,a,S){this.actions$=e,this.wbsResourceFactory=t,this.wbsService=o,this.tasksRepository=c,this.boxWithScopeTypeRepository=a,this.messageService=S,this.fetchTasks$=this.actions$.pipe((0,r.l4)(b.MF.FETCH_TASKS),(0,f.w)(T=>{const L=T.payload;return L?this.fetchTasksIfPossible(L,T.wbsId):this.wbsService.getFetchParams(T.wbsId).pipe((0,f.w)(k=>this.fetchTasksIfPossible(k,T.wbsId)))}))}fetchTasksIfPossible(e,t){return this.boxWithScopeTypeRepository.selectContext(e.options.boxId).pipe((0,Re.q)(1),(0,f.w)(o=>o.getValue().equals(ht.C.NONE)?(0,E.of)(new b.l2(t,{taskId:"",tasks:[]})):this.tasksRepository.selectTasks(t).pipe((0,Re.q)(1),(0,f.w)(()=>{const c=Et.cloneDeep(e);return c.options.maxNumberOfTasks=100,this.fetchTasks(c,t)}))))}fetchTasks(e,t){return this.wbsResourceFactory.create().fetchTasks(e).pipe((0,_.U)(c=>new b.l2(t,Object.assign(Object.assign({},c),{isForIssuePage:e.options.extTaskId&&e.options.extTaskId.getId()}))),(0,O.K)(c=>c.status===ce.o.CONFLICT?(0,E.of)(new K.qd(t)):(this.messageService.errorFromResponse(c.error),(0,E.of)(new b.x8(t,c)))))}}Ce.\u0275fac=function(e){return new(e||Ce)(i.LFG(r.eX),i.LFG(Tt.A),i.LFG(F.B),i.LFG(q.i),i.LFG(pt.l),i.LFG(Qe.e))},Ce.\u0275prov=i.Yz7({token:Ce,factory:Ce.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],Ce.prototype,"fetchTasks$",void 0);var Ke=s(55742),Ct=s(22097),Ye=s(4683);class ye{constructor(e,t,o,c,a){this.actions$=e,this.tasksRepository=t,this.configurationRepository=o,this.wbsResource=c,this.wbsService=a,this.fetchTasksWithFields$=this.actions$.pipe((0,r.l4)(Ke.dS.FETCH_WITH_FIELDS_ALL_TASK),(0,f.w)(S=>(0,Ye.aj)(this.wbsService.getFetchParams(S.wbsId),this.tasksRepository.selectTasks(S.wbsId)).pipe((0,f.w)(T=>{const L=T[0],k=T[1].length,te=S.wbsId,se=k>L.options.maxNumberOfTasks?k:L.options.maxNumberOfTasks;return L.options.fieldsParams=new Ct.K(S.payload.fields,!0),L.options.maxNumberOfTasks=se,this.fetchTasks(L,te)}))))}fetchTasks(e,t){return this.wbsResource.fetchTasks(e).pipe((0,_.U)(o=>new Ke.xY(t,{tasks:o.tasks,isForIssuePage:e.options.extTaskId&&e.options.extTaskId.getId()})),(0,O.K)(o=>(0,E.of)(new Ke.no(t,{type:"error",text:o}))))}}ye.\u0275fac=function(e){return new(e||ye)(i.LFG(r.eX),i.LFG(q.i),i.LFG(p.H),i.LFG(J.D),i.LFG(F.B))},ye.\u0275prov=i.Yz7({token:ye,factory:ye.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],ye.prototype,"fetchTasksWithFields$",void 0);class Fe{constructor(e,t,o){this.actions$=e,this.wbsResource=t,this.wbsService=o,this.fetchTasks$=this.actions$.pipe((0,r.l4)(b.MF.LOAD_DATA),(0,f.w)(c=>this.wbsService.getFetchParams(c.wbsId).pipe((0,f.w)(S=>this.wbsResource.loadTasksData(c.payload,S).pipe((0,f.w)(T=>(0,E.of)(new b.D3(c.wbsId,T.tasks))))))))}}Fe.\u0275fac=function(e){return new(e||Fe)(i.LFG(r.eX),i.LFG(J.D),i.LFG(F.B))},Fe.\u0275prov=i.Yz7({token:Fe,factory:Fe.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],Fe.prototype,"fetchTasks$",void 0);class Ie{constructor(e,t,o,c){this.actions$=e,this.wbsResource=t,this.wbsService=o,this.tasksRepository=c,this.loadMoreTasks$=this.actions$.pipe((0,r.l4)(b.MF.FETCH_MORE_TASKS),(0,f.w)(a=>(0,Ye.aj)(this.tasksRepository.selectTasks(a.wbsId),this.wbsService.getFetchParams(a.wbsId)).pipe((0,f.w)(S=>{const L=S[1];return L.options.maxNumberOfTasks=L.options.maxNumberOfTasks+S[0].length,this.loadMoreTasks(L,a)}))))}loadMoreTasks(e,t){return this.wbsResource.fetchTasks(e).pipe((0,_.U)(o=>new b.fK(t.wbsId,o)),(0,O.K)(o=>(0,E.of)(o.status===ce.o.CONFLICT?new K.qd(t.wbsId):new b.P9(t.wbsId,{errorType:M.N.ERROR,actionType:t.type,restResponse:o}))))}}function mt(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"p"),i._uU(2),i.qZA(),i.BQk()),2&n){const t=e.$implicit;i.xp6(2),i.Oqu(t)}}Ie.\u0275fac=function(e){return new(e||Ie)(i.LFG(r.eX),i.LFG(J.D),i.LFG(F.B),i.LFG(q.i))},Ie.\u0275prov=i.Yz7({token:Ie,factory:Ie.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],Ie.prototype,"loadMoreTasks$",void 0);let Lt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["sp-move-tasks-error-body"]],inputs:{errorMessages:"errorMessages"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,o){1&t&&i.YNc(0,mt,3,1,"ng-container",0),2&t&&i.Q6J("ngForOf",o.errorMessages)},directives:[u.sg],encapsulation:2,changeDetection:0}),n})();var bt=s(48245),Dt=s(65799);function wt(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"a",1),i._uU(2),i.qZA(),i.BQk()),2&n){const t=e.$implicit,o=i.oxw();i.xp6(1),i.Q6J("href",o.getUri(t),i.LSH),i.xp6(1),i.Oqu(o.getBusinessKeyFromUri(t))}}let Pt=(()=>{class n{constructor(t){this.selectedItemsStorageService=t}getBusinessKeyFromUri(t){const o=this.selectedItemsStorageService.get().find(a=>a.getId()===t);if(!o)return"";const{uri:c}=o.getData().data;return c.split("/").pop()}getUri(t){const o=this.selectedItemsStorageService.get().find(a=>a.getId()===t);if(!o)return"";const{uri:c}=o.getData().data;return c}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(bt.k))},n.\u0275cmp=i.Xpm({type:n,selectors:[["sp-move-tasks-failed-to-move-body"]],inputs:{moveFailedTasks:"moveFailedTasks",moveData:"moveData"},decls:3,vars:5,consts:[[4,"ngFor","ngForOf"],["target","_blank",3,"href"]],template:function(t,o){1&t&&(i._uU(0),i.ALo(1,"spL10nText"),i.YNc(2,wt,3,2,"ng-container",0)),2&t&&(i.AsE("",o.moveFailedTasks.join(", "),"\n",i.lcZ(1,3,1===o.moveFailedTasks.length?"SPT_SCOPE_DROP_TASK_ERROR_MESSAGE_BODY":"SPT_SCOPE_DROP_TASKS_ERROR_MESSAGE_BODY"),"\n"),i.xp6(2),i.Q6J("ngForOf",o.moveFailedTasks))},directives:[u.sg],pipes:[Dt.L],encapsulation:2,changeDetection:0}),n})();var Mt=s(66795),Ut=s(71805),Je=s(54222),xt=s(49415),Ze=function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);return c>3&&a&&Object.defineProperty(e,t,a),a},qe=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};class le{constructor(e,t,o,c,a,S,T,L,k){this.actions$=e,this.wbsResource=t,this.wbsService=o,this.wbsMoveTasksConverter=c,this.messageService=a,this.wbsActionProgressService=S,this.dropDestinationRepository=T,this.injector=L,this.tasksRepository=k,this.moveTasks$=this.actions$.pipe((0,r.l4)(b.MF.MOVE_TASKS),(0,f.w)(Y=>this.tasksRepository.selectTasks(Y.wbsId).pipe((0,Re.q)(1),(0,f.w)(se=>this.moveTasks(Y,se))))),this.reloadAfterMove$=this.actions$.pipe((0,r.l4)(b.MF.MOVE_TASKS_SUCCESS),(0,f.w)(Y=>{const te=Y.wbsId,se=Y.payload;let Me;const Ue=this.dropDestinationRepository.getDropDestination(),Be=se.toNode?Ue.getNodeById(se.toNode):Ue.treeRoot;return Me=!Be.isExpanded()&&se.toNode?this.wbsService.expandTask(te,Be.getId()):(0,E.of)(!0),Me.pipe((0,f.w)(()=>this.wbsService.getFetchParams(te).pipe((0,f.w)(ee=>(0,E.of)(new b.Uy(Y.wbsId,ee))))))}))}moveTasks(e,t){return this.wbsService.getFetchParams(e.wbsId).pipe((0,f.w)(o=>this.getMoveActionStatus(e.payload.moveData,e,o,t)))}getMoveActionStatus(e,t,o,c){return this.wbsMoveTasksConverter.convertMoveRequest$(t.wbsId,e.fromNode,e.toNode,e.toIndex).pipe((0,f.w)(a=>this.wbsResource.move(o.options.boxId,a).pipe((0,_.U)(S=>this.handleSuccessfulMove(t.wbsId,S,e,c)),(0,O.K)(S=>this.handleFailedMove(t.wbsId,S,e)))))}createInfoMessage(e,t){const o=e.length;this.messageService.warning((new we.P).withTitle(this.getErrorTitle(o)).withBody(Te.H.component(Pt,{moveFailedTasks:e,moveData:t},this.injector)))}handleFailedMove(e,t,o){if(this.wbsActionProgressService.done(),t.status===ce.o.CONFLICT)return(0,E.of)(new K.qd(e));if(t.status===ce.o.BAD_REQUEST){const c=(new we.P).withTitle(this.getErrorTitle(o.fromNode.length)).withBody(Te.H.component(Lt,{errorMessages:t.error.errorMessages}));return this.messageService.warning(c),(0,E.of)(new K.js(e))}return(0,E.of)(new b._(e,{type:"error",text:t}))}handleSuccessfulMove(e,t,o,c){if(t.moveFailedTasks&&t.moveFailedTasks.length){const a=t.moveFailedTasks.map(S=>{const T=Ut.S.search(c,String(S));return Mt.bq.ofNullable(T)}).filter(S=>S.isPresent()).map(S=>S.map(T=>T.key.value).get());this.createInfoMessage(a,o)}return this.wbsActionProgressService.done(),new b.v9(e,o)}getErrorTitle(e){return 1===e?"SPT_SCOPE_DROP_TASK_ERROR_MESSAGE_TITLE":"SPT_SCOPE_DROP_TASKS_ERROR_MESSAGE_TITLE"}}le.\u0275fac=function(e){return new(e||le)(i.LFG(r.eX),i.LFG(J.D),i.LFG(F.B),i.LFG(xe.P),i.LFG(Qe.e),i.LFG(Je.h),i.LFG(xt.J),i.LFG(i.zs3),i.LFG(q.i))},le.\u0275prov=i.Yz7({token:le,factory:le.\u0275fac}),Ze([(0,r.Qm)(),qe("design:type",Object)],le.prototype,"moveTasks$",void 0),Ze([(0,r.Qm)(),qe("design:type",Object)],le.prototype,"reloadAfterMove$",void 0);var ke=s(63895);let Nt=(()=>{class n extends q.i{constructor(t,o,c){super(),this.store=t,this.actions$=o,this.feature=c}selectTasksState(t){return this.store.select(o=>I(o[this.feature][t]))}selectTasks(t){return this.store.select(o=>I(o[this.feature][t])).pipe((0,Re.q)(1),(0,_.U)(o=>o.tasks))}fetchAllTasks(t,o){this.store.dispatch(new b.Uy(t,o))}fetchNodesChildren(t,o,c,a){this.store.dispatch(new b.Le(t,{boxId:o,nodeId:c,maxNumberOfTasks:a}))}fetchMoreTasks(t){this.store.dispatch(new b.lM(t))}fetchWithFields(t,o){this.store.dispatch(new Ke.Gt(t,{fields:o}))}updateTask(t,o){this.store.dispatch(new b.sR(t,o))}updateTaskAndWaitForSuccess(t,o){return setTimeout(()=>{this.store.dispatch(new b.sR(t,o))}),this.actions$.pipe((0,r.l4)(b.MF.UPDATE_TASKS_SUCCESS),(0,_.U)(c=>c.payload))}searchTasks(t,o,c,a){this.store.dispatch(new b.RD(t,{query:o,isFullText:c,filter:a}))}rebuild(t){this.store.dispatch(new b.KX(t))}deleteTask(t,o){this.store.dispatch(new b.jE(t,o))}move(t,o,c){this.store.dispatch(new b.ru(t,{treeId:o,moveData:c}))}expandAll(t){this.store.dispatch(new b.g8(t))}expandTask(t,o){this.store.dispatch(new de.ee(t,o))}collapseAll(t){this.store.dispatch(new b.Ws(t))}collapseTask(t,o){this.store.dispatch(new re.mN(t,o))}sort(t,o){this.store.dispatch(new ke.L(t,o))}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(z.yh),i.LFG(r.eX),i.LFG(H.dj))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();class ge{constructor(e,t,o,c,a){this.actions$=e,this.configurationRepository=t,this.tasksRepository=o,this.wbsResource=c,this.wbsService=a,this.reloadTasks$=this.actions$.pipe((0,r.l4)(b.MF.DELETE_TASK_SUCCESS),(0,f.w)(S=>this.wbsService.getFetchParams(S.wbsId).pipe((0,f.w)(L=>(0,E.of)(new b.Uy(S.wbsId,L))))))}}ge.\u0275fac=function(e){return new(e||ge)(i.LFG(r.eX),i.LFG(p.H),i.LFG(q.i),i.LFG(J.D),i.LFG(F.B))},ge.\u0275prov=i.Yz7({token:ge,factory:ge.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],ge.prototype,"reloadTasks$",void 0);var Wt=s(44133);class Oe{constructor(e,t,o,c){this.actions$=e,this.wbsResource=t,this.wbsService=o,this.tasksRepository=c,this.searchTasks$=this.actions$.pipe((0,r.l4)(b.MF.SEARCH_TASKS),(0,f.w)(a=>(0,Ye.aj)([this.wbsService.getFetchParams(a.wbsId),this.tasksRepository.selectTasks(a.wbsId)]).pipe((0,f.w)(S=>{const L=S[1].length,k=S[0].options,Y=L>k.maxNumberOfTasks?L:k.maxNumberOfTasks;return this.searchTasks(new Wt.u(Object.assign(Object.assign({},k),{maxNumberOfTasks:Y})),a)}))))}searchTasks(e,t){const o=t.wbsId;return this.wbsResource.fetchTasks(e).pipe((0,_.U)(c=>new b.Od(o,Object.assign(Object.assign({},c),{isForIssuePage:e.options.extTaskId&&e.options.extTaskId.getId()}))),(0,O.K)(c=>(0,E.of)(c.status===ce.o.CONFLICT?new K.qd(o):new b.lV(o,{type:"error",text:c}))))}}Oe.\u0275fac=function(e){return new(e||Oe)(i.LFG(r.eX),i.LFG(J.D),i.LFG(F.B),i.LFG(q.i))},Oe.\u0275prov=i.Yz7({token:Oe,factory:Oe.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],Oe.prototype,"searchTasks$",void 0);var $t=s(47076),Pe=(()=>{return(n=Pe||(Pe={})).ASCENDING="ASCENDING",n.DESCENDING="DESCENDING",Pe;var n})(),jt=s(36367),et=function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);return c>3&&a&&Object.defineProperty(e,t,a),a},tt=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};class ue{constructor(e,t,o,c,a){this.actions$=e,this.wbsService=t,this.wbsResource=o,this.taskOrganizationCommandService=c,this.taskOrganizationQueryService=a,this.sortTasks$=this.actions$.pipe((0,r.l4)(ke.wm.SORT_TASKS),(0,f.w)(S=>{const T=S.payload.boxId;this.taskOrganizationCommandService.setOrganizationForBox(T,S.payload.fieldId,S.payload.ascSort?Pe.ASCENDING:Pe.DESCENDING);const Y=S.wbsId;return this.taskOrganizationQueryService.selectOrganization(T).pipe((0,Re.q)(1),(0,f.w)(()=>(0,E.of)(new ke.YM(Y))))})),this.reloadAfterSort$=this.actions$.pipe((0,r.l4)(ke.wm.SORT_TASKS_SUCCESS),(0,f.w)(S=>this.wbsService.getFetchParams(S.wbsId).pipe((0,f.w)(L=>(0,E.of)(new b.Uy(S.wbsId,L))))))}}ue.\u0275fac=function(e){return new(e||ue)(i.LFG(r.eX),i.LFG(F.B),i.LFG(J.D),i.LFG($t.V),i.LFG(jt.P))},ue.\u0275prov=i.Yz7({token:ue,factory:ue.\u0275fac}),et([(0,r.Qm)(),tt("design:type",Object)],ue.prototype,"sortTasks$",void 0),et([(0,r.Qm)(),tt("design:type",Object)],ue.prototype,"reloadAfterSort$",void 0);class ve{constructor(e,t,o,c){this.actions$=e,this.wbsResource=t,this.wbsService=o,this.wbsTaskFactory=c,this.updateTask$=this.actions$.pipe((0,r.l4)(b.MF.UPDATE_TASKS),(0,f.w)(a=>{const S=a.payload;return this.wbsService.getFetchParams(a.wbsId).pipe((0,f.w)(T=>this.updateTask(T,a,S)))}))}updateTask(e,t,o){return this.wbsResource.updateTask(e.options.boxId,o).pipe((0,_.U)(c=>{const a=this.wbsTaskFactory.createTasks(c);return new b.QM(t.wbsId,a)}),(0,O.K)(c=>(0,E.of)(new b._z(t.wbsId,{errorType:M.N.ERROR,actionType:t.type,restResponse:c}))))}}ve.\u0275fac=function(e){return new(e||ve)(i.LFG(r.eX),i.LFG(J.D),i.LFG(F.B),i.LFG(fe.T))},ve.\u0275prov=i.Yz7({token:ve,factory:ve.\u0275fac}),function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);c>3&&a&&Object.defineProperty(e,t,a)}([(0,r.Qm)(),function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],ve.prototype,"updateTask$",void 0);var st=s(20192),ie=s(8149);let Xt=(()=>{class n extends oe.R{constructor(t,o){super(),this.store=t,this.feature=o}selectState(t){return this.store.select(o=>w(o[this.feature][t]))}select(t){return this.store.select(o=>w(o[this.feature][t]))}initState(t){this.store.dispatch(new ie.j7(t))}changeExpanded(t,o){this.store.dispatch(new ie.so(t,o))}changeLayoutMode(t,o){this.store.dispatch(new ie.Nz(t,o))}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(z.yh),i.LFG(H.dj))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var ot=s(9933);let rt=(()=>{class n{constructor(t,o){this.localStorage=t,this.userSettingsRepository=o,this.USER_SETTINGS_KEY="SoftwareplantWbsUserSettings"}isInLocalStorage(){return this.localStorage.hasObject(this.USER_SETTINGS_KEY)}loadFromLocalStorage(){return this.localStorage.getObject(this.USER_SETTINGS_KEY)}saveActualStateInLocalStorage(t){this.userSettingsRepository.select(t).pipe((0,Re.q)(1)).subscribe(o=>{this.localStorage.setObject(this.USER_SETTINGS_KEY,o)})}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(ot.m),i.LFG(oe.R))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var nt=function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);return c>3&&a&&Object.defineProperty(e,t,a),a},at=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};class Se{constructor(e,t){this.actions$=e,this.userSettingsPersistService=t,this.initState$=this.actions$.pipe((0,r.l4)(ie.MF.INIT_STATE),(0,f.w)(o=>{if(this.userSettingsPersistService.isInLocalStorage()){const c=this.userSettingsPersistService.loadFromLocalStorage();return(0,E.of)(new ie.nV(o.wbsId,c))}return(0,E.of)(new ie.Xo(o.wbsId,o.wbsId))})),this.persistInLS$=this.actions$.pipe((0,r.l4)(ie.MF.CHANGE_DISPLAY_MODE,ie.MF.SET_EXPANDED,ie.MF.CHANGE_LAYOUT_MODE),(0,f.w)(o=>(this.userSettingsPersistService.saveActualStateInLocalStorage(o.wbsId),y.E)))}}Se.\u0275fac=function(e){return new(e||Se)(i.LFG(r.eX),i.LFG(rt))},Se.\u0275prov=i.Yz7({token:Se,factory:Se.\u0275fac}),nt([(0,r.Qm)(),at("design:type",Object)],Se.prototype,"initState$",void 0),nt([(0,r.Qm)(),at("design:type",Object)],Se.prototype,"persistInLS$",void 0);var Vt=s(70822);let Yt=(()=>{class n extends Ne.n{constructor(t,o){super(),this.store=t,this.feature=o}getState(t){return this.store.pipe((0,Vt.h)(o=>o[this.feature]&&0!==Object.keys(o[this.feature]).length),(0,z.Ys)(o=>(n=>n?n.wbs:null)(o[this.feature][t])))}initState(t){this.store.dispatch(new K.j7(t))}changeProgram(t,o){this.store.dispatch(new K.XV(t,o))}reFetchTasks(t){this.store.dispatch(new K.js(t))}setQuickFilters(t,o){this.store.dispatch(new K.Qn(t,o))}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(z.yh),i.LFG(H.dj))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();var zt=s(70190),Jt=s(18709),Zt=s(83451),qt=s(6875),es=s(65756),We=function(n,e,t,o){var S,c=arguments.length,a=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,o);else for(var T=n.length-1;T>=0;T--)(S=n[T])&&(a=(c<3?S(a):c>3?S(e,t,a):S(e,t))||a);return c>3&&a&&Object.defineProperty(e,t,a),a},Ge=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};class ne{constructor(e,t,o,c,a,S,T){this.actions$=e,this.wbsService=t,this.crossModuleFiltersResource=o,this.wbsFetchParamsService=c,this.httpWbsResource=a,this.DEFAULT_EFFECT=S,this.quickFiltersRepository=T,this.reFetchTasks$=this.actions$.pipe((0,r.l4)(K.wN.REFETCH_TASKS),(0,f.w)(L=>this.wbsService.getFetchParams(L.wbsId).pipe((0,Jt.VS)(k=>(0,E.of)(new b.Uy(L.wbsId,k)))))),this.changeProgram$=this.actions$.pipe((0,r.l4)(K.wN.CHANGE_ACTIVE_PROGRAM),(0,f.w)(L=>this.wbsService.getFetchParams(L.wbsId).pipe((0,f.w)(k=>(0,E.of)(new b.Uy(L.wbsId,k)))))),this.changeActiveContextToProgram$=this.actions$.pipe((0,r.l4)(K.wN.CHANGE_ACTIVE_CONTEXT_TO_PROGRAM),(0,f.w)(L=>this.wbsService.getFetchParams(L.wbsId).pipe((0,f.w)(k=>(0,E.of)(new b.Uy(L.wbsId,k)))))),this.fetchQuickFilters$=this.actions$.pipe((0,r.l4)(K.wN.FETCH_QUICK_FILTERS),(0,f.w)(L=>(this.DEFAULT_EFFECT?this.quickFiltersRepository.selectQuickFilters().pipe((0,Re.q)(1)):this.crossModuleFiltersResource.getAllFilters()).pipe((0,_.U)(Y=>new K.Ly(L.wbsId,Y)),(0,O.K)(Y=>(0,E.of)(new K.Q2(L.wbsId,{errorType:M.N.ERROR,actionType:L.type,restResponse:Y}))))))}}ne.\u0275fac=function(e){return new(e||ne)(i.LFG(r.eX),i.LFG(F.B),i.LFG(Zt.z),i.LFG(st.Q),i.LFG(zt.k),i.LFG(qt.B,8),i.LFG(es.s,8))},ne.\u0275prov=i.Yz7({token:ne,factory:ne.\u0275fac}),We([(0,r.Qm)(),Ge("design:type",Object)],ne.prototype,"reFetchTasks$",void 0),We([(0,r.Qm)(),Ge("design:type",Object)],ne.prototype,"changeProgram$",void 0),We([(0,r.Qm)(),Ge("design:type",Object)],ne.prototype,"changeActiveContextToProgram$",void 0),We([(0,r.Qm)(),Ge("design:type",Object)],ne.prototype,"fetchQuickFilters$",void 0);var ts=s(68435),ss=s(61993),os=s(79047),rs=s(90320),ns=s(55928),as=s(62807),is=s(28722),cs=s(92944),ds=s(7018);let ls=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[De.e,{provide:W.i,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[rt,ot.m,je.f,F.B,fe.T,m.L,st.Q,x.x,xe.P,Je.h,v.Y,$e.F,ds.D,{provide:Ne.n,useClass:Yt},{provide:oe.R,useClass:Xt},{provide:q.i,useClass:Nt},{provide:p.H,useClass:Z},{provide:J.D,useClass:He.k},{provide:R.b,useClass:be._}],imports:[[u.ez,A.G,l.u5,l.UX,as.nv.forRoot(),ns.l,h.g,os.C,is.v.forRoot(),ss.r.forRoot(),cs.$,r.sQ.forFeature([ne,Se,ge,j,ae,X,le,ye,ue,_e,Ae,Ce,Ie,Oe,ve,Fe]),ts.v,rs.t,d.J]]}),n})()},7018:(P,C,s)=>{s.d(C,{D:()=>A});var u=s(46363),l=s(45778),r=s(4683),d=s(71726),h=s(84046);let A=(()=>{class p{constructor(E,f){this.boxPermissionService=E,this.readonlyModeStorage=f}isReadonlyMode$(){return(0,r.aj)([this.boxPermissionService.selectReadOnlyPermissions(),this.readonlyModeStorage.select()]).pipe((0,d.U)(([E,f])=>E||f))}}return p.\u0275fac=function(E){return new(E||p)(h.LFG(u.W),h.LFG(l.E))},p.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac}),p})()},88485:(P,C,s)=>{s.d(C,{f:()=>O});var u=s(80064),l=s(71079),r=s(94003),d=s(57260),h=s(84046),A=s(23110),p=s(3291),R=s(40731),E=s(36828),f=s(54222),_=s(49415);let O=(()=>{class U{constructor(i,$,V,j,x,N,B,w,I){this.wbsRepository=i,this.userSettingsRepository=$,this.tasksRepository=V,this.configurationRepository=j,this.treeCommandService=x,this.wbsOverviewActionProgressService=N,this.dropDestinationRepository=B,this.boxLocalStorageService=w,this.columnViewCommandService=I}create(i=""){return new d.F(i,this.wbsRepository,this.userSettingsRepository,this.tasksRepository,this.configurationRepository,this.columnViewCommandService,this.treeCommandService,this.wbsOverviewActionProgressService,this.dropDestinationRepository,this.boxLocalStorageService)}}return U.\u0275fac=function(i){return new(i||U)(h.LFG(A.n),h.LFG(p.R),h.LFG(R.i),h.LFG(E.H),h.LFG(u.z),h.LFG(f.h),h.LFG(_.J),h.LFG(r.Y),h.LFG(l.J,8))},U.\u0275prov=h.Yz7({token:U,factory:U.\u0275fac}),U})()},94003:(P,C,s)=>{s.d(C,{Y:()=>A});var u=s(67890),l=s(9933),r=s(66795),d=s(84046),h=s(83950);let A=(()=>{class p{constructor(E,f){this.environmentService=E,this.localStorageService=f}setBoxId(E,f){const _=this.getLocalStorageKey(E);this.localStorageService.setItem(_,f.toString())}getBoxId(E){const f=this.getLocalStorageKey(E),_=this.localStorageService.getItem(f);return r.bq.ofNullable(_).map(O=>new u.Au(O))}getLocalStorageKey(E){const f=this.environmentService.getIssueId();return`${p.LS_KEY}-${f}-${E}`}}return p.LS_KEY="wbs-selected-box-id",p.\u0275fac=function(E){return new(E||p)(d.LFG(h.L),d.LFG(l.m))},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac}),p})()},71805:(P,C,s)=>{s.d(C,{S:()=>u});class u{constructor(r){this.nodes=r}static fromFlat(r){const d=u.fromFlatStructure(r);return new u(d.tasks)}static fromFlatStructure(r){const d=[];return Array.isArray(r)&&0!==r.length?(r.forEach(h=>{if(null==h.parent)d.push(u.createIssue(h));else if(h.parent){const A=u.search(d,h.parent);A&&Array.isArray(A.children)&&(A.children.push(u.createIssue(h)),A.loaded=!0)}}),{tasks:d}):{tasks:d}}static searchTree(r,d,h){const A=Object.assign({},r,{children:void 0}),p=[...h];if(p.push(A),r.id===d){const R=[...p];for(let E=1,f=p.length;E<f;E+=1)R[E-1].children=[],R[E-1].children.push(p[E]);return R.length=1,R}if(null!==r.children){let R=null;for(let E=0;null===R&&E<r.children.length;E++)R=u.searchTree(r.children[E],d,p);return R}return null}addNodes(r,d){r.forEach(h=>{void 0!==h.parent&&d&&Array.isArray(d.children)&&(d.children.push(u.createIssue(h)),d.open=!0,d.loaded=!0)})}openAllParentNodes(r){this.open(this.nodes,r)}open(r,d){for(let h=0,A=r.length;h<A;h+=1)d!==r[h].id?!0===r[h].hasChild&&(r[h].open=!0,this.open(r[h].children,d)):d===r[h].id&&(!0===r[h].hasChild&&0===r[h].children.length?r[h].open=!1:!0===r[h].hasChild&&0!==r[h].children.length&&!0===r[h].loaded&&(r[h].open=!0))}openAllLoadedNodes(){this.openLoaded(this.nodes)}openLoaded(r){for(let d=0,h=r.length;d<h;d+=1)!0===r[d].hasChild&&r[d].children.length>0?(r[d].open=!0,this.openLoaded(r[d].children)):!0===r[d].hasChild&&0===r[d].children.length&&(r[d].open=!1)}getParentsForTask(r){if(0===this.nodes.length)return new u([]);const h=u.searchTree(this.nodes[0],r,[]);return new u(null!==h?h:[])}sortAll(){this.sort(this.nodes,this.sortTree)}sort(r,d){for(let h=0,A=r.length;h<A;h+=1)!0===r[h].hasChild&&r[h].children.length>0&&(r[h].children.sort(d),this.openLoaded(r[h].children))}sortTree(r,d){const h=r.summary.toLowerCase(),A=d.summary.toLowerCase();return h>A?1:h<A?-1:0}}u.empty=new u([]),u.search=(l,r)=>{for(let d=0,h=l.length;d<h;d+=1){const A=l[d];if(A.id===r)return A;if(Array.isArray(A.children)&&A.children.length>0){const p=u.search(A.children,r);if(void 0!==p)return p}}},u.createIssue=l=>Object.assign(Object.assign({},l),{children:[]})},1263:(P,C,s)=>{s.d(C,{L:()=>p});var u=s(90850),l=s(71726),r=s(35811),d=s(1052),h=s(14061),A=s(84046);let p=(()=>{class R{constructor(f){this.wbsAccessor=f,this.onDestroy$=new u.xQ}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}observeActions(f){return this.wbsAccessor.getWbs().observeSelectedNodes().pipe((0,l.U)(_=>0===_.length?d.v.NEGATIVE:new d.v(_)),(0,r.R)(this.onDestroy$))}}return R.\u0275fac=function(f){return new(f||R)(A.LFG(h.f))},R.\u0275prov=A.Yz7({token:R,factory:R.\u0275fac}),R})()},40731:(P,C,s)=>{s.d(C,{i:()=>u});class u{constructor(){}}},3291:(P,C,s)=>{s.d(C,{R:()=>u});class u{constructor(){}}},23110:(P,C,s)=>{s.d(C,{n:()=>u});class u{constructor(){}}},54222:(P,C,s)=>{s.d(C,{h:()=>r});var u=s(18840),l=s(84046);let r=(()=>{class d{constructor(){this.inProgress$=new u.X(!1)}inProgress(){this.inProgress$.next(!0)}done(){this.inProgress$.next(!1)}isInProgress(){return this.inProgress$.asObservable()}}return d.\u0275fac=function(A){return new(A||d)},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac}),d})()},99429:(P,C,s)=>{s.d(C,{B:()=>p});var u=s(98274),l=s(84046),r=s(20192),d=s(23110),h=s(52432),A=s(81785);let p=(()=>{class R{constructor(f,_,O,U){this.wbsFetchParamsService=f,this.wbsRepository=_,this.wbsResource=O,this.columnViewQueryService=U}getFetchParams(f){return this.wbsFetchParamsService.getParams(f)}expandTask(f,_){return this.getFetchParams(f).pipe((0,u.w)(()=>this.wbsResource.expandTask(_)))}}return R.\u0275fac=function(f){return new(f||R)(l.LFG(r.Q),l.LFG(d.n),l.LFG(h.D),l.LFG(A.X,8))},R.\u0275prov=l.Yz7({token:R,factory:R.\u0275fac}),R})()},41619:(P,C,s)=>{s.d(C,{dj:()=>J,QW:()=>re});var u=s(84046),l=s(25468),r=s(77099),d=s(4738),h=s(18019),A=s(73877);class p extends A.Z{constructor(){super(...arguments),this.activeTaskFetched=!1,this.activeExternalTaskFetched=!1,this.activeBoxFetched=!1,this.error=null}equals(F){return JSON.stringify(F)===JSON.stringify(this)}}const R=new p;function E(y=R,F){switch(F.type){case h.wN.INIT_STATE:return Object.assign(new p,y);case h.wN.SET_PROGRAM:const D=F.payload;return Object.assign(new p,y,{activeBox:D,activeBoxFetched:!0,fetched:!0,activeExternalTaskFetched:!0});case h.wN.CHANGE_ACTIVE_CONTEXT_TO_PROGRAM:const G=Object.assign({},F.payload);return Object.assign(new p,y,{activeBox:G});case h.wN.SET_ACTIVE_BOX:return Object.assign(new p,y,{activeExternalTaskFetched:!0});case d.MF.FETCH_TASKS:return Object.assign(new p,y);case d.MF.FETCH_TASKS_SUCCESS:const Q=F.payload.taskId;return Object.assign(new p,y,{activeTaskId:Q,activeTaskFetched:!0});case h.wN.CHANGE_ACTIVE_PROGRAM:const X=F.payload;return Object.assign(new p,y,{activeBox:X});case h.wN.SET_WBS_TO_OVERVIEW:return Object.assign(new p,y);case h.wN.FETCH_QUICK_FILTERS_SUCCESS:const he=F.payload.filter(pe=>pe.selected).map(pe=>pe.id);return Object.assign(new p,y,{selectedQuickFilterIds:he});case h.wN.SET_QUICK_FILTERS:const me=F.payload;return Object.assign(new p,y,{selectedQuickFilterIds:me});case h.wN.SET_PROGRAM_FAILURE:case d.MF.FETCH_TASKS_FAILURE:case d.MF.FETCH_NODES_CHILDREN_FAILURE:case d.MF.FETCH_MORE_TASKS_FAILURE:case r.bk.FETCH_CONFIGURATION_FAILURE:case h.wN.FETCH_QUICK_FILTERS_FAILURE:case d.MF.UPDATE_TASKS_FAILURE:const Le=F.payload;return Object.assign(new p,y,{error:Le});default:return y}}var f=s(31895);class _ extends A.Z{constructor(F=!1,D=f.X.NORMAL){super(),this.expanded=!1,this.expanded=F,this.layoutMode=D}}new _;var U=s(8149);const M=new _;function i(y=M,F){switch(F.type){case U.MF.INIT_STATE:return Object.assign(new _,y,{fetching:!0});case U.MF.INIT_STATE_SUCCESS:const D=Object.assign(Object.assign({},F.payload),{fetching:!1,fetched:!0});return Object.assign(new _,y,D);case U.MF.INIT_STATE_FAILURE:return Object.assign(new _,y,{fetching:!1,fetched:!0});case U.MF.SET_EXPANDED:const G=F.payload;return Object.assign(new _,y,{expanded:G});case U.MF.CHANGE_LAYOUT_MODE:const Q=F.payload;return Object.assign(new _,y,{layoutMode:Q});default:return y}}var $=s(70162),V=s(71805),j=s(55742);class x extends A.Z{constructor(){super(...arguments),this.tasks=[],this.treeGrid=V.S.empty,this.movedTaskId=-1}}const N=new x;function B(y=N,F){switch(F.type){case d.MF.FETCH_TASKS:return Object.assign(new x,y,{fetching:!0});case d.MF.FETCH_TASKS_SUCCESS:const D=[...F.payload.tasks],G=g(D,F.payload.isForIssuePage);return Object.assign(new x,y,{treeGrid:G,tasks:D,fetching:!1,fetched:!0});case d.MF.FETCH_TASKS_FAILURE:return Object.assign(new x,y,{fetching:!1});case d.MF.FETCH_NODES_CHILDREN:return Object.assign(new x,y,{fetching:!0});case d.MF.FETCH_NODES_CHILDREN_FAILURE:return Object.assign(new x,y,{fetching:!1});case d.MF.FETCH_NODES_CHILDREN_SUCCESS:const Q=[...y.tasks,...F.payload.tasks],X=V.S.fromFlat([...Q]);return Object.assign(new x,y,{tasks:Q,treeGrid:X,fetching:!1});case j.dS.FETCH_WITH_FIELDS_ALL_TASK_SUCCESS:const K=$.cloneDeep([...F.payload.tasks]),Ee=g(K,F.payload.isForIssuePage);return F.payload.isForIssuePage||Ee.openAllLoadedNodes(),Object.assign(new x,y,{treeGrid:Ee,tasks:K});case d.MF.FETCH_MORE_TASKS_SUCCESS:const he=[...F.payload.tasks],me=V.S.fromFlat(he);return me.openAllLoadedNodes(),Object.assign(new x,y,{treeGrid:me,tasks:he});case d.MF.SEARCH_TASKS_SUCCESS:const Le=[...F.payload.tasks],pe=g(Le,F.payload.isForIssuePage);return Object.assign(new x,y,{treeGrid:pe,tasks:Le,fetching:!1,fetched:!0});case d.MF.DELETE_TASK_SUCCESS:return Object.assign(new x,y);case d.MF.UPDATE_TASKS:return Object.assign(new x,y,{fetching:!0});case d.MF.UPDATE_TASKS_SUCCESS:return function(y,F){const G=[...F.tasks];y.payload.forEach(X=>{const K=G.map(Ee=>Ee.id).indexOf(X.id);G.splice(K,1,X)});const Q=V.S.fromFlat(G);return Q.openAllLoadedNodes(),Object.assign(new x,F,{treeGrid:Q,tasks:G,fetching:!1,fetched:!0})}(F,y);case d.MF.REBUILD:const Te=JSON.parse(JSON.stringify(y.treeGrid));return Object.assign(new x,y,{treeGrid:Te});case d.MF.LOAD_DATA:return Object.assign(new x,y,{fetching:!0});case d.MF.LOAD_DATA_SUCCESS:return function(y,F){const D=$.cloneDeep(y.payload),G=$.cloneDeep([...F.tasks]);G.length>0&&D.forEach(X=>{const K=H(X.id,G);K.accessible=X.accessible,K.columns=X.columns,K.isLoaded=!0});const Q=new V.S(G);return Object.assign(new x,F,{treeGrid:Q,tasks:G,fetching:!1,fetched:!0})}(F,y);default:return y}}function g(y,F){let D;return F?(D=V.S.fromFlat(y),D.openAllLoadedNodes(),D):(D=new V.S(y),D)}function H(y,F){for(let D=0;D<F.length;D++){if(F[D].id===y)return F[D];const G=H(y,F[D].children);if(G)return G}return null}var z=s(42377);class Z extends A.Z{constructor(){super(...arguments),this.configuration=z.H.default}}const be=new Z;function W(y=be,F){switch(F.type){case r.bk.FETCH_CONFIGURATION:return Object.assign(new Z,y,{fetching:!0});case r.bk.FETCH_CONFIGURATION_SUCCESS:const D=Object.assign({},F.payload);return Object.assign(new Z,y,{configuration:D,fetching:!1,fetched:!0});case r.bk.FETCH_CONFIGURATION_FAILURE:return Object.assign(new Z,y,{fetching:!1});default:return y}}var m=s(13843);const xe=new class extends A.Z{constructor(){super(...arguments),this.boxes=[]}};function fe(y){return function(F){return function(G,Q){return"@ngrx/store/init"===Q.type||Q.wbsId&&Q.wbsId===y?F(G,Q):G}}}var oe=s(13519);const Ne=new class extends A.Z{constructor(){super(...arguments),this.flatTasksMode=!1,this.plannedTasksMode=!1,this.upperLevelTasksMode=!1,this.filterQuery=""}},J=new u.OlP("WBS_STORE_FEATURE"),De={wbs:E,userSettings:i,tasks:B,configuration:W},He={wbs:E,userSettings:i,tasks:B,configuration:W,backlogBoxes:function(y=xe,F){switch(F.type){case m.M.SET_BOXES:const D=F.payload;return Object.assign(Object.assign({},y),{fetched:!0,boxes:D});default:return y}},backlogUserSettings:function(y=Ne,F){switch(F.type){case oe.MF.SET_FLAT_TASKS_MODE:{const D=F.payload;return Object.assign(Object.assign({},y),{flatTasksMode:D})}case oe.MF.SET_PLANNED_TASKS_MODE:{const D=F.payload;return Object.assign(Object.assign({},y),{plannedTasksMode:D})}case oe.MF.SET_UPPER_LEVEL_TASK_MODE:{const D=F.payload;return Object.assign(Object.assign({},y),{upperLevelTasksMode:D})}case oe.MF.SET_FILTER_QUERY:{const D=F.payload;return Object.assign(Object.assign({},y),{filterQuery:D})}case oe.MF.LOAD_SETTINGS:return Object.assign(Object.assign({},y),{fetching:!0});case oe.MF.LOAD_SETTINGS_SUCCESS:{const D=F.payload;return D?Object.assign(Object.assign({},y),{fetching:!1,fetched:!0,flatTasksMode:D.flatTasksMode,plannedTasksMode:D.plannedTasksMode,upperLevelTasksMode:D.upperLevelTasksMode,filterQuery:D.filterQuery}):Object.assign({},y)}default:return y}}};function re(){return{wbsMain:(0,l.qC)(fe("wbsMain"),l.UY)(De),wbsSecond:(0,l.qC)(fe("wbsSecond"),l.UY)(De),wbsIssuePage:(0,l.qC)(fe("wbsIssuePage"),l.UY)(De),backlog:(0,l.qC)(fe("backlog"),l.UY)(He)}}new u.OlP("root reducer")},44133:(P,C,s)=>{s.d(C,{u:()=>u});class u{constructor(r){this.options=r}}},22097:(P,C,s)=>{s.d(C,{K:()=>u});class u{constructor(r,d){this.fields=r,this.changed=d}}},4738:(P,C,s)=>{s.d(C,{g8:()=>u.g8,Ws:()=>l.Ws,MF:()=>d,Uy:()=>h,l2:()=>A,x8:()=>p,Le:()=>R,TD:()=>E,Ss:()=>f,sR:()=>_,QM:()=>O,_z:()=>U,ru:()=>M,v9:()=>i,_:()=>$,lM:()=>V,fK:()=>j,P9:()=>x,RD:()=>N,Od:()=>B,lV:()=>w,jE:()=>I,VD:()=>g,z_:()=>H,KX:()=>z,YI:()=>Z,D3:()=>be});var u=s(27591),l=s(7840);const r="[WBS Tasks]",d={FETCH_TASKS:`${r}FETCH_TASKS`,FETCH_TASKS_SUCCESS:`${r}FETCH_TASKS_SUCCESS`,FETCH_TASKS_FAILURE:`${r}FETCH_TASKS_FAILURE`,FETCH_NODES_CHILDREN:`${r}FETCH_NODES_CHILDREN`,FETCH_NODES_CHILDREN_SUCCESS:`${r}FETCH_NODES_CHILDREN_SUCCESS`,FETCH_NODES_CHILDREN_FAILURE:`${r}FETCH_NODES_CHILDREN_FAILURE`,UPDATE_TASKS:`${r}UPDATE_TASKS`,UPDATE_TASKS_SUCCESS:`${r}UPDATE_TASKS_SUCCESS`,UPDATE_TASKS_FAILURE:`${r}UPDATE_TASKS_FAILURE`,MOVE_TASKS:`${r}MOVE_TASKS`,MOVE_TASKS_SUCCESS:`${r}MOVE_TASKS_SUCCESS`,MOVE_TASKS_FAILURE:`${r}MOVE_TASKS_FAILURE`,FETCH_MORE_TASKS:`${r}FETCH_MORE_TASKS`,FETCH_MORE_TASKS_SUCCESS:`${r}FETCH_MORE_TASKS_SUCCESS`,FETCH_MORE_TASKS_FAILURE:`${r}FETCH_MORE_TASKS_FAILURE`,SEARCH_TASKS:`${r}SEARCH_TASKS`,SEARCH_TASKS_SUCCESS:`${r}SEARCH_TASKS_SUCCESS`,SEARCH_TASKS_FAILURE:`${r}SEARCH_TASKS_FAILURE`,DELETE_TASK:`${r}DELETE_TASK`,DELETE_TASK_SUCCESS:`${r}DELETE_TASK_SUCCESS`,DELETE_TASK_FAILURE:`${r}DELETE_TASK_FAILURE`,EXPAND_ALL_TASK:`${r}EXPAND_ALL_TASK`,EXPAND_ALL_TASK_SUCCESS:`${r}EXPAND_ALL_TASK_SUCCESS`,EXPAND_ALL_TASK_FAILURE:`${r}EXPAND_ALL_TASK_FAILURE`,REBUILD:`${r}REBUILD`,LOAD_DATA:`${r}LOAD_DATA`,LOAD_DATA_SUCCESS:`${r}LOAD_DATA_SUCCESS`};class h{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_TASKS}}class A{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_TASKS_SUCCESS}}class p{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_TASKS_FAILURE}}class R{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_NODES_CHILDREN}}class E{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_NODES_CHILDREN_SUCCESS}}class f{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_NODES_CHILDREN_FAILURE}}class _{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.UPDATE_TASKS}}class O{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.UPDATE_TASKS_SUCCESS}}class U{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.UPDATE_TASKS_FAILURE}}class M{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.MOVE_TASKS}}class i{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.MOVE_TASKS_SUCCESS}}class ${constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.MOVE_TASKS_FAILURE}}class V{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_MORE_TASKS}}class j{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_MORE_TASKS_SUCCESS}}class x{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.FETCH_MORE_TASKS_FAILURE}}class N{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.SEARCH_TASKS}}class B{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.SEARCH_TASKS_SUCCESS}}class w{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.SEARCH_TASKS_FAILURE}}class I{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.DELETE_TASK}}class g{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.DELETE_TASK_SUCCESS}}class H{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.DELETE_TASK_FAILURE}}class z{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.REBUILD}}class Z{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.LOAD_DATA}}class be{constructor(v,m){this.wbsId=v,this.payload=m,this.type=d.LOAD_DATA_SUCCESS}}},20192:(P,C,s)=>{s.d(C,{Q:()=>i});var u=s(53339),l=s(4683),r=s(71726),d=s(63833),h=s(44133),A=s(22097),p=s(95336),R=s(32498),E=s(84046),f=s(83950),_=s(23110),O=s(3291),U=s(36828),M=s(81785);let i=(()=>{class ${constructor(j,x,N,B,w){this.environmentService=j,this.wbsRepository=x,this.userSettingsRepository=N,this.configurationRepository=B,this.columnViewQueryService=w}getParams(j){let x;return x=this.columnViewQueryService?this.columnViewQueryService.selectActual().pipe((0,r.U)(N=>N?new A.K(N.fieldConfigs,N.changed):new A.K([],!0))):(0,u.of)([]),(0,l.aj)([this.wbsRepository.getState(j),this.configurationRepository.selectConfiguration(j),x]).pipe((0,d.q)(1),(0,r.U)(N=>{const B=N[0],w=N[1],I=N[2],g=this.environmentService.getIssueId(),H=this.environmentService.getMainExtPlatformId(),z=new R.j(g,p.U.REGULAR_ISSUE,H),Z={boxId:B.activeBox.getId().toString(),maxNumberOfTasks:w.maxNumberOfTasks,fieldsParams:I,extTaskId:z};return new h.u(Z)}))}}return $.\u0275fac=function(j){return new(j||$)(E.LFG(f.L),E.LFG(_.n),E.LFG(O.R),E.LFG(U.H),E.LFG(M.X,8))},$.\u0275prov=E.Yz7({token:$,factory:$.\u0275fac}),$})()},7840:(P,C,s)=>{s.d(C,{o0:()=>l,Ws:()=>r,Av:()=>d,$S:()=>h,mN:()=>A,TC:()=>p,$3:()=>R});const u="[WBS Tasks Collapse]",l={COLLAPSE_ALL_TASK:`${u}COLLAPSE_ALL_TASK`,COLLAPSE_ALL_TASK_SUCCESS:`${u}COLLAPSE_ALL_TASK_SUCCESS`,COLLAPSE_ALL_TASK_FAILURE:`${u}COLLAPSE_ALL_TASK_FAILURE`,COLLAPSE_TASK:`${u}COLLAPSE_TASK`,COLLAPSE_TASK_SUCCESS:`${u}COLLAPSE_TASK_SUCCESS`,COLLAPSE_TASK_FAILURE:`${u}COLLAPSE_TASK_FAILURE`};class r{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.COLLAPSE_ALL_TASK}}class d{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.COLLAPSE_ALL_TASK_SUCCESS}}class h{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.COLLAPSE_ALL_TASK_FAILURE}}class A{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.COLLAPSE_TASK}}class p{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.COLLAPSE_TASK_SUCCESS}}class R{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.COLLAPSE_TASK_FAILURE}}},27591:(P,C,s)=>{s.d(C,{x3:()=>l,g8:()=>r,Dr:()=>d,m3:()=>h,ee:()=>A,YW:()=>p,ph:()=>R});const u="[WBS Tasks Expand]",l={EXPAND_ALL_TASK:`${u}EXPAND_ALL_TASK`,EXPAND_ALL_TASK_SUCCESS:`${u}EXPAND_ALL_TASK_SUCCESS`,EXPAND_ALL_TASK_FAILURE:`${u}EXPAND_ALL_TASK_FAILURE`,EXPAND_TASK:`${u}EXPAND_TASK`,EXPAND_TASK_SUCCESS:`${u}EXPAND_TASK_SUCCESS`,EXPAND_TASK_FAILURE:`${u}EXPAND_TASK_FAILURE`};class r{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.EXPAND_ALL_TASK}}class d{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.EXPAND_ALL_TASK_SUCCESS}}class h{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.EXPAND_ALL_TASK_FAILURE}}class A{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.EXPAND_TASK}}class p{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.EXPAND_TASK_SUCCESS}}class R{constructor(f,_){this.wbsId=f,this.payload=_,this.type=l.EXPAND_TASK_FAILURE}}},55742:(P,C,s)=>{s.d(C,{dS:()=>l,Gt:()=>r,xY:()=>d,no:()=>h});const u="[WBS Tasks Fetch]",l={FETCH_WITH_FIELDS_ALL_TASK:`${u}FETCH_WITH_FIELDS_ALL_TASK`,FETCH_WITH_FIELDS_ALL_TASK_SUCCESS:`${u}FETCH_WITH_FIELDS_ALL_TASK_SUCCESS`,FETCH_WITH_FIELDS_ALL_TASK_FAILURE:`${u}FETCH_WITH_FIELDS_ALL_TASK_FAILURE`};class r{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.FETCH_WITH_FIELDS_ALL_TASK}}class d{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.FETCH_WITH_FIELDS_ALL_TASK_SUCCESS}}class h{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.FETCH_WITH_FIELDS_ALL_TASK_FAILURE}}},63895:(P,C,s)=>{s.d(C,{wm:()=>l,L:()=>r,YM:()=>d});const u="[Tasks Sort]",l={SORT_TASKS:`${u}SORT_TASKS`,SORT_TASKS_SUCCESS:`${u}SORT_TASKS_SUCCESS`,SORT_TASKS_FAILURE:`${u}SORT_TASKS_FAILURE`};class r{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.SORT_TASKS}}class d{constructor(p,R){this.wbsId=p,this.payload=R,this.type=l.SORT_TASKS_SUCCESS}}},31895:(P,C,s)=>{s.d(C,{X:()=>u});var u=(()=>{return(l=u||(u={}))[l.COMPACT=0]="COMPACT",l[l.NORMAL=1]="NORMAL",u;var l})()},8149:(P,C,s)=>{s.d(C,{MF:()=>l,j7:()=>r,nV:()=>d,Xo:()=>h,so:()=>A,Nz:()=>p});const u="[WBS UserSettings]",l={INIT_STATE:`${u}INIT_STATE`,INIT_STATE_SUCCESS:`${u}INIT_STATE_SUCCESS`,INIT_STATE_FAILURE:`${u}INIT_STATE_FAILURE`,CHANGE_DISPLAY_MODE:`${u}CHANGE_DISPLAY_MODE`,SET_EXPANDED:`${u}SET_EXPANDED`,CHANGE_LAYOUT_MODE:`${u}CHANGE_LAYOUT_MODE`};class r{constructor(E,f){this.wbsId=E,this.payload=f,this.type=l.INIT_STATE}}class d{constructor(E,f){this.wbsId=E,this.payload=f,this.type=l.INIT_STATE_SUCCESS}}class h{constructor(E,f){this.wbsId=E,this.payload=f,this.type=l.INIT_STATE_FAILURE}}class A{constructor(E,f){this.wbsId=E,this.payload=f,this.type=l.SET_EXPANDED}}class p{constructor(E,f){this.wbsId=E,this.payload=f,this.type=l.CHANGE_LAYOUT_MODE}}},18019:(P,C,s)=>{s.d(C,{wN:()=>l,Ny:()=>r,j7:()=>d,js:()=>A,Nl:()=>p,zn:()=>R,Qw:()=>E,XV:()=>f,So:()=>M,Ly:()=>i,Q2:()=>$,Qn:()=>V,UE:()=>j,L0:()=>x,qd:()=>B});const u="[WBS]",l={SET_ACTIVE_BOX:`${u}SET_ACTIVE_BOX`,INIT_STATE:`${u}INIT_STATE`,SET_STATE:`${u}SET_STATE`,REFETCH_TASKS:`${u}REFETCH_TASKS`,SET_PROGRAM:`${u}SET_PROGRAM`,SET_PROGRAM_FAILURE:`${u}SET_PROGRAM_FAILURE`,SET_WBS_STATE:`${u}SET_WBS_STATE`,SET_WBS_TO_OVERVIEW:`${u}SET_WBS_TO_OVERVIEW`,CHANGE_ACTIVE_PROGRAM:`${u}CHANGE_ACTIVE_PROGRAM`,CHANGE_ACTIVE_CONTEXT_TO_PROGRAM:`${u}CHANGE_ACTIVE_CONTEXT_TO_PROGRAM`,CHANGE_ACTIVE_CONTEXT_TO_PROGRAM_FAILURE:`${u}CHANGE_ACTIVE_CONTEXT_TO_PROGRAM_FAILURE`,CHANGE_ACTIVE_CONTEXT_TO_PROGRAM_SUCCESS:`${u}CHANGE_ACTIVE_CONTEXT_TO_PROGRAM_SUCCESS`,FETCH_QUICK_FILTERS:`${u}FETCH_QUICK_FILTERS`,FETCH_QUICK_FILTERS_SUCCESS:`${u}FETCH_QUICK_FILTERS_SUCCESS`,FETCH_QUICK_FILTERS_FAILURE:`${u}FETCH_QUICK_FILTERS_FAILURE`,SET_QUICK_FILTERS:`${u}SET_QUICK_FILTERS`,LOADER_START:`${u}LOADER_START`,LOADER_SUCCESS:`${u}LOADER_SUCCESS`,LOADER_FAILURE:`${u}LOADER_FAILURE`,RESYNC:`${u}RESYNC`};class r{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.SET_ACTIVE_BOX}}class d{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.INIT_STATE}}class A{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.REFETCH_TASKS}}class p{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.SET_PROGRAM}}class R{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.SET_PROGRAM_FAILURE}}class E{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.SET_WBS_TO_OVERVIEW}}class f{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.CHANGE_ACTIVE_PROGRAM}}class M{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.FETCH_QUICK_FILTERS}}class i{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.FETCH_QUICK_FILTERS_SUCCESS}}class ${constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.FETCH_QUICK_FILTERS_FAILURE}}class V{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.SET_QUICK_FILTERS}}class j{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.LOADER_START}}class x{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.LOADER_SUCCESS}}class B{constructor(I,g){this.wbsId=I,this.payload=g,this.type=l.RESYNC}}},64993:(P,C,s)=>{s.d(C,{N:()=>u});var u=(()=>{return(l=u||(u={}))[l.INFO=0]="INFO",l[l.ERROR=1]="ERROR",u;var l})()},14061:(P,C,s)=>{s.d(C,{f:()=>A});var u=s(88485),l=s(18840),r=s(70822),d=s(71726),h=s(84046);let A=(()=>{class p{constructor(E){this.wbsFactory=E,this.ready$=new l.X(!1)}create(E){this.wbs=this.wbsFactory.create(E)}getWbs(){return this.wbs}markReady(){this.ready$.next(!0)}observeReadiness(){return this.ready$.asObservable().pipe((0,r.h)(E=>E),(0,d.U)(()=>{}))}}return p.\u0275fac=function(E){return new(E||p)(h.LFG(u.f))},p.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac}),p})()},32498:(P,C,s)=>{s.d(C,{j:()=>u});class u{constructor(r,d,h){this.id=r,this.type=d,this.platformId=h}getId(){return this.id}getType(){return this.type}getPlatformId(){return this.platformId}}},17146:(P,C,s)=>{s.d(C,{X:()=>A});var u=s(96105),l=s(71726),r=s(63833),d=s(7304),h=s(84046);let A=(()=>{class p{constructor(E){this.searchRepository=E}selectSearch(){return this.searchRepository.selectSearch().pipe((0,u.x)((E,f)=>E===f),(0,l.U)(E=>({isFullText:!E.isJQLSearch,query:E.query})))}getSearch(){return this.selectSearch().pipe((0,r.q)(1))}}return p.\u0275fac=function(E){return new(E||p)(h.LFG(d.a))},p.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac}),p})()},59025:(P,C,s)=>{s.d(C,{O:()=>U});var u=s(55331),l=s(25468),r=s(36185),d=s(73877);class h extends d.Z{constructor(){super(...arguments),this.query=""}}var A=s(47546);const p=new h;function R(M=p,i){switch(i.type){case A.MF.SEARCH:return function(M,i){return Object.assign(new h,M,{isJQLSearch:i.payload.isJQLSearch,query:i.payload.query})}(M,i);default:return M}}var f=s(7304),_=s(17146),O=s(84046);let U=(()=>{class M{}return M.\u0275fac=function($){return new($||M)},M.\u0275mod=O.oAB({type:M}),M.\u0275inj=O.cJS({providers:[r.A,f.a,_.X],imports:[[u.ez,l.Aw.forFeature(f._,R)]]}),M})()},47546:(P,C,s)=>{s.d(C,{MF:()=>l,DG:()=>r});const u="[SEARCH]",l={SEARCH:`${u}FETCH_SEARCH`,SEARCH_SUCCESS:`${u}SEARCH_SUCCESS`,SEARCH_FAILURE:`${u}SEARCH_FAILURE`};class r{constructor(p){this.payload=p,this.type=l.SEARCH}}},36185:(P,C,s)=>{s.d(C,{A:()=>d});var u=s(47546),l=s(84046),r=s(25468);let d=(()=>{class h{constructor(p){this.store=p}search(p){this.store.dispatch(new u.DG(p))}}return h.\u0275fac=function(p){return new(p||h)(l.LFG(r.yh))},h.\u0275prov=l.Yz7({token:h,factory:h.\u0275fac}),h})()},7304:(P,C,s)=>{s.d(C,{_:()=>r,a:()=>d});var u=s(25468),l=s(84046);const r="SEARCH_STORE";let d=(()=>{class p{constructor(E){this.store=E}selectSearch(){return this.store.select(A)}}return p.\u0275fac=function(E){return new(E||p)(l.LFG(u.yh))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac}),p})();const h=(0,u.ZF)(r),A=(0,u.P1)(h,p=>p)},75904:(P,C,s)=>{s.d(C,{Q:()=>r});var u=s(83941),l=s(46902);class r{constructor(h){this.messageService=h}showSuccessMessage(h,A="Success"){const p=(new l.P).withTitle(A).withBody(u.H.string(h));this.messageService.success(p)}}}}]);