"use strict";(self.webpackChunkppm=self.webpackChunkppm||[]).push([[9193],{99193:(K,x,r)=>{r.r(x),r.d(x,{BigPictureSkillWidgetModule:()=>Zs});var p=r(55331),f=r(92945),d=r(43786),g=r(25468),m=r(41001),v=r(85873),J=r(26799),je=r(77062),Ve=r(67456),Ye=r(58296),z=r(40946),ue=r(89733),Ze=r(8164),Ge=r(28693),$e=r(64362),Qe=r(72254),u=r(90578);class Ke extends u.m{constructor(s){super("AddTaskRecommendationAssigneeCommand"),this.resourceName=s}}class Je extends u.m{constructor(){super("AddTaskRecommendationAssigneeSuccessCommand")}}class ze extends u.m{constructor(s){super("AddTaskRecommendationAssigneeFailureCommand"),this.error=s}}var b=r(50906),h=r(71726),O=r(56385),t=r(84046);class T{}var Xe=r(28909);class S extends Xe.U{}let fe=(()=>{class i{constructor(e,n){this.taskSkillResource=e,this.skillWidgetDispatcher=n}execute(e){return this.taskSkillResource.assigneeRecommendedUser$(e).pipe((0,h.U)(()=>(this.skillWidgetDispatcher.dispatch(new Je),null)),(0,O.K)(n=>(this.skillWidgetDispatcher.dispatch(new ze(n)),(0,b.c)())))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T),t.LFG(S))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var ge=r(12861),qe=r(76094);class _e extends u.m{constructor(s){super("AddTaskSkillCommand"),this.skillId=s}}class et extends qe.F{constructor(s,e){super("AddTaskSkillSuccessCommand",e?e.getId():null),this.taskSkillsAggregate=s}}class tt extends ge.h{constructor(s,e){super("AddTaskSkillFailureCommand",e?e.getId():null),this.error=s}}var y=r(45635);let ke=(()=>{class i{constructor(e,n){this.taskSkillResource=e,this.skillWidgetDispatcher=n}execute(e){this.taskSkillResource.addTaskSkill$(e).pipe((0,y.b)(n=>{this.skillWidgetDispatcher.dispatch(new et(n,e))}),(0,O.K)(n=>(this.skillWidgetDispatcher.dispatch(new tt(n,e)),(0,b.c)()))).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T),t.LFG(S))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class st extends u.m{constructor(s){super("DeleteTaskSkillCommand"),this.skillId=s}}class it extends u.m{constructor(s){super("DeleteTaskSkillSuccessCommand"),this.taskSkillsAggregate=s}}class nt extends ge.h{constructor(s,e){super("DeleteTaskSkillFailureCommand",e?e.getId():null),this.error=s}}let Se=(()=>{class i{constructor(e,n){this.taskSkillResource=e,this.skillWidgetDispatcher=n}execute(e){return this.taskSkillResource.deleteTaskSkill$(e).pipe((0,h.U)(n=>(this.skillWidgetDispatcher.dispatch(new it(n)),null)),(0,O.K)(n=>(this.skillWidgetDispatcher.dispatch(new nt(n,e)),(0,b.c)())))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T),t.LFG(S))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class ot extends u.m{constructor(s){super("FetchAssigneeRecommendationCommand"),this.boxId=s}}class lt extends u.m{constructor(s){super("FetchAssigneeRecommendationSuccessCommand"),this.recommendations=s}}class rt extends u.m{constructor(s){super("FetchAssigneeRecommendationFailureCommand"),this.error=s}}let ve=(()=>{class i{constructor(e,n){this.taskSkillResource=e,this.skillWidgetDispatcher=n}execute$(e){return this.taskSkillResource.fetchAssigneeRecommendation$(e).pipe((0,h.U)(n=>(this.skillWidgetDispatcher.dispatch(new lt(n)),null)),(0,O.K)(n=>(this.skillWidgetDispatcher.dispatch(new rt(n)),b.E)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T),t.LFG(S))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var at=r(58910);class ct extends u.m{constructor(){super("FetchBoxHierarchyForTaskCommand")}}class dt extends u.m{constructor(s){super("FetchBoxHierarchyForTaskSuccessCommand"),this.box=s}}class pt extends u.m{constructor(s){super("FetchBoxHierarchyForTaskFailureCommand"),this.error=s}}var Te=r(95336),xe=r(32498),Re=r(2196),M=r(25673),X=r(83950),ye=r(21548);let Ce=(()=>{class i{constructor(e,n,l,o,a,c){this.taskSkillResource=e,this.skillWidgetDispatcher=n,this.boxAggregateCommandService=l,this.boxHierarchyService=o,this.environmentService=a,this.issueIdProvider=c}execute(){const e=new at.P,n=this.issueIdProvider.get(),l=this.environmentService.getMainExtPlatformId(),o=new xe.j(n,Te.U.REGULAR_ISSUE,l);return e.setExtTaskId(o),this.boxAggregateCommandService.setRequestSpecification(e),this.boxAggregateCommandService.load(),this.boxHierarchyService.selectRootBox().pipe((0,h.U)(a=>(a.ifPresent(c=>this.skillWidgetDispatcher.dispatch(new dt(c))),null)),(0,O.K)(a=>(this.skillWidgetDispatcher.dispatch(new pt(a)),b.E)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T),t.LFG(S),t.LFG(Re.N),t.LFG(M.T),t.LFG(X.L),t.LFG(ye.w))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class mt extends u.m{constructor(){super("FetchSimpleViewCommand")}}class ht extends u.m{constructor(s,e){super("FetchSimpleViewSuccessCommand"),this.taskSkills=s,this.availableSkills=e}}class ut extends u.m{constructor(s){super("FetchSimpleViewFailureCommand")}}var ft=r(55757);let Ae=(()=>{class i{constructor(e,n,l){this.taskSkillResource=e,this.skillWidgetDispatcher=n,this.skillResource=l}execute(){return(0,ft.D)(this.taskSkillResource.fetchTaskSkills$(),this.skillResource.getAll$()).pipe((0,h.U)(e=>(this.skillWidgetDispatcher.dispatch(new ht(e[0],e[1])),null)),(0,O.K)(e=>(this.skillWidgetDispatcher.dispatch(new ut(e)),(0,b.c)())))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T),t.LFG(S),t.LFG(ue.O))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var W=r(17542),B=r(50870),Ie=r(60903),q=function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);return l>3&&o&&Object.defineProperty(s,e,o),o},_=function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,s)};class P extends W.M{getClassName(){return"FetchAssigneeRecommendationDTO"}}q([(0,B.XV)(),_("design:type",String)],P.prototype,"resourceId",void 0),q([(0,B.XV)(),_("design:type",String)],P.prototype,"resourceName",void 0),q([(0,Ie.qA)(),_("design:type",Number)],P.prototype,"matchLevel",void 0);var we=r(77816),ee=r(40813),te=r(85847);class De extends W.M{getClassName(){return"FetchAssigneeRecommendationsDTO"}}!function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,te.D)(()=>P),(0,we.Yl)(),(0,ee.j)({each:!0}),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Array)}()],De.prototype,"assigneeRecommendations",void 0);class se extends W.M{getClassName(){return"TaskSkillsConfigDTO"}}!function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,Ie.qA)(),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Number)}()],se.prototype,"maxSkillCount",void 0);var Fe=function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);return l>3&&o&&Object.defineProperty(s,e,o),o},Le=function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,s)};class U extends W.M{getClassName(){return"TaskSkillDTO"}}Fe([(0,B.XV)(),Le("design:type",String)],U.prototype,"startDate",void 0),Fe([(0,B.XV)(),Le("design:type",String)],U.prototype,"endDate",void 0);var ie=function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);return l>3&&o&&Object.defineProperty(s,e,o),o},ne=function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,s)};class E extends W.M{getClassName(){return"FetchTaskSkillsDTO"}}ie([(0,we.Yl)(),ne("design:type",Array)],E.prototype,"skills",void 0),ie([(0,te.D)(()=>se),(0,ee.j)(),ne("design:type",se)],E.prototype,"skillsConfig",void 0),ie([(0,te.D)(()=>U),(0,ee.j)(),ne("design:type",U)],E.prototype,"task",void 0);var N=r(2421),Tt=r(83155),xt=r(11531);let oe=(()=>{class i extends Tt.a{constructor(e,n){super(e),this.environmentService=n}fetchTaskSkills$(e){return this.get("ppm/task/required-skills",Object.assign({},e)).pipe((0,N.W)(E))}fetchAssigneeRecommendation$(e,n){return this.post(`ppm/resource-suggestion/box/${e}/extPlatformTaskKey/recommend`,n).pipe((0,N.W)(De))}addTaskSkill$(e,n){return this.put(`ppm/task/required-skills/${e}`,n).pipe((0,N.W)(E))}deleteTaskSkill$(e,n){const l=this.convertRequestDTOToQueryParams(n);return this.delete(`ppm/task/required-skills/${e}?${l}`).pipe((0,N.W)(E))}getRestUrl(e){return`${this.environmentService.getRestBaseUrl()}${e}`}convertRequestDTOToQueryParams(e){return Object.keys(e).reduce((n,l)=>`${l}=${e[l]}&${n}`,"")}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(xt.O),t.LFG(X.L))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var Rt=r(50362),yt=r(74027);class j{constructor(s,e,n,l,o){this.id=s,this.name=e,this.code=n,this.color=l,this.iconUrl=o}static fromRaw(s){return new j(s.id,s.name,s.code,s.color,s.iconUrl)}static fromRawArray(s){return s.map(e=>j.fromRaw(e))}}class H{constructor(s,e,n,l){this.skills=s,this.taskStartDate=e,this.taskEndDate=n,this.maxSkillCount=l}static fromRaw(s){return new H(j.fromRawArray(s.skills),s.task.startDate,s.task.endDate,s.skillsConfig.maxSkillCount)}}class Ct{constructor(s,e,n){this.extTaskId=s,this.extTaskType=e,this.extPlatformId=n}}class At{constructor(s,e,n){this.extTaskId=s,this.extTaskType=e,this.extPlatformId=n}}class It{constructor(s,e,n,l,o){this.extTaskId=s,this.extTaskType=e,this.extPlatformId=n,this.resourceType=l,this.effortMode=o}}class wt{constructor(s,e,n){this.extTaskId=s,this.extTaskType=e,this.extPlatformId=n}}var be=r(70445);let Dt=(()=>{class i extends T{constructor(e,n){super(),this.httpResource=e,this.assigneeRecommendationResource=n}init(e){this.extTaskId=e}fetchTaskSkills$(){const e=new wt(this.extTaskId.getId(),this.extTaskId.getType(),this.extTaskId.getPlatformId());return this.httpResource.fetchTaskSkills$(e).pipe((0,h.U)(n=>H.fromRaw(n)))}fetchAssigneeRecommendation$(e){const n=new It(this.extTaskId.getId(),this.extTaskId.getType(),this.extTaskId.getPlatformId(),"INDIVIDUAL","ORIGINAL_EFFORT_ESTIMATE");return this.httpResource.fetchAssigneeRecommendation$(e.boxId,n).pipe((0,h.U)(l=>Rt.v.fromRawArray(l.assigneeRecommendations,yt._.Individual)))}addTaskSkill$(e){const n=String(e.skillId),l=new Ct(this.extTaskId.getId(),this.extTaskId.getType(),this.extTaskId.getPlatformId());return this.httpResource.addTaskSkill$(n,l).pipe((0,h.U)(o=>H.fromRaw(o)))}deleteTaskSkill$(e){const n=String(e.skillId),l=new At(this.extTaskId.getId(),this.extTaskId.getType(),this.extTaskId.getPlatformId());return this.httpResource.deleteTaskSkill$(n,l).pipe((0,h.U)(o=>H.fromRaw(o)))}assigneeRecommendedUser$(e){return this.assigneeRecommendationResource.assign(e,`/rest/api/2/issue/${this.extTaskId.getId()}/assignee`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(oe),t.LFG(be.Y))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class C{constructor(s,e){this.actions$=s,this.addAssigneeRecommendationHandler=e,this.addAssigneeRecommendationHandlerCommand$=this.actions$.pipe((0,d.l4)("AddTaskRecommendationAssigneeCommand"),(0,y.b)(n=>{this.addAssigneeRecommendationHandler.execute(n.payload).subscribe()}))}}C.\u0275fac=function(s){return new(s||C)(t.LFG(d.eX),t.LFG(fe))},C.\u0275prov=t.Yz7({token:C,factory:C.\u0275fac}),function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,d.Qm)({dispatch:!1}),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],C.prototype,"addAssigneeRecommendationHandlerCommand$",void 0);class A{constructor(s,e){this.actions$=s,this.addTaskSkillHandler=e,this.addTaskSkill$=this.actions$.pipe((0,d.l4)("AddTaskSkillCommand"),(0,y.b)(n=>{this.addTaskSkillHandler.execute(n.payload)}))}}A.\u0275fac=function(s){return new(s||A)(t.LFG(d.eX),t.LFG(ke))},A.\u0275prov=t.Yz7({token:A,factory:A.\u0275fac}),function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,d.Qm)({dispatch:!1}),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],A.prototype,"addTaskSkill$",void 0);class I{constructor(s,e){this.actions$=s,this.deleteTaskSkillHandler=e,this.deleteTaskSkill$=this.actions$.pipe((0,d.l4)("DeleteTaskSkillCommand"),(0,y.b)(n=>{this.deleteTaskSkillHandler.execute(n.payload).subscribe()}))}}I.\u0275fac=function(s){return new(s||I)(t.LFG(d.eX),t.LFG(Se))},I.\u0275prov=t.Yz7({token:I,factory:I.\u0275fac}),function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,d.Qm)({dispatch:!1}),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],I.prototype,"deleteTaskSkill$",void 0);class w{constructor(s,e){this.actions$=s,this.fetchAssigneeRecommendationHandler=e,this.fetchAssigneeRecommendationCommand$=this.actions$.pipe((0,d.l4)("FetchAssigneeRecommendationCommand"),(0,y.b)(n=>{this.fetchAssigneeRecommendationHandler.execute$(n.payload).subscribe()}))}}w.\u0275fac=function(s){return new(s||w)(t.LFG(d.eX),t.LFG(ve))},w.\u0275prov=t.Yz7({token:w,factory:w.\u0275fac}),function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,d.Qm)({dispatch:!1}),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],w.prototype,"fetchAssigneeRecommendationCommand$",void 0);class D{constructor(s,e){this.actions$=s,this.fetchProgramsForTaskHandler=e,this.fetchProgramsForTaskCommand$=this.actions$.pipe((0,d.l4)("FetchBoxHierarchyForTaskCommand"),(0,y.b)(()=>{this.fetchProgramsForTaskHandler.execute().subscribe()}))}}D.\u0275fac=function(s){return new(s||D)(t.LFG(d.eX),t.LFG(Ce))},D.\u0275prov=t.Yz7({token:D,factory:D.\u0275fac}),function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,d.Qm)({dispatch:!1}),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],D.prototype,"fetchProgramsForTaskCommand$",void 0);class F{constructor(s,e){this.actions$=s,this.fetchSimpleViewHandler=e,this.fetchTaskSkills$=this.actions$.pipe((0,d.l4)("FetchSimpleViewCommand"),(0,y.b)(()=>{this.fetchSimpleViewHandler.execute().subscribe()}))}}F.\u0275fac=function(s){return new(s||F)(t.LFG(d.eX),t.LFG(Ae))},F.\u0275prov=t.Yz7({token:F,factory:F.\u0275fac}),function(i,s,e,n){var a,l=arguments.length,o=l<3?s:null===n?n=Object.getOwnPropertyDescriptor(s,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(i,s,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(l<3?a(o):l>3?a(s,e,o):a(s,e))||o);l>3&&o&&Object.defineProperty(s,e,o)}([(0,d.Qm)({dispatch:!1}),function(i,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",Object)}()],F.prototype,"fetchTaskSkills$",void 0);var jt=r(70162),Oe=r(3953),Vt=r(73877);class R extends Vt.Z{}class V{constructor(s,e,n,l,o){this.id=s,this.name=e,this.code=n,this.color=l,this.iconUrl=o}static fromAggregate(s){return new V(s.id,s.name,s.code,s.color,s.iconUrl)}static fromAggregates(s){return s.map(e=>V.fromAggregate(e))}}class Y{constructor(s,e,n,l){this.skills=s,this.taskStartDate=e,this.taskEndDate=n,this.maxSkillCount=l}static fromAggregate(s){return new Y(V.fromAggregates(s.skills),s.taskStartDate,s.taskEndDate,s.maxSkillCount)}}var Ee=r(71118);const Yt=new R;function Zt(i=Yt,s){const e=jt.cloneDeep(i);switch(s.type){case"FetchSimpleViewCommand":return Object.assign(new R,e,{fetching:!0});case"FetchBoxHierarchyForTaskSuccessCommand":const n=new R;return n.fetching=!1,n.fetched=!0,Object.assign({},e,n);case"FetchSimpleViewSuccessCommand":const l=new R;return l.taskSkills=Y.fromAggregate(s.payload.taskSkills),l.availableSkills=Oe.U.fromRawArray(Ee.l.deepClone(s.payload.availableSkills)),l.fetching=!1,l.fetched=!0,Object.assign({},e,l);case"FetchAssigneeRecommendationSuccessCommand":const o=new R;return o.recommendations=s.payload.recommendations,o.fetching=!1,o.fetched=!0,Object.assign({},e,o);case"AddTaskRecommendationAssigneeSuccessCommand":const a=new R;return a.fetching=!1,a.fetched=!0,a.recommendedUserUpdated=!0,Object.assign({},e,a);case"AddTaskSkillSuccessCommand":case"DeleteTaskSkillSuccessCommand":const c=new R;return c.taskSkills=Y.fromAggregate(s.payload.taskSkillsAggregate),Object.assign({},e,c);case"AddTaskSkillFailureCommand":case"DeleteTaskSkillFailureCommand":return Object.assign(new R,e);default:return i}}var Gt=r(61754);let $t=(()=>{class i extends S{constructor(e){super(),this.store=e}dispatch(e){this.store.dispatch(new Gt.S(e.getType(),e))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(g.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class Z{}class G{constructor(s,e,n,l,o){this.id=s,this.name=e,this.code=n,this.color=l,this.iconUrl=o}static fromRaw(s){return new G(s.id,s.name,s.code,s.color,s.iconUrl)}static fromRawArray(s){return s.map(e=>G.fromRaw(e))}}const L="skillWidget";var k=r(70822);let Qt=(()=>{class i extends Z{constructor(e){super(),this.store=e}selectRequiredSkills(){return this.store.pipe((0,g.Ys)(e=>e[L].simpleView),(0,k.h)(e=>!e.fetching),(0,k.h)(e=>e.taskSkills),(0,h.U)(e=>G.fromRawArray(e.taskSkills.skills)))}selectAvailableSkills(){return this.store.pipe((0,g.Ys)(e=>e[L].simpleView),(0,k.h)(e=>!e.fetching),(0,k.h)(e=>e.taskSkills),(0,h.U)(e=>{const n=this.sieveNotSelectedSkills(e);return n.sort(Ee.l.sortByProperty.bind(this,"name")),Oe.U.fromRawArray(n)}))}selectMaxSkillCount(){return this.store.pipe((0,g.Ys)(e=>e[L].simpleView),(0,k.h)(e=>!e.fetching),(0,k.h)(e=>e.taskSkills),(0,h.U)(e=>e.taskSkills.maxSkillCount))}selectTaskData(){return this.store.pipe((0,g.Ys)(e=>e[L].simpleView),(0,k.h)(e=>!e.fetching),(0,k.h)(e=>e.taskSkills),(0,h.U)(e=>e.taskSkills))}selectAssigneeRecommendation(){return this.store.pipe((0,g.Ys)(e=>e[L].simpleView),(0,k.h)(e=>!e.fetching),(0,k.h)(e=>e.recommendations),(0,h.U)(e=>e.recommendations))}selectAssigneeRecommendationSucces(){return this.store.pipe((0,g.Ys)(e=>e[L].simpleView),(0,k.h)(e=>!e.fetching),(0,k.h)(e=>e.recommendedUserUpdated),(0,h.U)(e=>e.recommendedUserUpdated))}sieveNotSelectedSkills(e){const n=[...e.availableSkills],l=e.taskSkills.skills;for(const o of l){const a=n.findIndex(c=>c.id===o.id);-1!==a&&n.splice(a,1)}return n}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(g.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var Kt=r(63187),Jt=r(50292),$=r(62546),zt=r(81622);let We=(()=>{class i extends $.H{constructor(e,n,l,o){super(e,n),this.changeDetectorRef=l,this.boxHierarchyService=o,this.boxChange=new t.vpe,this.SELECT_BOX_ID="sw-box-switcher",this.firstChanged=!0}ngOnChanges(e){e.parentWidth&&this.setBoxSwitcherConfig()}ngOnInit(){this.contextBoxId=this.boxHierarchyService.getContextBoxId()}onBoxChange(e){if(this.firstChanged)return void(this.firstChanged=!1);const n=this.boxHierarchyService.getBoxById(e);this.boxChange.emit(n)}setBoxSwitcherConfig(){this.selectBoxConfig=(new Kt.L.Builder).withShowDropdownOpenIndicator(!1).withDropdownLayout(Jt.A.MEDIUM).withShowFavouriteColumn(!1).withDropdownTriggerCssClass("sp-text-base").withDropdownMinWidth(this.parentWidth).withDestroyDropdownAfterSelect(!0).build()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(M.T))},i.\u0275cmp=t.Xpm({type:i,selectors:[["sp-skill-widget-box-select"]],inputs:{parentWidth:"parentWidth"},outputs:{boxChange:"boxChange"},features:[t.qOj,t.TTD],decls:1,vars:3,consts:[[3,"selectId","selectedBoxId","config","selectedBoxIdChange"]],template:function(e,n){1&e&&(t.TgZ(0,"sp-select-box",0),t.NdJ("selectedBoxIdChange",function(o){return n.onBoxChange(o)}),t.qZA()),2&e&&t.Q6J("selectId",n.SELECT_BOX_ID)("selectedBoxId",n.contextBoxId)("config",n.selectBoxConfig)},directives:[zt.N],encapsulation:2,changeDetection:0}),i})();var Xt=r(4662),qt=r(52591),He=r(17314),_t=r(67890),es=r(46363),ts=r(9719),ss=r(12944),Me=r(19327);let Be=(()=>{class i extends $.H{constructor(e,n){super(e,n)}getHostClasses(){return["sp-skill-widget-element-markup","sp-flex","sp-items-center"]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj))},i.\u0275cmp=t.Xpm({type:i,selectors:[["sp-skill-widget-element-markup"]],inputs:{skillColor:"skillColor",skill:"skill"},features:[t.qOj],decls:5,vars:6,consts:[[1,"sp-skill-item-color"],[1,"sp-skill-item-color__icon"],[1,"skill-item-text","sp-ml-1"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.qZA(),t.qZA(),t.TgZ(3,"span",2),t._uU(4),t.qZA()),2&e&&(t.Udp("background-color",n.skillColor.backgroundStyle),t.xp6(1),t.Udp("color",n.skillColor.colorStyle),t.xp6(1),t.hij(" ",n.skill.name[0]," "),t.xp6(2),t.Oqu(n.skill.name))},encapsulation:2,changeDetection:0}),i})();var ns=r(63833),os=r(98274),ls=r(83941),Pe=r(14650),rs=r(83372),Q=(()=>((Q||(Q={})).SKILL_WIDGET_OUTER_CLICK="Clicked outside Skill Widget",Q))(),as=r(22521),cs=r(9933),ds=r(73455),ps=r(26463),ms=r(97265),hs=r(41037),us=r(68178),fs=r(65799);const gs=["editSkillsIcon"];function ks(i,s){if(1&i&&(t.TgZ(0,"div",3),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"spL10nText"),t.TgZ(4,"a",4),t._uU(5),t.ALo(6,"spL10nText"),t.qZA(),t._uU(7),t.ALo(8,"spL10nText"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,4,"SPT_SKILL_WIDGET_NOTHING_TO_DISPLAY_MESSAGE")," "),t.xp6(2),t.Q6J("spNavigationLink",e.goToAdministrationSkills()),t.xp6(1),t.Oqu(t.lcZ(6,6,"SPT_SKILL_WIDGET_GO_TO_ADMINISTRATION_LINK_TITLE")),t.xp6(2),t.hij(" ",t.lcZ(8,8,"SPT_SKILL_WIDGET_TO_ADD_NEW_SKILLS")," ")}}function Ss(i,s){if(1&i&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.errorMessage)}}function vs(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"a",15),t.TgZ(2,"button",16),t._UZ(3,"i",17),t.qZA(),t.qZA(),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("spNavigationLink",e.goToSkillWidgetConfiguration())}}function Ts(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"sp-assignee-recommend-button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).findMatch()}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"spL10nText"),t.qZA(),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"spL10nText"),t.qZA(),t.BQk()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("buttonType",e.recommendButtonType.MATCH),t.xp6(2),t.Oqu(t.lcZ(4,3,"SPT_SKILL_WIDGET_FIND_PERFECT_MATCH_BTN")),t.xp6(3),t.Oqu(t.lcZ(7,5,"SPT_SKILL_WIDGET_FIND_PERFECT_MATCH_DESCRIPTION"))}}function xs(i,s){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",19),t.TgZ(2,"p"),t._uU(3),t.ALo(4,"spL10nText"),t.qZA(),t.TgZ(5,"sp-assignee-recommend-button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).findMatch()}),t.qZA(),t.qZA(),t.TgZ(6,"div",20),t.TgZ(7,"sp-assignee-recommend-list",21),t.NdJ("resourceSelect",function(l){return t.CHM(e),t.oxw(3).resourceSelected(l)}),t.qZA(),t.qZA(),t.TgZ(8,"label"),t._uU(9),t.ALo(10,"spL10nText"),t.qZA(),t.TgZ(11,"sp-skill-widget-box-select",22),t.NdJ("boxChange",function(l){return t.CHM(e),t.oxw(3).boxChanged(l)}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw(3);t.xp6(3),t.Oqu(t.lcZ(4,6,"SPT_SKILL_WIDGET_RECOMMENDED_INDIVIDUALS")),t.xp6(2),t.Q6J("buttonType",e.recommendButtonType.REFRESH),t.xp6(2),t.Q6J("assigneeRecommendations",e.individualAssigneeRecommendLists)("listView",!0),t.xp6(2),t.Oqu(t.lcZ(10,8,"SPT_SKILL_WIDGET_RECOMMENDED_INDIVIDUALS_DESCRIPTION")),t.xp6(2),t.Q6J("parentWidth",e.nativeElemWidth)}}function Rs(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"div",7),t.YNc(3,Ss,2,1,"div",8),t.TgZ(4,"label"),t._uU(5),t.ALo(6,"spL10nText"),t.qZA(),t.TgZ(7,"sp-select",9),t.NdJ("selectedOptionChanged",function(l){return t.CHM(e),t.oxw(2).addTaskSkill(l)})("removeOptionValue",function(l){return t.CHM(e),t.oxw(2).removeTaskSkill(l)}),t.qZA(),t.TgZ(8,"div",10,11),t._UZ(10,"i",12),t.qZA(),t.qZA(),t.YNc(11,vs,4,1,"ng-container",0),t.qZA(),t.TgZ(12,"div",13),t.YNc(13,Ts,8,7,"ng-container",0),t.YNc(14,xs,12,10,"ng-container",0),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.errorMessage&&e.skillSelectionInProgress),t.xp6(2),t.Oqu(t.lcZ(6,12,"SPT_SKILL_WIDGET_REQUIRED_SKILLS")),t.xp6(2),t.ekj("skills-selection-active",e.skillSelectionInProgress&&!e.showEditIcon),t.Q6J("configuration",e.selectConfiguration)("options",e.skillsOptions)("selectedOptions",e.selectedSkillsOptions),t.xp6(1),t.ekj("skills-selection-active",e.skillSelectionInProgress&&e.showEditIcon),t.xp6(3),t.Q6J("ngIf",e.isAdmin),t.xp6(2),t.Q6J("ngIf",e.requiredSkills.length&&!e.individualAssigneeRecommendLists),t.xp6(1),t.Q6J("ngIf",e.requiredSkills.length&&e.individualAssigneeRecommendLists)}}function ys(i,s){if(1&i&&(t.ynx(0),t.YNc(1,ks,9,10,"div",1),t.YNc(2,Rs,15,14,"div",2),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.administrationSkillsEmpty()),t.xp6(1),t.Q6J("ngIf",!e.administrationSkillsEmpty())}}let le=(()=>{class i extends $.H{constructor(e,n,l,o,a,c,re,ae,ce,de,pe,me,he){super(he,me),this.document=e,this.window=n,this.changeDetectorRef=l,this.boxPermissionService=o,this.navigationLinkService=a,this.skillWidgetDispatcher=c,this.taskSkillsRepository=re,this.commandRepository=ae,this.localStorage=ce,this.boxHierarchyService=de,this.assigneeRecommendationResource=pe,this.simpleViewLoaded=new t.vpe,this.skillWidgetReady=!1,this.skillsOptions=[],this.selectedSkillsOptions=[],this.skillSelectionInProgress=!1,this.errorMessage="",this.isMatching=!1,this.recommendButtonType=ts.A,this.requiredSkills=[],this.removeListeners=[],this.setTimeouts=[],this.availableSkills=[]}ngOnInit(){this.initView(),this.initSkillsSelectConfiguration(),this.observeWindowResize(),this.observePostMessages(),this.observeTaskData(),this.observeAssigneeRecommendation(),this.observeAssigneeRecommendationSuccess(),this.observeRootChildBoxes(),this.setAdminState()}ngAfterViewInit(){this.setNativeElemWidth()}finalize(){this.setTimeouts.forEach(e=>clearTimeout(e)),this.removeListeners.forEach(e=>e())}addTaskSkill(e){const n=new _e(e.value);this.skillWidgetDispatcher.dispatch(n)}removeTaskSkill(e){const n=new st(e.value);this.skillWidgetDispatcher.dispatch(n)}goToAdministrationSkills(){return this.navigationLinkService.goToAdministrationSkills()}findMatch(){this.individualAssigneeRecommendLists=void 0,this.isMatching=!0,this.changeDetectorRef.detectChanges();const e=this.selectedBox.getId().toString();this.skillWidgetDispatcher.dispatch(new ot(e))}resourceSelected(e){this.skillWidgetDispatcher.dispatch(new Ke(this.getJiraUserName(e.resourceId)))}administrationSkillsEmpty(){return!this.skillsOptions.length&&!this.selectedSkillsOptions.length}boxChanged(e){this.selectedBox=e}goToSkillWidgetConfiguration(){const e=this.navigationLinkService.goToSkillWidgetConfiguration(this.selectedBox.getId().toString());return e.href?e.href:e}getHostClasses(){return["sp-skill-widget-simple-view","sp-block","sp-h-full"]}setAdminState(){this.isAdmin=this.boxPermissionService.isAdmin()}observeRootChildBoxes(){this.boxHierarchyService.selectRootChildBoxes().pipe((0,ns.q)(1),this.takeUntilDestroy()).subscribe(e=>{this.selectedBox=e.shift(),this.changeDetectorRef.detectChanges()})}observeAssigneeRecommendationSuccess(){this.taskSkillsRepository.selectAssigneeRecommendationSucces().pipe(this.takeUntilDestroy()).subscribe(()=>{this.assigneeRecommendationResource.refreshTask(this.document)})}observeAssigneeRecommendation(){this.taskSkillsRepository.selectAssigneeRecommendation().pipe(this.takeUntilDestroy()).subscribe(e=>{this.individualAssigneeRecommendLists=[...e],this.isMatching=!1,this.changeDetectorRef.detectChanges()})}observeTaskData(){this.taskSkillsRepository.selectTaskData().pipe(this.takeUntilDestroy()).subscribe(e=>{this.task=e})}initView(){this.skillWidgetDispatcher.dispatch(new mt),this.taskSkillsRepository.selectRequiredSkills().pipe((0,os.w)(e=>(this.requiredSkills=e,this.taskSkillsRepository.selectAvailableSkills())),this.takeUntilDestroy()).subscribe(e=>{this.availableSkills=e,this.createSelectOptions(),this.skillWidgetReady=!0,this.changeDetectorRef.detectChanges(),this.setTimeouts.push(setTimeout(()=>{this.simpleViewLoaded.next(),this.appendEditSkillsIcon()},0))}),this.taskSkillsRepository.selectMaxSkillCount().pipe(this.takeUntilDestroy()).subscribe(e=>{this.maxSkillCount=e}),this.commandRepository.waitForCommandByType("AddTaskSkillFailureCommand").pipe(this.takeUntilDestroy()).subscribe(e=>{this.setErrorMessage(e.error)}),this.commandRepository.waitForCommandByType("AddTaskSkillSuccessCommand").pipe(this.takeUntilDestroy()).subscribe(()=>{this.errorMessage=""}),this.commandRepository.waitForCommandByType("DeleteTaskSkillSuccessCommand").pipe(this.takeUntilDestroy()).subscribe(()=>{this.errorMessage=""}),this.simpleViewLoaded.pipe(this.takeUntilDestroy()).subscribe(()=>{this.addEventListeners()})}initSkillsSelectConfiguration(){this.selectConfiguration=(new rs.w).withMultiPicker().withTextAreaMaxHeight(500).withOptionHeight(i.SELECT_OPTION_HEIGHT).withNumberOfMenuVisibleOptions(i.VISIBLE_SELECT_MENU_OPTIONS).withTextAreaWidthInPercentage(100).withSelectInputPlaceholder("SPT_SKILL_WIDGET_SKILL_SELECT_PLACEHOLDER")}observeWindowResize(){this.domManipulator.listen(this.window,"resize").pipe(this.takeUntilDestroy()).subscribe(()=>this.setNativeElemWidth())}setNativeElemWidth(){const e=this.domManipulator.getNativeElement();this.nativeElemWidth=e.clientWidth-20,this.changeDetectorRef.detectChanges()}observePostMessages(){this.domManipulator.listen(this.window,"message").pipe(this.takeUntilDestroy()).subscribe(e=>{e.data===Q.SKILL_WIDGET_OUTER_CLICK&&this.document.querySelector("body").click()})}createSelectOptions(){this.selectedSkillsOptions=this.requiredSkills.map(e=>{const n=this.getSkillElementMarkup(e);return new Pe.W(e.id,n,n,!0)}),this.skillsOptions=this.availableSkills.map(e=>{const n=this.getSkillElementMarkup(e);return new Pe.W(e.id,n,n,!1).withSearchByValue(e.name)})}appendEditSkillsIcon(){const e=this.document.querySelector(".sp-select-button");!e||!this.editSkillsIconRef||(e.appendChild(this.editSkillsIconRef.nativeElement),this.renderer.setStyle(e,"position","relative"))}setErrorMessage(e){if(400===e.status){const l=e.error.errorMessages[0];this.errorMessage=class{static getMessage(s,e){const n={SKILL_MAX_COUNT_EXCEEDED:/Maximum number of Skills is already added to Task/,SKILL_NOT_FOUND:/Skill with id d+ does not exist/,SKILL_ALREADY_IN_USE:/Task has already Skill with id/};return n.SKILL_MAX_COUNT_EXCEEDED.test(s)?this.getSkillMaxCountExceededMessage(e):n.SKILL_NOT_FOUND.test(s)?this.getSkillNotFoundMessage():n.SKILL_ALREADY_IN_USE.test(s)?this.getSkillAlreadyInUseMessage():s}static getSkillMaxCountExceededMessage(s){return`You can add only ${s} skills to the task`}static getSkillNotFoundMessage(){return"This skill doesn't exist anymore. Choose another one"}static getSkillAlreadyInUseMessage(){return"This skill is already assigned to the task"}}.getMessage(l,this.maxSkillCount)}else this.errorMessage="";this.changeDetectorRef.detectChanges()}addEventListeners(){const e=document.querySelector(".sp-select-options-menu"),n=document.querySelector(".sp-select-wrapper"),l=document.querySelector("body");this.removeListeners.push(this.renderer.listen(l,"click",()=>{this.skillSelectionInProgress=!1,this.showEditIcon=!0,this.changeDetectorRef.detectChanges()})),this.removeListeners.push(this.renderer.listen(e,"click",o=>{o.stopPropagation(),this.skillSelectionInProgress=!0,this.showEditIcon=!1,this.changeDetectorRef.detectChanges()})),this.removeListeners.push(this.renderer.listen(n,"click",o=>{o.stopPropagation(),this.skillSelectionInProgress=!0,this.showEditIcon=!1,this.changeDetectorRef.detectChanges()}))}getSkillElementMarkup(e){const n=Me.I.getRequestedColorOrDefault(e.color,Me.B.NAVY);return ls.H.component(Be,{skill:e,skillColor:n})}getJiraUserName(e){return ss.$.fromCompoundId(e).getExternalKey()}}return i.VISIBLE_SELECT_MENU_OPTIONS=3,i.SELECT_OPTION_HEIGHT=28,i.\u0275fac=function(e){return new(e||i)(t.Y36(p.K0),t.Y36(He.m),t.Y36(t.sBO),t.Y36(es.W),t.Y36(ds.M),t.Y36(S),t.Y36(Z),t.Y36(as.F),t.Y36(cs.m),t.Y36(M.T),t.Y36(be.Y),t.Y36(t.Qsj),t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["sp-skill-widget-simple-view"]],viewQuery:function(e,n){if(1&e&&t.Gf(gs,5),2&e){let l;t.iGM(l=t.CRH())&&(n.editSkillsIconRef=l.first)}},outputs:{simpleViewLoaded:"simpleViewLoaded"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["class","empty-skills-container",4,"ngIf"],["class","skills-selector-container sp-mr-2",4,"ngIf"],[1,"empty-skills-container"],["target","_blank",3,"spNavigationLink"],[1,"skills-selector-container","sp-mr-2"],[1,"sp-flex"],[1,"selected-skills-container",2,"flex","1 1 100%"],["class","skill-widget-error-message",4,"ngIf"],["id","skill-widget-simple-view-select",1,"skills-select",3,"configuration","options","selectedOptions","selectedOptionChanged","removeOptionValue"],[1,"edit-skills-icon"],["editSkillsIcon",""],["aria-hidden","true",1,"fa","fa-pencil"],[1,"assignee-recommend-container","sp-mt-2"],[1,"skill-widget-error-message"],["target","_blank","id","sp-wrench-button",1,"sp-ml-1","sp-self-end",3,"spNavigationLink"],[1,"sp-btn","skill-widget-configuration-button"],[1,"fa","fa-wrench"],[3,"buttonType","click"],[1,"sp-flex","sp-items-center"],[1,"sp-mt-2","sp-mb-4"],[3,"assigneeRecommendations","listView","resourceSelect"],[3,"parentWidth","boxChange"]],template:function(e,n){1&e&&t.YNc(0,ys,3,2,"ng-container",0),2&e&&t.Q6J("ngIf",n.skillWidgetReady)},directives:[p.O5,ps.k,ms.Hr,hs.M,us.Y,We],pipes:[fs.L],styles:['.sp-skill-widget-simple-view .empty-skills-container{height:100%;display:flex;justify-content:center;align-items:center;font-style:italic}.sp-skill-widget-simple-view .skills-selector-container{height:100%;overflow:auto}.sp-skill-widget-simple-view .skill-widget-configuration-button:hover{border:1px solid var(--gray-50)}.sp-skill-widget-simple-view .skill-widget-error-message{color:var(--red-400)}.sp-skill-widget-simple-view sp-select:not(.skills-selection-active) .sp-label{border:none;background-color:transparent}.sp-skill-widget-simple-view sp-select:not(.skills-selection-active) .sp-label:after{content:", "}.sp-skill-widget-simple-view sp-select:not(.skills-selection-active) i.delete{display:none!important}.sp-skill-widget-simple-view sp-select:not(.skills-selection-active) sp-label:last-of-type .sp-label:after{content:""}.sp-skill-widget-simple-view sp-select .sp-select-button-wrapper.sp-as-picker-wrapper{max-height:none!important}.sp-skill-widget-simple-view sp-select .sp-select-button-wrapper .sp-select-button.sp-form-control{max-width:none;height:auto;border:1px solid transparent;transition:border .15s ease-in 0s}.sp-skill-widget-simple-view sp-select .sp-select-button-wrapper .sp-select-button.sp-form-control .edit-skills-icon{color:var(--gray-400);display:flex;align-self:normal;justify-content:center;opacity:0;visibility:hidden;transition:opacity .15s ease-in 0s}.sp-skill-widget-simple-view sp-select .sp-select-button-wrapper .sp-select-button.sp-form-control .edit-skills-icon i{font-size:16px;margin-top:5px;padding:0 4px}.sp-skill-widget-simple-view sp-select .sp-select-button-wrapper .sp-select-button.sp-form-control:hover{border:1px solid var(--gray-50)}.sp-skill-widget-simple-view sp-select .sp-select-button-wrapper .sp-select-button.sp-form-control:hover .edit-skills-icon{border-left:1px solid var(--gray-50);background-color:var(--gray-20);opacity:1;visibility:visible}.sp-skill-widget-simple-view sp-select.skills-selection-active .sp-select-button-wrapper .sp-select-button.sp-form-control{border:1px solid var(--gray-50)}.sp-skill-widget-simple-view sp-select.skills-selection-active .sp-select-button-wrapper .sp-select-button.sp-form-control .edit-skills-icon{visibility:hidden}.sp-skill-widget-simple-view .match-button{color:var(--primary);cursor:pointer}.sp-skill-widget-simple-view sp-assignee-recommend-button{display:block}.sp-skill-widget-simple-view sp-skill-widget-box-select{display:block;margin-bottom:8px}\n'],encapsulation:2,changeDetection:0}),i})();var Cs=r(62157),As=r(69001);function Is(i,s){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"sp-circle-loader"),t.qZA())}function ws(i,s){1&i&&(t.TgZ(0,"div",4),t._uU(1," The issue has not been synced to the scope of any Box yet or you need additional permissions to access it.\n"),t.qZA())}function Ds(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"sp-skill-widget-simple-view",5),t.NdJ("simpleViewLoaded",function(){return t.CHM(e),t.oxw().hideCircleLoader()}),t.qZA()}}let Ue=(()=>{class i extends $.H{constructor(e,n,l,o,a,c,re,ae,ce,de,pe,me,he,Gs,$s,Qs){super(n,e),this.changeDetectorRef=l,this.skillWidgetDispatcher=o,this.environmentService=a,this.httpTaskSkillResource=c,this.taskSkillsRepository=re,this.boxAggregateCommandService=ae,this.boxHierarchyService=ce,this.taskSkillResource=de,this.issueIdProvider=pe,this.applicationInitStorage=me,this.applicationAttributesRepository=he,this.window=Gs,this.document=$s,this.clickNotifierService=Qs,this.loaderVisible=!0,this.isReady=!1}ngOnInit(){this.applicationAttributesRepository.setDisableColorThemeStatus(!0),this.applicationAttributesRepository.setDisableAccentUserColorStatus(!0),this.resolveClickNotifierInit(),this.initTaskSkillResource(),this.boxAggregateCommandService.init(),this.setContextBox(),this.fetchProgramsForTask(),this.observeCheckIfTaskExistsInAnyBox(),this.domManipulator.addClass(this.window.document.documentElement,"sp-overflow-hidden")}ngAfterViewInit(){this.setApplicationInitialized()}hideCircleLoader(){this.loaderVisible=!1,this.changeDetectorRef.detectChanges()}getHostClasses(){return["sp-block","sp-h-full"]}setApplicationInitialized(){this.applicationInitStorage.set(!0)}fetchProgramsForTask(){this.skillWidgetDispatcher.dispatch(new ct)}observeCheckIfTaskExistsInAnyBox(){this.boxHierarchyService.selectRootBox().pipe((0,h.U)(e=>e.isPresent()),this.takeUntilDestroy()).subscribe(e=>{this.taskExistsInAnyBox=e,this.isReady=!0,this.taskExistsInAnyBox?this.changeDetectorRef.detectChanges():this.hideCircleLoader()})}setContextBox(){this.boxAggregateCommandService.setContextBox(_t.Au.ROOT_ID)}initTaskSkillResource(){const e=this.issueIdProvider.get(),n=this.environmentService.getMainExtPlatformId(),l=new xe.j(e,Te.U.REGULAR_ISSUE,n);this.taskSkillResource.init(l)}resolveClickNotifierInit(){this.clickNotifierService&&this.clickNotifierService.init()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(S),t.Y36(X.L),t.Y36(oe),t.Y36(Z),t.Y36(Re.N),t.Y36(M.T),t.Y36(T),t.Y36(ye.w),t.Y36(qt.x),t.Y36(Xt.t),t.Y36(He.m),t.Y36(p.K0),t.Y36(Cs._,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["sp-skill-widget-root"]],viewQuery:function(e,n){if(1&e&&t.Gf(le,5),2&e){let l;t.iGM(l=t.CRH())&&(n.simpleViewComponentInstance=l.first)}},features:[t.qOj],decls:3,vars:3,consts:[["class","sp-flex sp-items-center sp-justify-center sp-h-full",4,"ngIf"],["class","sp-message sp-message-info",4,"ngIf"],[3,"simpleViewLoaded",4,"ngIf"],[1,"sp-flex","sp-items-center","sp-justify-center","sp-h-full"],[1,"sp-message","sp-message-info"],[3,"simpleViewLoaded"]],template:function(e,n){1&e&&(t.YNc(0,Is,2,0,"div",0),t.YNc(1,ws,2,0,"div",1),t.YNc(2,Ds,1,0,"sp-skill-widget-simple-view",2)),2&e&&(t.Q6J("ngIf",n.loaderVisible),t.xp6(1),t.Q6J("ngIf",n.isReady&&!n.taskExistsInAnyBox),t.xp6(1),t.Q6J("ngIf",n.isReady&&n.taskExistsInAnyBox))},directives:[p.O5,As._,le],styles:["sp-skill-widget-root .sp-message{position:relative;top:0;left:0;min-width:auto}.sp-option-element .sp-skill-widget-element-markup .skill-item-text{overflow:hidden;text-overflow:ellipsis;display:inline-block}.sp-skill-item-color{display:inline-flex;justify-content:center;width:16px;height:16px;border-radius:50%;cursor:default;align-items:center}.sp-skill-item-color__icon{font-size:.75rem;display:inline-flex;color:var(--white);font-family:var(--font-family);font-weight:bold;text-transform:uppercase}\n"],encapsulation:2,changeDetection:0}),i})();var Fs=r(51545),Ls=r(12002),bs=r(51805),Os=r(51820),Es=r(97425),Ws=r(84974),Hs=r(92944),Ms=r(68890),Bs=r(31890),Ne=r(88324);const Us=[{provide:T,useClass:Dt},{provide:S,useClass:$t},{provide:Z,useClass:Qt},{provide:"MODULE",useValue:"SKILL_EXTERNAL_PANEL"},oe,ue.O,Ae,ke,Se,Ce,ve,fe];let Ns=(()=>{class i{static forRoot(){return{ngModule:i,providers:Us}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.ez,f.Bz.forChild([{path:"",component:Ue}]),Ws.A.forRoot(),Fs.F,Bs.z.forRoot(Ne.F.REST|Ne.F.STORE),g.Aw.forFeature(L,{simpleView:Zt}),d.sQ.forFeature([F,A,I,D,w,C]),J.L,Ls.K,bs.$,Hs.$,Os.I,Ms.z8,Ve.p,je.q,v.$,Ze.X.forChild(),Ge.z.forChild(),Qe.d.forBox(z.U,z.U,z.U),$e.l,Ye.T,Es.o,m.J]]}),i})();var js=r(12938),Vs=r(25642),Ys=r(12624);let Zs=(()=>{class i{constructor(e,n,l){e.init(),n.set(!0),l.set(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Ys.E),t.LFG(js.z),t.LFG(Vs.y))},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Ns.forRoot()]]}),i})()},12944:(K,x,r)=>{r.d(x,{$:()=>d});var p=r(45607),f=r(46836);class d extends p.${constructor(m){super(m)}static fromIds(m,v,J){return new d([f._.toString(m),v.toString(),J])}static fromCompoundId(m){return new d(m)}static fromExtUserId(m){return d.fromIds(f._.EXT_USER,m.getExtPlatformId(),m.getExtUserKey()).getInternal()}static fromExtUser(m){return d.fromExtUserId(m.id)}getResourceType(){return f._.parse(this.idAt(0))}getExtPlatformId(){return+this.idAt(1)}getExternalKey(){return this.idAt(2)}}},32498:(K,x,r)=>{r.d(x,{j:()=>p});class p{constructor(d,g,m){this.id=d,this.type=g,this.platformId=m}getId(){return this.id}getType(){return this.type}getPlatformId(){return this.platformId}}},46836:(K,x,r)=>{r.d(x,{_:()=>p});var f,p=(()=>((p||(p={})).EXT_USER="EXT_USER",p))();(f=p||(p={})).parse=function(v){return f[function(v){return f[v]}(v)]},f.toString=function(v){return f[v]}}}]);